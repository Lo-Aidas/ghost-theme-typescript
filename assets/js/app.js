var SearchService="";!function(e){SearchService=function(t){var o=this;o.config=e.extend({per_page:10,selectors:{body:"body",form:".u-search-form",input:".u-search-input",container:"#u-search",modal:"#u-search .modal",modal_body:"#u-search .modal-body",modal_footer:"#u-search .modal-footer",modal_overlay:"#u-search .modal-overlay",modal_results:"#u-search .modal-results",modal_metadata:"#u-search .modal-metadata",modal_error:"#u-search .modal-error",modal_loading_bar:"#u-search .modal-loading-bar",modal_ajax_content:"#u-search .modal-ajax-content",modal_logo:"#u-search .modal-footer .logo",btn_close:"#u-search .btn-close",btn_next:"#u-search .btn-next",btn_prev:"#u-search .btn-prev"},brands:{google:{logo:"/assets/img/google.svg",url:"https://cse.google.com"},algolia:{logo:"/assets/img/algolia.svg",url:"https://www.algolia.com"},hexo:{logo:"",url:""},azure:{logo:"/assets/img/azure.svg",url:"https://azure.microsoft.com/en-us/services/search/"},baidu:{logo:"/assets/img/baidu.svg",url:"http://zn.baidu.com/cse/home/index"}}},t),o.dom={},o.percentLoaded=0,o.open=!1,o.queryText="",o.nav={next:-1,prev:-1,total:0,current:1},o.parseSelectors=function(){for(var a in o.config.selectors)o.dom[a]=e(o.config.selectors[a])},o.beforeQuery=function(){o.open||(o.dom.container.fadeIn(),o.dom.body.addClass("modal-active")),o.dom.input.each(function(a,t){e(t).val(o.queryText)}),document.activeElement.blur(),o.dom.modal_error.hide(),o.dom.modal_ajax_content.removeClass("loaded"),o.startLoading()},o.afterQuery=function(){o.dom.modal_body.scrollTop(0),o.dom.modal_ajax_content.addClass("loaded"),o.stopLoading()},o.search=function(e,a){o.beforeQuery(),o.search instanceof Function?o.query(o.queryText,e,function(){o.afterQuery()}):(console.log("query() does not exist."),o.onQueryError(o.queryText,""),o.afterQuery())},o.onQueryError=function(e,a){var t="";t="success"===a?'No result found for "'+e+'".':"timeout"===a?"Unfortunate timeout.":"Mysterious failure.",o.dom.modal_results.html(""),o.dom.modal_error.html(t),o.dom.modal_error.show()},o.nextPage=function(){o.nav.next!==-1&&o.search(o.nav.next)},o.prevPage=function(){o.nav.prev!==-1&&o.search(o.nav.prev)},o.buildResult=function(e,a,t){var o="";return o="<li>",o+="<a class='result' href='"+e+"'>",o+="<span class='title'>"+a+"</span>",o+="<span class='digest'>"+t+"</span>",o+="<span class='icon icon-chevron-thin-right'></span>",o+="</a>",o+="</li>"},o.close=function(){o.open=!1,o.dom.container.fadeOut(),o.dom.body.removeClass("modal-active")},o.onSubmit=function(a){a.preventDefault(),o.queryText=e(this).children(".u-search-input").val(),o.search(1)},o.startLoading=function(){o.dom.modal_loading_bar.show(),o.loadingTimer=setInterval(function(){o.percentLoaded=Math.min(o.percentLoaded+5,95),o.dom.modal_loading_bar.css("width",o.percentLoaded+"%")},100)},o.stopLoading=function(){clearInterval(o.loadingTimer),o.dom.modal_loading_bar.css("width","100%"),o.dom.modal_loading_bar.fadeOut(),setTimeout(function(){o.percentLoaded=0,o.dom.modal_loading_bar.css("width","0%")},300)},o.addLogo=function(e){var a="";o.config.brands[e]&&o.config.brands[e].logo&&(a+="<a href='"+o.config.brands[e].url+"'>",a+='<img src="'+o.config.brands[e].logo+'" />',a+="</a>",o.dom.modal_logo.html(a),o.dom.modal_logo.addClass(e))},o.init=function(){e("body").append(a),o.parseSelectors(),o.dom.form.each(function(a,t){e(t).on("submit",o.onSubmit)}),o.dom.modal_overlay.on("click",o.close),o.dom.btn_close.on("click",o.close),o.dom.btn_next.on("click",o.nextPage),o.dom.btn_prev.on("click",o.prevPage)},o.init()};var a='<div id="u-search"><div class="modal"> <header class="modal-header" class="clearfix"><form id="u-search-modal-form" class="u-search-form" name="uSearchModalForm"> <input type="text" id="u-search-modal-input" class="u-search-input" /> <button type="submit" id="u-search-modal-btn-submit" class="u-search-btn-submit"> <span class="icon icon-search"></span> </button></form> <a class="btn-close"> <span class="icon icon-close"></span> </a><div class="modal-loading"><div class="modal-loading-bar"></div></div> </header> <main class="modal-body"><ul class="modal-results modal-ajax-content"></ul> </main> <footer class="modal-footer clearfix"><div class="modal-metadata modal-ajax-content"> <strong class="range"></strong> of <strong class="total"></strong></div><div class="modal-error"></div> <div class="logo"></div> <a class="nav btn-next modal-ajax-content"> <span class="text">NEXT</span> <span class="icon icon-chevron-right"></span> </a> <a class="nav btn-prev modal-ajax-content"> <span class="icon icon-chevron-left"></span> <span class="text">PREV</span> </a> </footer></div><div class="modal-overlay"></div></div>'}(jQuery);var AlgoliaSearch;!function(e){"use strict";AlgoliaSearch=function(a){SearchService.apply(this,arguments);var t=this,o="https://"+t.config.appId+"-dsn.algolia.net/1/indexes/"+t.config.indexName;t.addLogo("algolia"),t.buildResultList=function(a){var o="";return e.each(a,function(e,a){var n=a.permalink||a.path||"";!a.permalink&&a.path&&(n="/"+n);var r=a.title,s=a._highlightResult.excerptStrip.value||"";o+=t.buildResult(n,r,s)}),o},t.buildMetadata=function(e){t.nav.current=e.page*e.hitsPerPage+1,t.nav.currentCount=e.hits.length,t.nav.total=parseInt(e.nbHits),t.dom.modal_metadata.children(".total").html(t.nav.total),t.dom.modal_metadata.children(".range").html(t.nav.current+"-"+(t.nav.current+t.nav.currentCount-1)),t.nav.total>0?t.dom.modal_metadata.show():t.dom.modal_metadata.hide(),e.page<e.nbPages-1?(t.nav.next=e.page+1+1,t.dom.btn_next.show()):(t.nav.next=-1,t.dom.btn_next.hide()),e.page>0?(t.nav.prev=e.page+1-1,t.dom.btn_prev.show()):(t.nav.prev=-1,t.dom.btn_prev.hide())},t.query=function(a,n,r){e.get(o,{query:a,page:n-1,hitsPerPage:t.config.per_page,"x-algolia-application-id":t.config.appId,"x-algolia-api-key":t.config.apiKey},function(e,o){if("success"===o&&e.hits&&e.hits.length>0){var n=t.buildResultList(e.hits);t.dom.modal_results.html(n)}else t.onQueryError(a,o);t.buildMetadata(e),r&&r(e)})}}}(jQuery);var AzureSearch;!function(e){"use strict";AzureSearch=function(a){SearchService.apply(this,arguments);var t=this,o="https://"+t.config.serviceName+".search.windows.net/indexes/"+t.config.indexName+"/docs?api-version=2015-02-28";t.nav.current=1,t.addLogo("azure"),t.buildResultList=function(a){var o="";return e.each(a,function(e,a){var n=a.permalink||a.path||"";!a.permalink&&a.path&&(n="/"+n);var r=a.title,s=a.excerptStrip||"";o+=t.buildResult(n,r,s)}),o},t.buildMetadata=function(e,a){t.nav.current=a,t.nav.currentCount=e.value.length,t.nav.total=parseInt(e["@odata.count"]),t.dom.modal_metadata.children(".total").html(t.nav.total),t.dom.modal_metadata.children(".range").html(t.nav.current+"-"+(t.nav.current+t.nav.currentCount-1)),t.nav.total>0?t.dom.modal_metadata.show():t.dom.modal_metadata.hide(),t.nav.current+t.nav.currentCount<=t.nav.total?(t.nav.next=t.nav.current+t.nav.currentCount,t.dom.btn_next.show()):(t.nav.next=-1,t.dom.btn_next.hide()),t.nav.current>1?(t.nav.prev=t.nav.current-t.config.per_page,t.dom.btn_prev.show()):(t.nav.prev=-1,t.dom.btn_prev.hide())},t.query=function(a,n,r){e.ajax({url:o,headers:{Accept:"application/json","api-key":t.config.queryKey},data:{search:a,$skip:n-1,$top:t.config.per_page,$count:!0},type:"GET",success:function(e,o){if("success"===o&&e.value&&e.value.length>0){var s=t.buildResultList(e.value);t.dom.modal_results.html(s)}else t.onQueryError(a,o);t.buildMetadata(e,n),r&&r(e)}})}}}(jQuery);var BaiduSearch;!function(e){"use strict";BaiduSearch=function(e){SearchService.apply(this,arguments);var a=this;a.addLogo("baidu"),a.loadScript=function(){a.dom.form.attr("disabled",!0);var e="<script src='http://zhannei.baidu.com/api/customsearch/apiaccept?sid="+a.config.apiId+"&v=2.0&callback=customSearch.initBaidu' type='text/javascript' charset='utf-8'></script>";a.dom.body.append(e)},a.initBaidu=function(){a.cse=new BCse.Search(a.config.apiId),a.dom.form.attr("disabled",!1)},a.query=function(e,t,o){a.cse.setPageNum(a.config.per_page),a.cse.getResult(e,function(e){console.log(e),o instanceof Function&&o()},t)},a.loadScript()}}(jQuery);var GoogleCustomSearch="";!function(e){"use strict";GoogleCustomSearch=function(a){SearchService.apply(this,arguments);var t=this,o="https://www.googleapis.com/customsearch/v1";t.addLogo("google"),t.buildResultList=function(a){var o="";return e.each(a,function(e,a){var n=a.link,r=a.title,s=(a.htmlSnippet||"").replace("<br>","");o+=t.buildResult(n,r,s)}),o},t.buildMetadata=function(e){e.queries&&e.queries.request&&"0"!==e.queries.request[0].totalResults?(t.nav.current=e.queries.request[0].startIndex,t.nav.currentCount=e.queries.request[0].count,t.nav.total=parseInt(e.queries.request[0].totalResults),t.dom.modal_metadata.children(".total").html(t.nav.total),t.dom.modal_metadata.children(".range").html(t.nav.current+"-"+(t.nav.current+t.nav.currentCount-1)),t.dom.modal_metadata.show()):t.dom.modal_metadata.hide(),e.queries&&e.queries.nextPage?(t.nav.next=e.queries.nextPage[0].startIndex,t.dom.btn_next.show()):(t.nav.next=-1,t.dom.btn_next.hide()),e.queries&&e.queries.previousPage?(t.nav.prev=e.queries.previousPage[0].startIndex,t.dom.btn_prev.show()):(t.nav.prev=-1,t.dom.btn_prev.hide())},t.query=function(a,n,r){e.get(o,{key:t.config.apiKey,cx:t.config.engineId,q:a,start:n,num:t.config.per_page},function(e,o){if("success"===o&&e.items&&e.items.length>0){var n=t.buildResultList(e.items);t.dom.modal_results.html(n)}else t.onQueryError(a,o);t.buildMetadata(e),r&&r()})}}}(jQuery);var HexoSearch;!function(e){"use strict";HexoSearch=function(a){SearchService.apply(this,arguments);var t=this,o="/content.json";t.cache="",t.contentSearch=function(a,t){var o=a.title.trim().toLowerCase(),n=a.text.trim().toLowerCase(),r=t.trim().toLowerCase().split(" "),s=!1,i=-1,c=-1,l=-1;return""!==o&&""!==n&&e.each(r,function(e,t){if(i=o.indexOf(t),c=n.indexOf(t),i<0&&c<0?s=!1:(s=!0,c<0&&(c=0),0===e&&(l=c)),s){n=a.text.trim();var d=0,u=0;if(l>=0){d=Math.max(l-30,0),u=0===d?Math.min(200,n.length):Math.min(l+170,n.length);var m=n.substring(d,u);r.forEach(function(e){var a=new RegExp(e,"gi");m=m.replace(a,"<b>"+e+"</b>")}),a.digest=m}else u=Math.min(200,n.length),a.digest=n.trim().substring(0,u)}}),s},t.buildResultList=function(a,o){var n="";return e.each(a,function(e,a){t.contentSearch(a,o)&&(n+=t.buildResult(a.permalink,a.title,a.digest))}),n},t.buildMetadata=function(e){t.dom.modal_footer.hide()},t.query=function(a,n,r){if(t.cache){var s="";s+=t.buildResultList(t.cache.pages,a),s+=t.buildResultList(t.cache.posts,a),t.dom.modal_results.html(s),t.buildMetadata(t.cache),r&&r(t.cache)}else e.get(o,{key:t.config.apiKey,cx:t.config.engineId,q:a,start:n,num:t.config.per_page},function(e,o){if("success"!==o||!e||!e.posts&&!e.pages||e.posts.length<1&&e.pages.length<1)t.onQueryError(a,o);else{t.cache=e;var n="";n+=t.buildResultList(e.pages,a),n+=t.buildResultList(e.posts,a),t.dom.modal_results.html(n)}t.buildMetadata(e),r&&r(e)})}}}(jQuery);var customSearch;!function(e){"use strict";var a="google",t=!0,o="AIzaSyDGd5JJH7rR3sgS-JPYblwJ72GOsqzighc",n="017821029378163458527:msqkochcsj0",r="",s="",i="",c="",l="",d="",u="",m={},h=function(a){a.preventDefault();var t=e(this),o=a.data&&a.data.correction?a.data.correction:0;e("html, body").animate({scrollTop:e(t.attr("href")).offset().top-o},400)},p=function(a){a.stopPropagation(),e("body").removeClass("menu-open"),e(".site-nav-switch").removeClass("active")},v=function(a){a.stopPropagation(),e("body").toggleClass("menu-open"),e(".site-nav-switch").toggleClass("active")},g=function(){var a=e(".single .content ul").length,t=e(".single .content ul li").length;e("#pixiv-vol").text(a),e("#pixiv-artist-count").text(t)},f=function(a){var t=this;t.init=function(){e(a).each(function(){var a=e(this),t=a.find("h2.title > a").attr("href"),o=a.find("section.content"),n=a.find(".content-loading"),r=o.html(),s=/<!-- *more *-->(.|\n)*/i,i=r.replace(s,"");r.length!==i.length&&(i+="<a href='"+t+"' class='readmore'>Read More...</a>"),o.html(i),o.addClass("excerpt-ready"),n.addClass("excerpt-ready")})},t.init()};e(function(){e("#footer, #main").addClass("loaded"),e(".site-nav-switch").on("click",v),e(document).on("click",p),e(".site-menu").on("click",function(e){e.stopPropagation()}),e(".window-nav, .go-comment").on("click",h),setTimeout(function(){e("#loading-bar-wrapper").fadeOut(500)},300),e("body").hasClass("tag-pixiv")&&e("body").hasClass("page")&&g(),t&&(m=new f(".post-list .post")),"google"===a?customSearch=new GoogleCustomSearch({apiKey:o,engineId:n}):"algolia"===a?customSearch=new AlgoliaSearch({apiKey:r,appId:s,indexName:i}):"hexo"===a?customSearch=new HexoSearch:"azure"===a?customSearch=new AzureSearch({serviceName:c,indexName:l,queryKey:d}):"baidu"===a&&(customSearch=new BaiduSearch({apiId:u}))})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlYXJjaC5qcyIsImFwcC5qcyJdLCJuYW1lcyI6WyJTZWFyY2hTZXJ2aWNlIiwiJCIsIm9wdGlvbnMiLCJzZWxmIiwidGhpcyIsImNvbmZpZyIsImV4dGVuZCIsInBlcl9wYWdlIiwic2VsZWN0b3JzIiwiYm9keSIsImZvcm0iLCJpbnB1dCIsImNvbnRhaW5lciIsIm1vZGFsIiwibW9kYWxfYm9keSIsIm1vZGFsX2Zvb3RlciIsIm1vZGFsX292ZXJsYXkiLCJtb2RhbF9yZXN1bHRzIiwibW9kYWxfbWV0YWRhdGEiLCJtb2RhbF9lcnJvciIsIm1vZGFsX2xvYWRpbmdfYmFyIiwibW9kYWxfYWpheF9jb250ZW50IiwibW9kYWxfbG9nbyIsImJ0bl9jbG9zZSIsImJ0bl9uZXh0IiwiYnRuX3ByZXYiLCJicmFuZHMiLCJnb29nbGUiLCJsb2dvIiwidXJsIiwiYWxnb2xpYSIsImhleG8iLCJhenVyZSIsImJhaWR1IiwiZG9tIiwicGVyY2VudExvYWRlZCIsIm9wZW4iLCJxdWVyeVRleHQiLCJuYXYiLCJuZXh0IiwicHJldiIsInRvdGFsIiwiY3VycmVudCIsInBhcnNlU2VsZWN0b3JzIiwia2V5IiwiYmVmb3JlUXVlcnkiLCJmYWRlSW4iLCJhZGRDbGFzcyIsImVhY2giLCJpbmRleCIsImVsZW0iLCJ2YWwiLCJkb2N1bWVudCIsImFjdGl2ZUVsZW1lbnQiLCJibHVyIiwiaGlkZSIsInJlbW92ZUNsYXNzIiwic3RhcnRMb2FkaW5nIiwiYWZ0ZXJRdWVyeSIsInNjcm9sbFRvcCIsInN0b3BMb2FkaW5nIiwic2VhcmNoIiwic3RhcnRJbmRleCIsImNhbGxiYWNrIiwiRnVuY3Rpb24iLCJxdWVyeSIsImNvbnNvbGUiLCJsb2ciLCJvblF1ZXJ5RXJyb3IiLCJzdGF0dXMiLCJlcnJNc2ciLCJodG1sIiwic2hvdyIsIm5leHRQYWdlIiwicHJldlBhZ2UiLCJidWlsZFJlc3VsdCIsInRpdGxlIiwiZGlnZXN0IiwiY2xvc2UiLCJmYWRlT3V0Iiwib25TdWJtaXQiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiY2hpbGRyZW4iLCJsb2FkaW5nVGltZXIiLCJzZXRJbnRlcnZhbCIsIk1hdGgiLCJtaW4iLCJjc3MiLCJjbGVhckludGVydmFsIiwic2V0VGltZW91dCIsImFkZExvZ28iLCJzZXJ2aWNlIiwiaW5pdCIsImFwcGVuZCIsInRlbXBsYXRlIiwib24iLCJqUXVlcnkiLCJBbGdvbGlhU2VhcmNoIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJlbmRwb2ludCIsImFwcElkIiwiaW5kZXhOYW1lIiwiYnVpbGRSZXN1bHRMaXN0IiwiZGF0YSIsInJvdyIsInBlcm1hbGluayIsInBhdGgiLCJfaGlnaGxpZ2h0UmVzdWx0IiwiZXhjZXJwdFN0cmlwIiwidmFsdWUiLCJidWlsZE1ldGFkYXRhIiwicGFnZSIsImhpdHNQZXJQYWdlIiwiY3VycmVudENvdW50IiwiaGl0cyIsImxlbmd0aCIsInBhcnNlSW50IiwibmJIaXRzIiwibmJQYWdlcyIsImdldCIsIngtYWxnb2xpYS1hcHBsaWNhdGlvbi1pZCIsIngtYWxnb2xpYS1hcGkta2V5IiwiYXBpS2V5IiwicmVzdWx0cyIsIkF6dXJlU2VhcmNoIiwic2VydmljZU5hbWUiLCJhamF4IiwiaGVhZGVycyIsIkFjY2VwdCIsImFwaS1rZXkiLCJxdWVyeUtleSIsIiRza2lwIiwiJHRvcCIsIiRjb3VudCIsInR5cGUiLCJzdWNjZXNzIiwiQmFpZHVTZWFyY2giLCJsb2FkU2NyaXB0IiwiYXR0ciIsInNjcmlwdCIsImFwaUlkIiwiaW5pdEJhaWR1IiwiY3NlIiwiQkNzZSIsIlNlYXJjaCIsInNldFBhZ2VOdW0iLCJnZXRSZXN1bHQiLCJHb29nbGVDdXN0b21TZWFyY2giLCJsaW5rIiwiaHRtbFNuaXBwZXQiLCJyZXBsYWNlIiwicXVlcmllcyIsInJlcXVlc3QiLCJ0b3RhbFJlc3VsdHMiLCJjb3VudCIsInByZXZpb3VzUGFnZSIsImN4IiwiZW5naW5lSWQiLCJxIiwic3RhcnQiLCJudW0iLCJpdGVtcyIsIkhleG9TZWFyY2giLCJjYWNoZSIsImNvbnRlbnRTZWFyY2giLCJwb3N0IiwicG9zdF90aXRsZSIsInRyaW0iLCJ0b0xvd2VyQ2FzZSIsInBvc3RfY29udGVudCIsInRleHQiLCJrZXl3b3JkcyIsInNwbGl0IiwiZm91bmRNYXRjaCIsImluZGV4X3RpdGxlIiwiaW5kZXhfY29udGVudCIsImZpcnN0X29jY3VyIiwid29yZCIsImluZGV4T2YiLCJlbmQiLCJtYXgiLCJtYXRjaF9jb250ZW50Iiwic3Vic3RyaW5nIiwiZm9yRWFjaCIsImtleXdvcmQiLCJyZWdTIiwiUmVnRXhwIiwicGFnZXMiLCJwb3N0cyIsImN1c3RvbVNlYXJjaCIsIlNFQVJDSF9TRVJWSUNFIiwiRVhDRVJQVF9HRU5FUkFUT1JfRU5BQkxFIiwiR09PR0xFX0NVU1RPTV9TRUFSQ0hfQVBJX0tFWSIsIkdPT0dMRV9DVVNUT01fU0VBUkNIX0VOR0lORV9JRCIsIkFMR09MSUFfQVBJX0tFWSIsIkFMR09MSUFfQVBQX0lEIiwiQUxHT0xJQV9JTkRFWF9OQU1FIiwiQVpVUkVfU0VSVklDRV9OQU1FIiwiQVpVUkVfSU5ERVhfTkFNRSIsIkFaVVJFX1FVRVJZX0tFWSIsIkJBSURVX0FQSV9LRVkiLCJleGNlcnB0R2VuZXJhdG9yIiwic2Nyb2xsdG9FbGVtZW50IiwiZSIsImNvcnJlY3Rpb24iLCJhbmltYXRlIiwib2Zmc2V0IiwidG9wIiwiY2xvc2VNZW51Iiwic3RvcFByb3BhZ2F0aW9uIiwidG9nZ2xlTWVudSIsInRvZ2dsZUNsYXNzIiwicGl4aXZBcmNoaXZlU3RhdCIsInZvbCIsImFydGlzdENvdW50IiwiRXhjZXJwdEdlbmVyYXRvciIsInNlbGVjdG9yIiwiZmluZCIsImNvbnRlbnRUYWciLCJjb250ZW50TG9hZGluZ1RhZyIsImNvbnRlbnQiLCJyZSIsImV4Y2VycHQiLCJoYXNDbGFzcyJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsZUFBQSxJQUVBLFNBQUFDLEdBS0FELGNBQUEsU0FBQUUsR0FDQSxHQUFBQyxHQUFBQyxJQUVBRCxHQUFBRSxPQUFBSixFQUFBSyxRQUNBQyxT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LGNBQ0FJLE1BQUE0RCxRQUtBekciLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFNlYXJjaFNlcnZpY2UgPSBcIlwiO1xyXG5cclxuKGZ1bmN0aW9uKCQpIHtcclxuICAvKipcclxuICAgKiBBIHN1cGVyIGNsYXNzIG9mIGNvbW1vbiBsb2dpY3MgZm9yIGFsbCBzZWFyY2ggc2VydmljZXNcclxuICAgKiBAcGFyYW0gb3B0aW9ucyA6IChvYmplY3QpXHJcbiAgICovXHJcbiAgU2VhcmNoU2VydmljZSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIFxyXG4gICAgc2VsZi5jb25maWcgPSAkLmV4dGVuZCh7XHJcbiAgICAgIHBlcl9wYWdlOiAxMCxcclxuICAgICAgc2VsZWN0b3JzOiB7XHJcbiAgICAgICAgYm9keTogXCJib2R5XCIsXHJcbiAgICAgICAgZm9ybTogXCIudS1zZWFyY2gtZm9ybVwiLFxyXG4gICAgICAgIGlucHV0OiBcIi51LXNlYXJjaC1pbnB1dFwiLFxyXG4gICAgICAgIGNvbnRhaW5lcjogXCIjdS1zZWFyY2hcIixcclxuICAgICAgICBtb2RhbDogXCIjdS1zZWFyY2ggLm1vZGFsXCIsXHJcbiAgICAgICAgbW9kYWxfYm9keTogXCIjdS1zZWFyY2ggLm1vZGFsLWJvZHlcIixcclxuICAgICAgICBtb2RhbF9mb290ZXI6IFwiI3Utc2VhcmNoIC5tb2RhbC1mb290ZXJcIixcclxuICAgICAgICBtb2RhbF9vdmVybGF5OiBcIiN1LXNlYXJjaCAubW9kYWwtb3ZlcmxheVwiLFxyXG4gICAgICAgIG1vZGFsX3Jlc3VsdHM6IFwiI3Utc2VhcmNoIC5tb2RhbC1yZXN1bHRzXCIsXHJcbiAgICAgICAgbW9kYWxfbWV0YWRhdGE6IFwiI3Utc2VhcmNoIC5tb2RhbC1tZXRhZGF0YVwiLFxyXG4gICAgICAgIG1vZGFsX2Vycm9yOiBcIiN1LXNlYXJjaCAubW9kYWwtZXJyb3JcIixcclxuICAgICAgICBtb2RhbF9sb2FkaW5nX2JhcjogXCIjdS1zZWFyY2ggLm1vZGFsLWxvYWRpbmctYmFyXCIsXHJcbiAgICAgICAgbW9kYWxfYWpheF9jb250ZW50OiBcIiN1LXNlYXJjaCAubW9kYWwtYWpheC1jb250ZW50XCIsXHJcbiAgICAgICAgbW9kYWxfbG9nbzogJyN1LXNlYXJjaCAubW9kYWwtZm9vdGVyIC5sb2dvJyxcclxuICAgICAgICBidG5fY2xvc2U6IFwiI3Utc2VhcmNoIC5idG4tY2xvc2VcIixcclxuICAgICAgICBidG5fbmV4dDogXCIjdS1zZWFyY2ggLmJ0bi1uZXh0XCIsXHJcbiAgICAgICAgYnRuX3ByZXY6IFwiI3Utc2VhcmNoIC5idG4tcHJldlwiXHJcbiAgICAgIH0sXHJcbiAgICAgIGJyYW5kczoge1xyXG4gICAgICAgICdnb29nbGUnOiB7bG9nbzogJy9hc3NldHMvaW1nL2dvb2dsZS5zdmcnLCB1cmw6ICdodHRwczovL2NzZS5nb29nbGUuY29tJ30sXHJcbiAgICAgICAgJ2FsZ29saWEnOiB7bG9nbzogJy9hc3NldHMvaW1nL2FsZ29saWEuc3ZnJywgdXJsOiAnaHR0cHM6Ly93d3cuYWxnb2xpYS5jb20nfSxcclxuICAgICAgICAnaGV4byc6IHtsb2dvOiAnJywgdXJsOiAnJ30sXHJcbiAgICAgICAgJ2F6dXJlJzoge2xvZ286ICcvYXNzZXRzL2ltZy9henVyZS5zdmcnLCB1cmw6ICdodHRwczovL2F6dXJlLm1pY3Jvc29mdC5jb20vZW4tdXMvc2VydmljZXMvc2VhcmNoLyd9LFxyXG4gICAgICAgICdiYWlkdSc6IHtsb2dvOiAnL2Fzc2V0cy9pbWcvYmFpZHUuc3ZnJywgdXJsOiAnaHR0cDovL3puLmJhaWR1LmNvbS9jc2UvaG9tZS9pbmRleCd9XHJcbiAgICAgIH1cclxuICAgIH0sIG9wdGlvbnMpO1xyXG5cclxuICAgIHNlbGYuZG9tID0ge307XHJcbiAgICBzZWxmLnBlcmNlbnRMb2FkZWQgPSAwO1xyXG4gICAgc2VsZi5vcGVuID0gZmFsc2U7XHJcbiAgICBzZWxmLnF1ZXJ5VGV4dCA9IFwiXCI7XHJcbiAgICBzZWxmLm5hdiA9IHtcclxuICAgICAgbmV4dDogLTEsXHJcbiAgICAgIHByZXY6IC0xLFxyXG4gICAgICB0b3RhbDogMCxcclxuICAgICAgY3VycmVudDogMVxyXG4gICAgfTtcclxuXHJcbiAgICBzZWxmLnBhcnNlU2VsZWN0b3JzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIGZvciAodmFyIGtleSBpbiBzZWxmLmNvbmZpZy5zZWxlY3RvcnMpIHtcclxuICAgICAgICBzZWxmLmRvbVtrZXldID0gJChzZWxmLmNvbmZpZy5zZWxlY3RvcnNba2V5XSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgc2VsZi5iZWZvcmVRdWVyeSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAoIXNlbGYub3Blbikge1xyXG4gICAgICAgIHNlbGYuZG9tLmNvbnRhaW5lci5mYWRlSW4oKTtcclxuICAgICAgICBzZWxmLmRvbS5ib2R5LmFkZENsYXNzKCdtb2RhbC1hY3RpdmUnKTtcclxuICAgICAgfVxyXG4gICAgICBzZWxmLmRvbS5pbnB1dC5lYWNoKGZ1bmN0aW9uKGluZGV4LGVsZW0pIHtcclxuICAgICAgICAkKGVsZW0pLnZhbChzZWxmLnF1ZXJ5VGV4dCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKTtcclxuICAgICAgc2VsZi5kb20ubW9kYWxfZXJyb3IuaGlkZSgpO1xyXG4gICAgICBzZWxmLmRvbS5tb2RhbF9hamF4X2NvbnRlbnQucmVtb3ZlQ2xhc3MoJ2xvYWRlZCcpO1xyXG4gICAgICBzZWxmLnN0YXJ0TG9hZGluZygpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgc2VsZi5hZnRlclF1ZXJ5ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHNlbGYuZG9tLm1vZGFsX2JvZHkuc2Nyb2xsVG9wKDApO1xyXG4gICAgICBzZWxmLmRvbS5tb2RhbF9hamF4X2NvbnRlbnQuYWRkQ2xhc3MoJ2xvYWRlZCcpO1xyXG4gICAgICBzZWxmLnN0b3BMb2FkaW5nKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGVyZm9ybSBhIGNvbXBsZXRlIHNlcmFjaCBvcGVyYXRpb24gaW5jbHVkaW5nIFVJIHVwZGF0ZXMgYW5kIHF1ZXJ5XHJcbiAgICAgKiBAcGFyYW0gc3RhcnRJbmRleCB7aW50fSBzdGFydCBpbmRleCBvciBwYWdlIG51bWJlclxyXG4gICAgICovXHJcbiAgICBzZWxmLnNlYXJjaCA9IGZ1bmN0aW9uKHN0YXJ0SW5kZXgsIGNhbGxiYWNrKSB7XHJcbiAgICAgIHNlbGYuYmVmb3JlUXVlcnkoKTtcclxuICAgICAgaWYgKHNlbGYuc2VhcmNoIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICBzZWxmLnF1ZXJ5KHNlbGYucXVlcnlUZXh0LCBzdGFydEluZGV4LCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNlbGYuYWZ0ZXJRdWVyeSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwicXVlcnkoKSBkb2VzIG5vdCBleGlzdC5cIik7XHJcbiAgICAgICAgc2VsZi5vblF1ZXJ5RXJyb3Ioc2VsZi5xdWVyeVRleHQsICcnKTtcclxuICAgICAgICBzZWxmLmFmdGVyUXVlcnkoKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFF1ZXJ5IGVycm9yIGhhbmRsZXJcclxuICAgICAqIEBwYXJhbSBxdWVyeVRleHQ6IChzdHJpbmcpXHJcbiAgICAgKiBAcGFyYW0gc3RhdHVzOiAoc3RyaW5nKVxyXG4gICAgICovXHJcbiAgICBzZWxmLm9uUXVlcnlFcnJvciA9IGZ1bmN0aW9uKHF1ZXJ5VGV4dCwgc3RhdHVzKSB7XHJcbiAgICAgIHZhciBlcnJNc2cgPSBcIlwiO1xyXG4gICAgICBpZiAoc3RhdHVzID09PSBcInN1Y2Nlc3NcIikgZXJyTXNnID0gXCJObyByZXN1bHQgZm91bmQgZm9yIFxcXCJcIiArcXVlcnlUZXh0KyBcIlxcXCIuXCI7XHJcbiAgICAgIGVsc2UgaWYgKHN0YXR1cyA9PT0gXCJ0aW1lb3V0XCIpIGVyck1zZyA9IFwiVW5mb3J0dW5hdGUgdGltZW91dC5cIjtcclxuICAgICAgZWxzZSBlcnJNc2cgPSBcIk15c3RlcmlvdXMgZmFpbHVyZS5cIjtcclxuICAgICAgc2VsZi5kb20ubW9kYWxfcmVzdWx0cy5odG1sKFwiXCIpO1xyXG4gICAgICBzZWxmLmRvbS5tb2RhbF9lcnJvci5odG1sKGVyck1zZyk7XHJcbiAgICAgIHNlbGYuZG9tLm1vZGFsX2Vycm9yLnNob3coKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHNlbGYubmV4dFBhZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKHNlbGYubmF2Lm5leHQgIT09IC0xKSB7XHJcbiAgICAgICAgc2VsZi5zZWFyY2goc2VsZi5uYXYubmV4dCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIHNlbGYucHJldlBhZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKHNlbGYubmF2LnByZXYgIT09IC0xKSB7XHJcbiAgICAgICAgc2VsZi5zZWFyY2goc2VsZi5uYXYucHJldik7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGUgaHRtbCBmb3Igb25lIHJlc3VsdFxyXG4gICAgICogQHBhcmFtIHVybCA6IChzdHJpbmcpIHVybFxyXG4gICAgICogQHBhcmFtIHRpdGxlIDogKHN0cmluZykgdGl0bGVcclxuICAgICAqIEBwYXJhbSBkaWdlc3QgOiAoc3RyaW5nKSBkaWdlc3RcclxuICAgICAqL1xyXG4gICAgc2VsZi5idWlsZFJlc3VsdCA9IGZ1bmN0aW9uKHVybCwgdGl0bGUsIGRpZ2VzdCkge1xyXG4gICAgICB2YXIgaHRtbCA9IFwiXCI7XHJcbiAgICAgIGh0bWwgPSBcIjxsaT5cIjtcclxuICAgICAgaHRtbCArPSAgIFwiPGEgY2xhc3M9J3Jlc3VsdCcgaHJlZj0nXCIgK3VybCsgXCInPlwiO1xyXG4gICAgICBodG1sICs9ICAgICBcIjxzcGFuIGNsYXNzPSd0aXRsZSc+XCIgK3RpdGxlKyBcIjwvc3Bhbj5cIjtcclxuICAgICAgaHRtbCArPSAgICAgXCI8c3BhbiBjbGFzcz0nZGlnZXN0Jz5cIiArZGlnZXN0KyBcIjwvc3Bhbj5cIjtcclxuICAgICAgaHRtbCArPSAgICAgXCI8c3BhbiBjbGFzcz0naWNvbiBpY29uLWNoZXZyb24tdGhpbi1yaWdodCc+PC9zcGFuPlwiO1xyXG4gICAgICBodG1sICs9ICAgXCI8L2E+XCI7XHJcbiAgICAgIGh0bWwgKz0gXCI8L2xpPlwiO1xyXG4gICAgICByZXR1cm4gaHRtbDtcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogQ2xvc2UgdGhlIG1vZGFsLCByZXN1bWUgYm9keSBzY3JvbGxpbmdcclxuICAgICAqIG5vIHBhcmFtXHJcbiAgICAgKi9cclxuICAgIHNlbGYuY2xvc2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgc2VsZi5vcGVuID0gZmFsc2U7XHJcbiAgICAgIHNlbGYuZG9tLmNvbnRhaW5lci5mYWRlT3V0KCk7XHJcbiAgICAgIHNlbGYuZG9tLmJvZHkucmVtb3ZlQ2xhc3MoJ21vZGFsLWFjdGl2ZScpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBTZWFyY2hmb3JtIHN1Ym1pdCBldmVudCBoYW5kbGVyXHJcbiAgICAgKiBAcGFyYW0gcXVlcnlUZXh0IDogKHN0cmluZykgdGhlIHF1ZXJ5IHRleHRcclxuICAgICAqL1xyXG4gICAgc2VsZi5vblN1Ym1pdCA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHNlbGYucXVlcnlUZXh0ID0gJCh0aGlzKS5jaGlsZHJlbignLnUtc2VhcmNoLWlucHV0JykudmFsKCk7XHJcbiAgICAgIHNlbGYuc2VhcmNoKDEpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydCBsb2FkaW5nIGJhciBhbmltYXRpb25cclxuICAgICAqIG5vIHBhcmFtXHJcbiAgICAgKi9cclxuICAgIHNlbGYuc3RhcnRMb2FkaW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHNlbGYuZG9tLm1vZGFsX2xvYWRpbmdfYmFyLnNob3coKTtcclxuICAgICAgc2VsZi5sb2FkaW5nVGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsgXHJcbiAgICAgICAgc2VsZi5wZXJjZW50TG9hZGVkID0gTWF0aC5taW4oc2VsZi5wZXJjZW50TG9hZGVkKzUsOTUpO1xyXG4gICAgICAgIHNlbGYuZG9tLm1vZGFsX2xvYWRpbmdfYmFyLmNzcygnd2lkdGgnLCBzZWxmLnBlcmNlbnRMb2FkZWQrJyUnKTtcclxuICAgICAgfSwgMTAwKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogU3RvcCBsb2FkaW5nIGJhciBhbmltYXRpb25cclxuICAgICAqIG5vIHBhcmFtXHJcbiAgICAgKi9cclxuICAgIHNlbGYuc3RvcExvYWRpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgICAgY2xlYXJJbnRlcnZhbChzZWxmLmxvYWRpbmdUaW1lcik7XHJcbiAgICAgIHNlbGYuZG9tLm1vZGFsX2xvYWRpbmdfYmFyLmNzcygnd2lkdGgnLCAnMTAwJScpO1xyXG4gICAgICBzZWxmLmRvbS5tb2RhbF9sb2FkaW5nX2Jhci5mYWRlT3V0KCk7XHJcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2VsZi5wZXJjZW50TG9hZGVkID0gMDtcclxuICAgICAgICBzZWxmLmRvbS5tb2RhbF9sb2FkaW5nX2Jhci5jc3MoJ3dpZHRoJywgJzAlJyk7XHJcbiAgICAgIH0sIDMwMCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIHNlcnZpY2UgYnJhbmRpbmdcclxuICAgICAqIEBwYXJhbSBzZXJ2aWNlIHtTdHJpbmd9IHNlcnZpY2UgbmFtZVxyXG4gICAgICovXHJcbiAgICBzZWxmLmFkZExvZ28gPSBmdW5jdGlvbihzZXJ2aWNlKSB7XHJcbiAgICAgIHZhciBodG1sID0gXCJcIjtcclxuICAgICAgaWYgKHNlbGYuY29uZmlnLmJyYW5kc1tzZXJ2aWNlXSAmJiBzZWxmLmNvbmZpZy5icmFuZHNbc2VydmljZV0ubG9nbykge1xyXG4gICAgICAgIGh0bWwgKz0gXCI8YSBocmVmPSdcIiArc2VsZi5jb25maWcuYnJhbmRzW3NlcnZpY2VdLnVybCsgXCInPlwiO1xyXG4gICAgICAgIGh0bWwgKz0gICAgJzxpbWcgc3JjPVwiJyArc2VsZi5jb25maWcuYnJhbmRzW3NlcnZpY2VdLmxvZ28rICdcIiAvPic7XHJcbiAgICAgICAgaHRtbCArPSBcIjwvYT5cIjtcclxuICAgICAgICBzZWxmLmRvbS5tb2RhbF9sb2dvLmh0bWwoaHRtbCk7XHJcbiAgICAgICAgc2VsZi5kb20ubW9kYWxfbG9nby5hZGRDbGFzcyhzZXJ2aWNlKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIHRlbXBsYXRlIGFuZCByZWdpc3RlciBldmVudCBoYW5kbGVyc1xyXG4gICAgICogbm8gcGFyYW1cclxuICAgICAqL1xyXG4gICAgc2VsZi5pbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICQoJ2JvZHknKS5hcHBlbmQodGVtcGxhdGUpO1xyXG4gICAgICBzZWxmLnBhcnNlU2VsZWN0b3JzKCk7XHJcbiAgICAgIHNlbGYuZG9tLmZvcm0uZWFjaChmdW5jdGlvbihpbmRleCxlbGVtKSB7XHJcbiAgICAgICAgJChlbGVtKS5vbignc3VibWl0Jywgc2VsZi5vblN1Ym1pdCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBzZWxmLmRvbS5tb2RhbF9vdmVybGF5Lm9uKCdjbGljaycsIHNlbGYuY2xvc2UpO1xyXG4gICAgICBzZWxmLmRvbS5idG5fY2xvc2Uub24oJ2NsaWNrJywgc2VsZi5jbG9zZSk7XHJcbiAgICAgIHNlbGYuZG9tLmJ0bl9uZXh0Lm9uKCdjbGljaycsIHNlbGYubmV4dFBhZ2UpO1xyXG4gICAgICBzZWxmLmRvbS5idG5fcHJldi5vbignY2xpY2snLCBzZWxmLnByZXZQYWdlKTtcclxuICAgIH07XHJcblxyXG4gICAgc2VsZi5pbml0KCk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIHRlbXBsYXRlID0gJzxkaXYgaWQ9XCJ1LXNlYXJjaFwiPjxkaXYgY2xhc3M9XCJtb2RhbFwiPiA8aGVhZGVyIGNsYXNzPVwibW9kYWwtaGVhZGVyXCIgY2xhc3M9XCJjbGVhcmZpeFwiPjxmb3JtIGlkPVwidS1zZWFyY2gtbW9kYWwtZm9ybVwiIGNsYXNzPVwidS1zZWFyY2gtZm9ybVwiIG5hbWU9XCJ1U2VhcmNoTW9kYWxGb3JtXCI+IDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwidS1zZWFyY2gtbW9kYWwtaW5wdXRcIiBjbGFzcz1cInUtc2VhcmNoLWlucHV0XCIgLz4gPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgaWQ9XCJ1LXNlYXJjaC1tb2RhbC1idG4tc3VibWl0XCIgY2xhc3M9XCJ1LXNlYXJjaC1idG4tc3VibWl0XCI+IDxzcGFuIGNsYXNzPVwiaWNvbiBpY29uLXNlYXJjaFwiPjwvc3Bhbj4gPC9idXR0b24+PC9mb3JtPiA8YSBjbGFzcz1cImJ0bi1jbG9zZVwiPiA8c3BhbiBjbGFzcz1cImljb24gaWNvbi1jbG9zZVwiPjwvc3Bhbj4gPC9hPjxkaXYgY2xhc3M9XCJtb2RhbC1sb2FkaW5nXCI+PGRpdiBjbGFzcz1cIm1vZGFsLWxvYWRpbmctYmFyXCI+PC9kaXY+PC9kaXY+IDwvaGVhZGVyPiA8bWFpbiBjbGFzcz1cIm1vZGFsLWJvZHlcIj48dWwgY2xhc3M9XCJtb2RhbC1yZXN1bHRzIG1vZGFsLWFqYXgtY29udGVudFwiPjwvdWw+IDwvbWFpbj4gPGZvb3RlciBjbGFzcz1cIm1vZGFsLWZvb3RlciBjbGVhcmZpeFwiPjxkaXYgY2xhc3M9XCJtb2RhbC1tZXRhZGF0YSBtb2RhbC1hamF4LWNvbnRlbnRcIj4gPHN0cm9uZyBjbGFzcz1cInJhbmdlXCI+PC9zdHJvbmc+IG9mIDxzdHJvbmcgY2xhc3M9XCJ0b3RhbFwiPjwvc3Ryb25nPjwvZGl2PjxkaXYgY2xhc3M9XCJtb2RhbC1lcnJvclwiPjwvZGl2PiA8ZGl2IGNsYXNzPVwibG9nb1wiPjwvZGl2PiA8YSBjbGFzcz1cIm5hdiBidG4tbmV4dCBtb2RhbC1hamF4LWNvbnRlbnRcIj4gPHNwYW4gY2xhc3M9XCJ0ZXh0XCI+TkVYVDwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJpY29uIGljb24tY2hldnJvbi1yaWdodFwiPjwvc3Bhbj4gPC9hPiA8YSBjbGFzcz1cIm5hdiBidG4tcHJldiBtb2RhbC1hamF4LWNvbnRlbnRcIj4gPHNwYW4gY2xhc3M9XCJpY29uIGljb24tY2hldnJvbi1sZWZ0XCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cInRleHRcIj5QUkVWPC9zcGFuPiA8L2E+IDwvZm9vdGVyPjwvZGl2PjxkaXYgY2xhc3M9XCJtb2RhbC1vdmVybGF5XCI+PC9kaXY+PC9kaXY+JztcclxufSkoalF1ZXJ5KTtcclxuXHJcbnZhciBBbGdvbGlhU2VhcmNoO1xyXG5cclxuKGZ1bmN0aW9uKCQpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIC8qKlxyXG4gICAqIFNlYXJjaCBieSBBbGdvbGlhIFNlYXJjaFxyXG4gICAqIEBwYXJhbSBvcHRpb25zIDogKG9iamVjdClcclxuICAgKi9cclxuICBBbGdvbGlhU2VhcmNoID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgU2VhcmNoU2VydmljZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGVuZHBvaW50ID0gXCJodHRwczovL1wiICtzZWxmLmNvbmZpZy5hcHBJZCsgXCItZHNuLmFsZ29saWEubmV0LzEvaW5kZXhlcy9cIiArc2VsZi5jb25maWcuaW5kZXhOYW1lO1xyXG4gICAgc2VsZi5hZGRMb2dvKCdhbGdvbGlhJyk7XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGUgcmVzdWx0IGxpc3QgaHRtbFxyXG4gICAgICogQHBhcmFtIGRhdGEgOiAoYXJyYXkpIHJlc3VsdCBpdGVtc1xyXG4gICAgICovXHJcbiAgICBzZWxmLmJ1aWxkUmVzdWx0TGlzdCA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgdmFyIGh0bWwgPSBcIlwiO1xyXG4gICAgICAkLmVhY2goZGF0YSwgZnVuY3Rpb24oaW5kZXgsIHJvdykge1xyXG4gICAgICAgIHZhciB1cmwgPSByb3cucGVybWFsaW5rIHx8IHJvdy5wYXRoIHx8IFwiXCI7XHJcbiAgICAgICAgaWYgKCFyb3cucGVybWFsaW5rICYmIHJvdy5wYXRoKSB7XHJcbiAgICAgICAgICB1cmwgPSBcIi9cIiArIHVybDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHRpdGxlID0gcm93LnRpdGxlO1xyXG4gICAgICAgIHZhciBkaWdlc3QgPSByb3cuX2hpZ2hsaWdodFJlc3VsdC5leGNlcnB0U3RyaXAudmFsdWUgfHwgXCJcIjtcclxuICAgICAgICBodG1sICs9IHNlbGYuYnVpbGRSZXN1bHQodXJsLCB0aXRsZSwgZGlnZXN0KTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBodG1sO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZSBtZXRhZGF0YSBhZnRlciBhIHN1Y2Nlc3NmdWwgcXVlcnlcclxuICAgICAqIEBwYXJhbSBkYXRhIDogKG9iamVjdCkgdGhlIHJhdyBzZWFyY2ggcmVzcG9uc2UgZGF0YVxyXG4gICAgICovXHJcbiAgICBzZWxmLmJ1aWxkTWV0YWRhdGEgPSBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIHNlbGYubmF2LmN1cnJlbnQgPSBkYXRhLnBhZ2UgKiBkYXRhLmhpdHNQZXJQYWdlICsgMTtcclxuICAgICAgc2VsZi5uYXYuY3VycmVudENvdW50ID0gZGF0YS5oaXRzLmxlbmd0aDtcclxuICAgICAgc2VsZi5uYXYudG90YWwgPSBwYXJzZUludChkYXRhLm5iSGl0cyk7XHJcbiAgICAgIHNlbGYuZG9tLm1vZGFsX21ldGFkYXRhLmNoaWxkcmVuKCcudG90YWwnKS5odG1sKHNlbGYubmF2LnRvdGFsKTtcclxuICAgICAgc2VsZi5kb20ubW9kYWxfbWV0YWRhdGEuY2hpbGRyZW4oJy5yYW5nZScpLmh0bWwoc2VsZi5uYXYuY3VycmVudCArIFwiLVwiICsgKHNlbGYubmF2LmN1cnJlbnQrc2VsZi5uYXYuY3VycmVudENvdW50LTEpKTtcclxuICAgICAgaWYgKHNlbGYubmF2LnRvdGFsID4gMCkge1xyXG4gICAgICAgIHNlbGYuZG9tLm1vZGFsX21ldGFkYXRhLnNob3coKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBzZWxmLmRvbS5tb2RhbF9tZXRhZGF0YS5oaWRlKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkYXRhLnBhZ2UgPCBkYXRhLm5iUGFnZXMtMSkge1xyXG4gICAgICAgIHNlbGYubmF2Lm5leHQgPSAoZGF0YS5wYWdlKzEpKzE7XHJcbiAgICAgICAgc2VsZi5kb20uYnRuX25leHQuc2hvdygpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHNlbGYubmF2Lm5leHQgPSAtMTtcclxuICAgICAgICBzZWxmLmRvbS5idG5fbmV4dC5oaWRlKCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGRhdGEucGFnZSA+IDApIHtcclxuICAgICAgICBzZWxmLm5hdi5wcmV2ID0gKGRhdGEucGFnZSsxKS0xO1xyXG4gICAgICAgIHNlbGYuZG9tLmJ0bl9wcmV2LnNob3coKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBzZWxmLm5hdi5wcmV2ID0gLTE7XHJcbiAgICAgICAgc2VsZi5kb20uYnRuX3ByZXYuaGlkZSgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFNlbmQgYSBHRVQgcmVxdWVzdFxyXG4gICAgICogQHBhcmFtIHF1ZXJ5VGV4dCA6IChzdHJpbmcpIHRoZSBxdWVyeSB0ZXh0XHJcbiAgICAgKiBAcGFyYW0gcGFnZSA6IChpbnQpIHRoZSBjdXJyZW50IHBhZ2UgKHN0YXJ0IGZyb20gMSlcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayA6IChmdW5jdGlvbilcclxuICAgICAqL1xyXG4gICAgc2VsZi5xdWVyeSA9IGZ1bmN0aW9uKHF1ZXJ5VGV4dCwgcGFnZSwgY2FsbGJhY2spIHtcclxuICAgICAgJC5nZXQoZW5kcG9pbnQsIHtcclxuICAgICAgICBxdWVyeTogcXVlcnlUZXh0LFxyXG4gICAgICAgIHBhZ2U6IHBhZ2UtMSxcclxuICAgICAgICBoaXRzUGVyUGFnZTogc2VsZi5jb25maWcucGVyX3BhZ2UsXHJcbiAgICAgICAgXCJ4LWFsZ29saWEtYXBwbGljYXRpb24taWRcIjogc2VsZi5jb25maWcuYXBwSWQsXHJcbiAgICAgICAgXCJ4LWFsZ29saWEtYXBpLWtleVwiOiBzZWxmLmNvbmZpZy5hcGlLZXlcclxuICAgICAgfSwgZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ3N1Y2Nlc3MnICYmIGRhdGEuaGl0cyAmJiBkYXRhLmhpdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgdmFyIHJlc3VsdHMgPSBzZWxmLmJ1aWxkUmVzdWx0TGlzdChkYXRhLmhpdHMpOyBcclxuICAgICAgICAgIHNlbGYuZG9tLm1vZGFsX3Jlc3VsdHMuaHRtbChyZXN1bHRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBzZWxmLm9uUXVlcnlFcnJvcihxdWVyeVRleHQsIHN0YXR1cyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYnVpbGRNZXRhZGF0YShkYXRhKTtcclxuICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgfTtcclxuXHJcbn0pKGpRdWVyeSk7XHJcbnZhciBBenVyZVNlYXJjaDtcclxuXHJcbihmdW5jdGlvbigkKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAvKipcclxuICAgKiBTZWFyY2ggYnkgQXp1cmUgU2VhcmNoIEFQSVxyXG4gICAqIEBwYXJhbSBvcHRpb25zIDogKG9iamVjdClcclxuICAgKi9cclxuICBBenVyZVNlYXJjaCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgIFNlYXJjaFNlcnZpY2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBlbmRwb2ludCA9IFwiaHR0cHM6Ly9cIiArc2VsZi5jb25maWcuc2VydmljZU5hbWUrIFwiLnNlYXJjaC53aW5kb3dzLm5ldC9pbmRleGVzL1wiICtzZWxmLmNvbmZpZy5pbmRleE5hbWUrIFwiL2RvY3M/YXBpLXZlcnNpb249MjAxNS0wMi0yOFwiO1xyXG4gICAgc2VsZi5uYXYuY3VycmVudCA9IDE7XHJcbiAgICBzZWxmLmFkZExvZ28oJ2F6dXJlJyk7XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGUgcmVzdWx0IGxpc3QgaHRtbFxyXG4gICAgICogQHBhcmFtIGRhdGEgOiAoYXJyYXkpIHJlc3VsdCBpdGVtc1xyXG4gICAgICovXHJcbiAgICBzZWxmLmJ1aWxkUmVzdWx0TGlzdCA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgdmFyIGh0bWwgPSBcIlwiO1xyXG4gICAgICAkLmVhY2goZGF0YSwgZnVuY3Rpb24oaW5kZXgsIHJvdykge1xyXG4gICAgICAgIHZhciB1cmwgPSByb3cucGVybWFsaW5rIHx8IHJvdy5wYXRoIHx8IFwiXCI7XHJcbiAgICAgICAgaWYgKCFyb3cucGVybWFsaW5rICYmIHJvdy5wYXRoKSB7XHJcbiAgICAgICAgICB1cmwgPSBcIi9cIiArIHVybDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHRpdGxlID0gcm93LnRpdGxlO1xyXG4gICAgICAgIHZhciBkaWdlc3QgPSByb3cuZXhjZXJwdFN0cmlwIHx8IFwiXCI7XHJcbiAgICAgICAgaHRtbCArPSBzZWxmLmJ1aWxkUmVzdWx0KHVybCwgdGl0bGUsIGRpZ2VzdCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gaHRtbDtcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGUgbWV0YWRhdGEgYWZ0ZXIgYSBzdWNjZXNzZnVsIHF1ZXJ5XHJcbiAgICAgKiBAcGFyYW0gZGF0YSA6IChvYmplY3QpIHRoZSByYXcgcmVzcG9uc2UgZGF0YVxyXG4gICAgICogQHBhcmFtIHN0YXJ0SW5kZXggOiAoaW50KSByZXF1ZXN0ZWQgc3RhcnQgaW5kZXggb2YgY3VycmVudCBxdWVyeVxyXG4gICAgICovXHJcbiAgICBzZWxmLmJ1aWxkTWV0YWRhdGEgPSBmdW5jdGlvbihkYXRhLCBzdGFydEluZGV4KSB7XHJcbiAgICAgIHNlbGYubmF2LmN1cnJlbnQgPSBzdGFydEluZGV4O1xyXG4gICAgICBzZWxmLm5hdi5jdXJyZW50Q291bnQgPSBkYXRhLnZhbHVlLmxlbmd0aDtcclxuICAgICAgc2VsZi5uYXYudG90YWwgPSBwYXJzZUludChkYXRhWydAb2RhdGEuY291bnQnXSk7XHJcbiAgICAgIHNlbGYuZG9tLm1vZGFsX21ldGFkYXRhLmNoaWxkcmVuKCcudG90YWwnKS5odG1sKHNlbGYubmF2LnRvdGFsKTtcclxuICAgICAgc2VsZi5kb20ubW9kYWxfbWV0YWRhdGEuY2hpbGRyZW4oJy5yYW5nZScpLmh0bWwoc2VsZi5uYXYuY3VycmVudCArIFwiLVwiICsgKHNlbGYubmF2LmN1cnJlbnQrc2VsZi5uYXYuY3VycmVudENvdW50LTEpKTtcclxuICAgICAgaWYgKHNlbGYubmF2LnRvdGFsID4gMCkge1xyXG4gICAgICAgIHNlbGYuZG9tLm1vZGFsX21ldGFkYXRhLnNob3coKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBzZWxmLmRvbS5tb2RhbF9tZXRhZGF0YS5oaWRlKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChzZWxmLm5hdi5jdXJyZW50K3NlbGYubmF2LmN1cnJlbnRDb3VudCA8PSBzZWxmLm5hdi50b3RhbCkge1xyXG4gICAgICAgIHNlbGYubmF2Lm5leHQgPSBzZWxmLm5hdi5jdXJyZW50K3NlbGYubmF2LmN1cnJlbnRDb3VudDtcclxuICAgICAgICBzZWxmLmRvbS5idG5fbmV4dC5zaG93KCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgc2VsZi5uYXYubmV4dCA9IC0xO1xyXG4gICAgICAgIHNlbGYuZG9tLmJ0bl9uZXh0LmhpZGUoKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoc2VsZi5uYXYuY3VycmVudCA+IDEpIHtcclxuICAgICAgICBzZWxmLm5hdi5wcmV2ID0gc2VsZi5uYXYuY3VycmVudC1zZWxmLmNvbmZpZy5wZXJfcGFnZTtcclxuICAgICAgICBzZWxmLmRvbS5idG5fcHJldi5zaG93KCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgc2VsZi5uYXYucHJldiA9IC0xO1xyXG4gICAgICAgIHNlbGYuZG9tLmJ0bl9wcmV2LmhpZGUoKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIGEgR0VUIHJlcXVlc3RcclxuICAgICAqIEBwYXJhbSBxdWVyeVRleHQgOiAoc3RyaW5nKSB0aGUgcXVlcnkgdGV4dFxyXG4gICAgICogQHBhcmFtIHBhZ2UgOiAoaW50KSB0aGUgY3VycmVudCBwYWdlIChzdGFydCBmcm9tIDEpXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgOiAoZnVuY3Rpb24pXHJcbiAgICAgKi9cclxuICAgIHNlbGYucXVlcnkgPSBmdW5jdGlvbihxdWVyeVRleHQsIHN0YXJ0SW5kZXgsIGNhbGxiYWNrKSB7XHJcbiAgICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiBlbmRwb2ludCxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICBcIkFjY2VwdFwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgIFwiYXBpLWtleVwiOiBzZWxmLmNvbmZpZy5xdWVyeUtleVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgc2VhcmNoOiBxdWVyeVRleHQsXHJcbiAgICAgICAgICAkc2tpcDogc3RhcnRJbmRleC0xLFxyXG4gICAgICAgICAgJHRvcDogc2VsZi5jb25maWcucGVyX3BhZ2UsXHJcbiAgICAgICAgICAkY291bnQ6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgICBpZiAoc3RhdHVzID09PSAnc3VjY2VzcycgJiYgZGF0YS52YWx1ZSAmJiBkYXRhLnZhbHVlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBzZWxmLmJ1aWxkUmVzdWx0TGlzdChkYXRhLnZhbHVlKTtcclxuICAgICAgICAgICAgc2VsZi5kb20ubW9kYWxfcmVzdWx0cy5odG1sKHJlc3VsdHMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYub25RdWVyeUVycm9yKHF1ZXJ5VGV4dCwgc3RhdHVzKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHNlbGYuYnVpbGRNZXRhZGF0YShkYXRhLCBzdGFydEluZGV4KTtcclxuICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgfTtcclxuXHJcbn0pKGpRdWVyeSk7XHJcbnZhciBCYWlkdVNlYXJjaDtcclxuXHJcbihmdW5jdGlvbigkKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAvKipcclxuICAgKiBUT0RPXHJcbiAgICogU2VhcmNoIGJ5IEJhaWR1IFNlYXJjaCBBUElcclxuICAgKiBAcGFyYW0gb3B0aW9ucyA6IChvYmplY3QpXHJcbiAgICovXHJcbiAgQmFpZHVTZWFyY2ggPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICBTZWFyY2hTZXJ2aWNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgZW5kcG9pbnQgPSBcIlwiO1xyXG4gICAgc2VsZi5hZGRMb2dvKCdiYWlkdScpO1xyXG5cclxuICAgIHNlbGYubG9hZFNjcmlwdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICBzZWxmLmRvbS5mb3JtLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgIHZhciBzY3JpcHQgPSBcIjxzY3JpcHQgc3JjPSdodHRwOi8vemhhbm5laS5iYWlkdS5jb20vYXBpL2N1c3RvbXNlYXJjaC9hcGlhY2NlcHQ/c2lkPVwiICtzZWxmLmNvbmZpZy5hcGlJZCsgXCImdj0yLjAmY2FsbGJhY2s9Y3VzdG9tU2VhcmNoLmluaXRCYWlkdScgdHlwZT0ndGV4dC9qYXZhc2NyaXB0JyBjaGFyc2V0PSd1dGYtOCc+PC9zY3JpcHQ+XCI7XHJcbiAgICAgIHNlbGYuZG9tLmJvZHkuYXBwZW5kKHNjcmlwdCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHNlbGYuaW5pdEJhaWR1ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHNlbGYuY3NlID0gbmV3IEJDc2UuU2VhcmNoKHNlbGYuY29uZmlnLmFwaUlkKTtcclxuICAgICAgc2VsZi5kb20uZm9ybS5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgc2VhcmNoIHJlc3VsdHNcclxuICAgICAqIEBwYXJhbSBxdWVyeVRleHQge1N0cmluZ31cclxuICAgICAqIEBwYXJhbSBwYWdlIHtJbnRlZ2VyfVxyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIHtGdW5jdGlvbn1cclxuICAgICAqL1xyXG4gICAgc2VsZi5xdWVyeSA9IGZ1bmN0aW9uKHF1ZXJ5VGV4dCwgcGFnZSwgY2FsbGJhY2spIHtcclxuICAgICAgc2VsZi5jc2Uuc2V0UGFnZU51bShzZWxmLmNvbmZpZy5wZXJfcGFnZSk7XHJcbiAgICAgIHNlbGYuY3NlLmdldFJlc3VsdChxdWVyeVRleHQsIGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICBpZiAoY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIHBhZ2UpO1xyXG4gICAgfTtcclxuXHJcbiAgICBzZWxmLmxvYWRTY3JpcHQoKTtcclxuICAgIFxyXG4gIH07XHJcblxyXG59KShqUXVlcnkpO1xyXG52YXIgR29vZ2xlQ3VzdG9tU2VhcmNoID0gXCJcIjtcclxuXHJcbihmdW5jdGlvbigkKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG4gIFxyXG4gIC8qKlxyXG4gICAqIFNlYXJjaCBieSBHb29nbGUgQ3VzdG9tIFNlYXJjaCBFbmdpbmUgSlNPTiBBUElcclxuICAgKiBAcGFyYW0gb3B0aW9ucyA6IChvYmplY3QpXHJcbiAgICovXHJcbiAgR29vZ2xlQ3VzdG9tU2VhcmNoID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgU2VhcmNoU2VydmljZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGVuZHBvaW50ID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9jdXN0b21zZWFyY2gvdjFcIjtcclxuICAgIHNlbGYuYWRkTG9nbygnZ29vZ2xlJyk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZSByZXN1bHQgbGlzdCBodG1sXHJcbiAgICAgKiBAcGFyYW0gZGF0YSA6IChhcnJheSkgcmVzdWx0IGl0ZW1zXHJcbiAgICAgKi9cclxuICAgIHNlbGYuYnVpbGRSZXN1bHRMaXN0ID0gZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICB2YXIgaHRtbCA9IFwiXCI7XHJcbiAgICAgICQuZWFjaChkYXRhLCBmdW5jdGlvbihpbmRleCwgcm93KSB7XHJcbiAgICAgICAgdmFyIHVybCA9IHJvdy5saW5rO1xyXG4gICAgICAgIHZhciB0aXRsZSA9IHJvdy50aXRsZTtcclxuICAgICAgICB2YXIgZGlnZXN0ID0gKHJvdy5odG1sU25pcHBldCB8fCBcIlwiKS5yZXBsYWNlKCc8YnI+JywnJyk7XHJcbiAgICAgICAgaHRtbCArPSBzZWxmLmJ1aWxkUmVzdWx0KHVybCwgdGl0bGUsIGRpZ2VzdCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gaHRtbDtcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGUgbWV0YWRhdGEgYWZ0ZXIgYSBzdWNjZXNzZnVsIHF1ZXJ5XHJcbiAgICAgKiBAcGFyYW0gZGF0YSA6IChvYmplY3QpIHRoZSByYXcgZ29vZ2xlIGN1c3RvbSBzZWFyY2ggcmVzcG9uc2UgZGF0YVxyXG4gICAgICovXHJcbiAgICBzZWxmLmJ1aWxkTWV0YWRhdGEgPSBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLnF1ZXJpZXMgJiYgZGF0YS5xdWVyaWVzLnJlcXVlc3QgJiYgZGF0YS5xdWVyaWVzLnJlcXVlc3RbMF0udG90YWxSZXN1bHRzICE9PSAnMCcpIHtcclxuICAgICAgICBzZWxmLm5hdi5jdXJyZW50ID0gZGF0YS5xdWVyaWVzLnJlcXVlc3RbMF0uc3RhcnRJbmRleDtcclxuICAgICAgICBzZWxmLm5hdi5jdXJyZW50Q291bnQgPSBkYXRhLnF1ZXJpZXMucmVxdWVzdFswXS5jb3VudDtcclxuICAgICAgICBzZWxmLm5hdi50b3RhbCA9IHBhcnNlSW50KGRhdGEucXVlcmllcy5yZXF1ZXN0WzBdLnRvdGFsUmVzdWx0cyk7XHJcbiAgICAgICAgc2VsZi5kb20ubW9kYWxfbWV0YWRhdGEuY2hpbGRyZW4oJy50b3RhbCcpLmh0bWwoc2VsZi5uYXYudG90YWwpO1xyXG4gICAgICAgIHNlbGYuZG9tLm1vZGFsX21ldGFkYXRhLmNoaWxkcmVuKCcucmFuZ2UnKS5odG1sKHNlbGYubmF2LmN1cnJlbnQgKyBcIi1cIiArIChzZWxmLm5hdi5jdXJyZW50K3NlbGYubmF2LmN1cnJlbnRDb3VudC0xKSk7XHJcbiAgICAgICAgc2VsZi5kb20ubW9kYWxfbWV0YWRhdGEuc2hvdygpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHNlbGYuZG9tLm1vZGFsX21ldGFkYXRhLmhpZGUoKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZGF0YS5xdWVyaWVzICYmIGRhdGEucXVlcmllcy5uZXh0UGFnZSkge1xyXG4gICAgICAgIHNlbGYubmF2Lm5leHQgPSBkYXRhLnF1ZXJpZXMubmV4dFBhZ2VbMF0uc3RhcnRJbmRleDtcclxuICAgICAgICBzZWxmLmRvbS5idG5fbmV4dC5zaG93KCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgc2VsZi5uYXYubmV4dCA9IC0xO1xyXG4gICAgICAgIHNlbGYuZG9tLmJ0bl9uZXh0LmhpZGUoKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZGF0YS5xdWVyaWVzICYmIGRhdGEucXVlcmllcy5wcmV2aW91c1BhZ2UpIHtcclxuICAgICAgICBzZWxmLm5hdi5wcmV2ID0gZGF0YS5xdWVyaWVzLnByZXZpb3VzUGFnZVswXS5zdGFydEluZGV4O1xyXG4gICAgICAgIHNlbGYuZG9tLmJ0bl9wcmV2LnNob3coKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBzZWxmLm5hdi5wcmV2ID0gLTE7XHJcbiAgICAgICAgc2VsZi5kb20uYnRuX3ByZXYuaGlkZSgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFNlbmQgYSBHRVQgcmVxdWVzdFxyXG4gICAgICogQHBhcmFtIHF1ZXJ5VGV4dCA6IChzdHJpbmcpIHRoZSBxdWVyeSB0ZXh0XHJcbiAgICAgKiBAcGFyYW0gc3RhcnRJbmRleCA6IChpbnQpIHRoZSBpbmRleCBvZiBmaXJzdCBpdGVtIChzdGFydCBmcm9tIDEpXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgOiAoZnVuY3Rpb24pXHJcbiAgICAgKi9cclxuICAgIHNlbGYucXVlcnkgPSBmdW5jdGlvbihxdWVyeVRleHQsIHN0YXJ0SW5kZXgsIGNhbGxiYWNrKSB7XHJcbiAgICAgICQuZ2V0KGVuZHBvaW50LCB7XHJcbiAgICAgICAga2V5OiBzZWxmLmNvbmZpZy5hcGlLZXksXHJcbiAgICAgICAgY3g6IHNlbGYuY29uZmlnLmVuZ2luZUlkLFxyXG4gICAgICAgIHE6IHF1ZXJ5VGV4dCxcclxuICAgICAgICBzdGFydDogc3RhcnRJbmRleCxcclxuICAgICAgICBudW06IHNlbGYuY29uZmlnLnBlcl9wYWdlXHJcbiAgICAgIH0sIGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xyXG4gICAgICAgIGlmIChzdGF0dXMgPT09ICdzdWNjZXNzJyAmJiBkYXRhLml0ZW1zICYmIGRhdGEuaXRlbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgdmFyIHJlc3VsdHMgPSBzZWxmLmJ1aWxkUmVzdWx0TGlzdChkYXRhLml0ZW1zKTsgXHJcbiAgICAgICAgICBzZWxmLmRvbS5tb2RhbF9yZXN1bHRzLmh0bWwocmVzdWx0cyk7ICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIHNlbGYub25RdWVyeUVycm9yKHF1ZXJ5VGV4dCwgc3RhdHVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5idWlsZE1ldGFkYXRhKGRhdGEpO1xyXG4gICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gIH07XHJcbn0pKGpRdWVyeSk7XHJcbnZhciBIZXhvU2VhcmNoO1xyXG5cclxuKGZ1bmN0aW9uKCQpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgXHJcbiAgLyoqXHJcbiAgKiBTZWFyY2ggYnkgSGV4byBnZW5lcmF0b3IganNvbiBjb250ZW50XHJcbiAgKiBAcGFyYW0gb3B0aW9ucyA6IChvYmplY3QpXHJcbiAgKi9cclxuICBIZXhvU2VhcmNoID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgU2VhcmNoU2VydmljZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGVuZHBvaW50ID0gXCIvY29udGVudC5qc29uXCI7XHJcbiAgICBzZWxmLmNhY2hlID0gXCJcIjtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBTZWFyY2ggcXVlcnlUZXh0IGluIHRpdGxlIGFuZCBjb250ZW50IG9mIGEgcG9zdFxyXG4gICAgICogQ3JlZGl0IHRvOiBodHRwOi8vaGFoYWNrLmNvbS9jb2Rlcy9sb2NhbC1zZWFyY2gtZW5naW5lLWZvci1oZXhvL1xyXG4gICAgICogQHBhcmFtIHBvc3QgOiB0aGUgcG9zdCBvYmplY3RcclxuICAgICAqIEBwYXJhbSBxdWVyeVRleHQgOiB0aGUgc2VhcmNoIHF1ZXJ5XHJcbiAgICAgKi9cclxuICAgIHNlbGYuY29udGVudFNlYXJjaCA9IGZ1bmN0aW9uKHBvc3QsIHF1ZXJ5VGV4dCkge1xyXG4gICAgICB2YXIgcG9zdF90aXRsZSA9IHBvc3QudGl0bGUudHJpbSgpLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICBwb3N0X2NvbnRlbnQgPSBwb3N0LnRleHQudHJpbSgpLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICBrZXl3b3JkcyA9IHF1ZXJ5VGV4dC50cmltKCkudG9Mb3dlckNhc2UoKS5zcGxpdChcIiBcIiksXHJcbiAgICAgICAgICBmb3VuZE1hdGNoID0gZmFsc2UsXHJcbiAgICAgICAgICBpbmRleF90aXRsZSA9IC0xLFxyXG4gICAgICAgICAgaW5kZXhfY29udGVudCA9IC0xLFxyXG4gICAgICAgICAgZmlyc3Rfb2NjdXIgPSAtMTtcclxuICAgICAgaWYgKHBvc3RfdGl0bGUgIT09ICcnICYmIHBvc3RfY29udGVudCAhPT0gJycpIHtcclxuICAgICAgICAkLmVhY2goa2V5d29yZHMsIGZ1bmN0aW9uKGluZGV4LCB3b3JkKSB7XHJcbiAgICAgICAgICBpbmRleF90aXRsZSA9IHBvc3RfdGl0bGUuaW5kZXhPZih3b3JkKTtcclxuICAgICAgICAgIGluZGV4X2NvbnRlbnQgPSBwb3N0X2NvbnRlbnQuaW5kZXhPZih3b3JkKTtcclxuICAgICAgICAgIGlmIChpbmRleF90aXRsZSA8IDAgJiYgaW5kZXhfY29udGVudCA8IDApIHtcclxuICAgICAgICAgICAgZm91bmRNYXRjaCA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZvdW5kTWF0Y2ggPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXhfY29udGVudCA8IDApIHtcclxuICAgICAgICAgICAgICBpbmRleF9jb250ZW50ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgICBmaXJzdF9vY2N1ciA9IGluZGV4X2NvbnRlbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChmb3VuZE1hdGNoKSB7XHJcbiAgICAgICAgICAgIHBvc3RfY29udGVudCA9IHBvc3QudGV4dC50cmltKCk7XHJcbiAgICAgICAgICAgIHZhciBzdGFydCA9IDAsIGVuZCA9IDA7XHJcbiAgICAgICAgICAgIGlmIChmaXJzdF9vY2N1ciA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgc3RhcnQgPSBNYXRoLm1heChmaXJzdF9vY2N1ci0zMCwgMCk7XHJcbiAgICAgICAgICAgICAgZW5kID0gKHN0YXJ0ID09PSAwKSA/IE1hdGgubWluKDIwMCwgcG9zdF9jb250ZW50Lmxlbmd0aCkgOiBNYXRoLm1pbihmaXJzdF9vY2N1cisxNzAsIHBvc3RfY29udGVudC5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgIHZhciBtYXRjaF9jb250ZW50ID0gcG9zdF9jb250ZW50LnN1YnN0cmluZyhzdGFydCwgZW5kKTtcclxuICAgICAgICAgICAgICBrZXl3b3Jkcy5mb3JFYWNoKGZ1bmN0aW9uKGtleXdvcmQpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZWdTID0gbmV3IFJlZ0V4cChrZXl3b3JkLCBcImdpXCIpO1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hfY29udGVudCA9IG1hdGNoX2NvbnRlbnQucmVwbGFjZShyZWdTLCBcIjxiPlwiK2tleXdvcmQrXCI8L2I+XCIpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIHBvc3QuZGlnZXN0ID0gbWF0Y2hfY29udGVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICBlbmQgPSBNYXRoLm1pbigyMDAsIHBvc3RfY29udGVudC5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgIHBvc3QuZGlnZXN0ID0gcG9zdF9jb250ZW50LnRyaW0oKS5zdWJzdHJpbmcoMCwgZW5kKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmb3VuZE1hdGNoO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZSByZXN1bHQgbGlzdCBodG1sXHJcbiAgICAgKiBAcGFyYW0gZGF0YSA6IChhcnJheSkgcmVzdWx0IGl0ZW1zXHJcbiAgICAgKi9cclxuICAgIHNlbGYuYnVpbGRSZXN1bHRMaXN0ID0gZnVuY3Rpb24oZGF0YSwgcXVlcnlUZXh0KSB7XHJcbiAgICAgIHZhciByZXN1bHRzID0gW10sXHJcbiAgICAgICAgICBodG1sID0gXCJcIjtcclxuICAgICAgJC5lYWNoKGRhdGEsIGZ1bmN0aW9uKGluZGV4LCBwb3N0KSB7XHJcbiAgICAgICAgaWYgKHNlbGYuY29udGVudFNlYXJjaChwb3N0LCBxdWVyeVRleHQpKVxyXG4gICAgICAgICAgaHRtbCArPSBzZWxmLmJ1aWxkUmVzdWx0KHBvc3QucGVybWFsaW5rLCBwb3N0LnRpdGxlLCBwb3N0LmRpZ2VzdCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gaHRtbDtcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGUgbWV0YWRhdGEgYWZ0ZXIgYSBzdWNjZXNzZnVsIHF1ZXJ5XHJcbiAgICAgKiBAcGFyYW0gZGF0YSA6IChvYmplY3QpIHRoZSByYXcgZ29vZ2xlIGN1c3RvbSBzZWFyY2ggcmVzcG9uc2UgZGF0YVxyXG4gICAgICovXHJcbiAgICBzZWxmLmJ1aWxkTWV0YWRhdGEgPSBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIHNlbGYuZG9tLm1vZGFsX2Zvb3Rlci5oaWRlKCk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFNlbmQgYSBHRVQgcmVxdWVzdFxyXG4gICAgICogQHBhcmFtIHF1ZXJ5VGV4dCA6IChzdHJpbmcpIHRoZSBxdWVyeSB0ZXh0XHJcbiAgICAgKiBAcGFyYW0gc3RhcnRJbmRleCA6IChpbnQpIHRoZSBpbmRleCBvZiBmaXJzdCBpdGVtIChzdGFydCBmcm9tIDEpXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgOiAoZnVuY3Rpb24pXHJcbiAgICAgKi9cclxuICAgIHNlbGYucXVlcnkgPSBmdW5jdGlvbihxdWVyeVRleHQsIHN0YXJ0SW5kZXgsIGNhbGxiYWNrKSB7XHJcbiAgICAgIGlmICghc2VsZi5jYWNoZSkge1xyXG4gICAgICAgICQuZ2V0KGVuZHBvaW50LCB7XHJcbiAgICAgICAgICBrZXk6IHNlbGYuY29uZmlnLmFwaUtleSxcclxuICAgICAgICAgIGN4OiBzZWxmLmNvbmZpZy5lbmdpbmVJZCxcclxuICAgICAgICAgIHE6IHF1ZXJ5VGV4dCxcclxuICAgICAgICAgIHN0YXJ0OiBzdGFydEluZGV4LFxyXG4gICAgICAgICAgbnVtOiBzZWxmLmNvbmZpZy5wZXJfcGFnZVxyXG4gICAgICAgIH0sIGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xyXG4gICAgICAgICAgaWYgKHN0YXR1cyAhPT0gJ3N1Y2Nlc3MnIHx8IFxyXG4gICAgICAgICAgICAgICFkYXRhIHx8IFxyXG4gICAgICAgICAgICAgICghZGF0YS5wb3N0cyAmJiAhZGF0YS5wYWdlcykgfHwgXHJcbiAgICAgICAgICAgICAgKGRhdGEucG9zdHMubGVuZ3RoIDwgMSAmJiBkYXRhLnBhZ2VzLmxlbmd0aCA8IDEpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBzZWxmLm9uUXVlcnlFcnJvcihxdWVyeVRleHQsIHN0YXR1cyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5jYWNoZSA9IGRhdGE7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHRzID0gXCJcIjsgXHJcbiAgICAgICAgICAgIHJlc3VsdHMgKz0gc2VsZi5idWlsZFJlc3VsdExpc3QoZGF0YS5wYWdlcywgcXVlcnlUZXh0KTtcclxuICAgICAgICAgICAgcmVzdWx0cyArPSBzZWxmLmJ1aWxkUmVzdWx0TGlzdChkYXRhLnBvc3RzLCBxdWVyeVRleHQpO1xyXG4gICAgICAgICAgICBzZWxmLmRvbS5tb2RhbF9yZXN1bHRzLmh0bWwocmVzdWx0cyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBzZWxmLmJ1aWxkTWV0YWRhdGEoZGF0YSk7XHJcbiAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBcIlwiOyBcclxuICAgICAgICByZXN1bHRzICs9IHNlbGYuYnVpbGRSZXN1bHRMaXN0KHNlbGYuY2FjaGUucGFnZXMsIHF1ZXJ5VGV4dCk7XHJcbiAgICAgICAgcmVzdWx0cyArPSBzZWxmLmJ1aWxkUmVzdWx0TGlzdChzZWxmLmNhY2hlLnBvc3RzLCBxdWVyeVRleHQpO1xyXG4gICAgICAgIHNlbGYuZG9tLm1vZGFsX3Jlc3VsdHMuaHRtbChyZXN1bHRzKTtcclxuICAgICAgICBzZWxmLmJ1aWxkTWV0YWRhdGEoc2VsZi5jYWNoZSk7XHJcbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICBjYWxsYmFjayhzZWxmLmNhY2hlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICB9O1xyXG5cclxufSkoalF1ZXJ5KTsiLCJ2YXIgY3VzdG9tU2VhcmNoO1xyXG5cclxuKGZ1bmN0aW9uKCQpIHtcclxuXHRcclxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHRcclxuXHQvLyBvcHRpb25zXHJcblx0dmFyIFNFQVJDSF9TRVJWSUNFID0gJ2dvb2dsZSc7XHJcblx0dmFyIEVYQ0VSUFRfR0VORVJBVE9SX0VOQUJMRSA9IHRydWU7XHJcbiAgXHJcblx0dmFyIEdPT0dMRV9DVVNUT01fU0VBUkNIX0FQSV9LRVkgPSAnQUl6YVN5REdkNUpKSDdyUjNzZ1MtSlBZYmx3SjcyR09zcXppZ2hjJztcclxuXHR2YXIgR09PR0xFX0NVU1RPTV9TRUFSQ0hfRU5HSU5FX0lEID0gJzAxNzgyMTAyOTM3ODE2MzQ1ODUyNzptc3Frb2NoY3NqMCc7XHJcbiAgdmFyIEFMR09MSUFfQVBJX0tFWSA9ICcnO1xyXG4gIHZhciBBTEdPTElBX0FQUF9JRCA9ICcnO1xyXG4gIHZhciBBTEdPTElBX0lOREVYX05BTUUgPSAnJztcclxuICB2YXIgQVpVUkVfU0VSVklDRV9OQU1FID0gJyc7XHJcbiAgdmFyIEFaVVJFX0lOREVYX05BTUUgPSAnJztcclxuICB2YXIgQVpVUkVfUVVFUllfS0VZID0gJyc7XHJcbiAgdmFyIEJBSURVX0FQSV9LRVkgPSAnJztcclxuXHJcblx0dmFyIGV4Y2VycHRHZW5lcmF0b3IgPSB7fTtcclxuICBcclxuICB2YXIgc2Nyb2xsdG9FbGVtZW50ID0gZnVuY3Rpb24oZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyIHNlbGYgPSAkKHRoaXMpLFxyXG4gICAgICAgIGNvcnJlY3Rpb24gPSBlLmRhdGEgPyBlLmRhdGEuY29ycmVjdGlvbiA/IGUuZGF0YS5jb3JyZWN0aW9uIDogMCA6IDA7XHJcbiAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7J3Njcm9sbFRvcCc6ICQoc2VsZi5hdHRyKCdocmVmJykpLm9mZnNldCgpLnRvcCAtIGNvcnJlY3Rpb24gfSwgNDAwKTtcclxuICB9O1xyXG5cdFxyXG4gIHZhciBjbG9zZU1lbnUgPSBmdW5jdGlvbihlKSB7XHJcblx0ICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdtZW51LW9wZW4nKTtcclxuXHRcdCQoJy5zaXRlLW5hdi1zd2l0Y2gnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgfTtcclxuICBcclxuICB2YXIgdG9nZ2xlTWVudSA9IGZ1bmN0aW9uKGUpIHtcclxuXHQgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0ICAkKCdib2R5JykudG9nZ2xlQ2xhc3MoJ21lbnUtb3BlbicpO1xyXG4gICAgJCgnLnNpdGUtbmF2LXN3aXRjaCcpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxuICB9O1xyXG4gIFxyXG4gIHZhciBwaXhpdkFyY2hpdmVTdGF0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgdm9sID0gJChcIi5zaW5nbGUgLmNvbnRlbnQgdWxcIikubGVuZ3RoO1xyXG4gICAgdmFyIGFydGlzdENvdW50ID0gJChcIi5zaW5nbGUgLmNvbnRlbnQgdWwgbGlcIikubGVuZ3RoO1xyXG4gICAgJChcIiNwaXhpdi12b2xcIikudGV4dCh2b2wpO1xyXG4gICAgJChcIiNwaXhpdi1hcnRpc3QtY291bnRcIikudGV4dChhcnRpc3RDb3VudCk7XHJcbiAgfTtcclxuICBcclxuICB2YXIgRXhjZXJwdEdlbmVyYXRvciA9IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmluaXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgJChzZWxlY3RvcikuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgcG9zdCA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHBlcm1hbGluayA9IHBvc3QuZmluZCgnaDIudGl0bGUgPiBhJykuYXR0cignaHJlZicpO1xyXG4gICAgICAgIHZhciBjb250ZW50VGFnID0gcG9zdC5maW5kKCdzZWN0aW9uLmNvbnRlbnQnKTtcclxuICAgICAgICB2YXIgY29udGVudExvYWRpbmdUYWcgPSBwb3N0LmZpbmQoJy5jb250ZW50LWxvYWRpbmcnKTtcclxuICAgICAgICB2YXIgY29udGVudCA9IGNvbnRlbnRUYWcuaHRtbCgpO1xyXG4gICAgICAgIHZhciByZSA9IC88IS0tICptb3JlICotLT4oLnxcXG4pKi9pO1xyXG4gICAgICAgIHZhciBleGNlcnB0ID0gY29udGVudC5yZXBsYWNlKHJlLFwiXCIpO1xyXG4gICAgICAgIGlmIChjb250ZW50Lmxlbmd0aCAhPT0gZXhjZXJwdC5sZW5ndGgpIHtcclxuICAgICAgICAgIGV4Y2VycHQgKz0gXCI8YSBocmVmPSdcIiArcGVybWFsaW5rKyBcIicgY2xhc3M9J3JlYWRtb3JlJz5SZWFkIE1vcmUuLi48L2E+XCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnRlbnRUYWcuaHRtbChleGNlcnB0KTtcclxuICAgICAgICBjb250ZW50VGFnLmFkZENsYXNzKCdleGNlcnB0LXJlYWR5Jyk7XHJcbiAgICAgICAgY29udGVudExvYWRpbmdUYWcuYWRkQ2xhc3MoJ2V4Y2VycHQtcmVhZHknKTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgc2VsZi5pbml0KCk7XHJcbiAgfTtcclxuXHRcclxuXHQkKGZ1bmN0aW9uKCkge1xyXG5cdFx0JCgnI2Zvb3RlciwgI21haW4nKS5hZGRDbGFzcygnbG9hZGVkJyk7XHJcblx0XHQkKCcuc2l0ZS1uYXYtc3dpdGNoJykub24oJ2NsaWNrJywgdG9nZ2xlTWVudSk7XHJcblx0XHQkKGRvY3VtZW50KS5vbignY2xpY2snLCBjbG9zZU1lbnUpO1xyXG5cdFx0JCgnLnNpdGUtbWVudScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdH0pO1xyXG5cdFx0JCgnLndpbmRvdy1uYXYsIC5nby1jb21tZW50Jykub24oJ2NsaWNrJywgc2Nyb2xsdG9FbGVtZW50KTtcclxuXHJcblx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdCAgICAkKCcjbG9hZGluZy1iYXItd3JhcHBlcicpLmZhZGVPdXQoNTAwKTtcclxuXHQgIH0sIDMwMCk7XHJcblx0ICBcclxuXHQgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ3RhZy1waXhpdicpICYmICQoXCJib2R5XCIpLmhhc0NsYXNzKCdwYWdlJykpIHtcclxuICBcdCAgcGl4aXZBcmNoaXZlU3RhdCgpO1xyXG5cdCAgfVxyXG5cdCAgaWYgKEVYQ0VSUFRfR0VORVJBVE9SX0VOQUJMRSkge1xyXG4gICAgICBleGNlcnB0R2VuZXJhdG9yID0gbmV3IEV4Y2VycHRHZW5lcmF0b3IoJy5wb3N0LWxpc3QgLnBvc3QnKTtcclxuICAgIH1cclxuXHQgIGlmIChTRUFSQ0hfU0VSVklDRSA9PT0gJ2dvb2dsZScpIHtcclxuICBcdCAgY3VzdG9tU2VhcmNoID0gbmV3IEdvb2dsZUN1c3RvbVNlYXJjaCh7XHJcbiAgICBcdCAgYXBpS2V5OiBHT09HTEVfQ1VTVE9NX1NFQVJDSF9BUElfS0VZLFxyXG4gICAgXHQgIGVuZ2luZUlkOiBHT09HTEVfQ1VTVE9NX1NFQVJDSF9FTkdJTkVfSURcclxuICBcdCAgfSk7XHJcblx0ICB9XHJcbiAgICBlbHNlIGlmIChTRUFSQ0hfU0VSVklDRSA9PT0gJ2FsZ29saWEnKSB7XHJcbiAgICAgIGN1c3RvbVNlYXJjaCA9IG5ldyBBbGdvbGlhU2VhcmNoKHtcclxuICAgICAgICBhcGlLZXk6IEFMR09MSUFfQVBJX0tFWSxcclxuICAgICAgICBhcHBJZDogQUxHT0xJQV9BUFBfSUQsXHJcbiAgICAgICAgaW5kZXhOYW1lOiBBTEdPTElBX0lOREVYX05BTUVcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChTRUFSQ0hfU0VSVklDRSA9PT0gJ2hleG8nKSB7XHJcbiAgICAgIGN1c3RvbVNlYXJjaCA9IG5ldyBIZXhvU2VhcmNoKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChTRUFSQ0hfU0VSVklDRSA9PT0gJ2F6dXJlJykge1xyXG4gICAgICBjdXN0b21TZWFyY2ggPSBuZXcgQXp1cmVTZWFyY2goe1xyXG4gICAgICAgIHNlcnZpY2VOYW1lOiBBWlVSRV9TRVJWSUNFX05BTUUsXHJcbiAgICAgICAgaW5kZXhOYW1lOiBBWlVSRV9JTkRFWF9OQU1FLFxyXG4gICAgICAgIHF1ZXJ5S2V5OiBBWlVSRV9RVUVSWV9LRVlcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChTRUFSQ0hfU0VSVklDRSA9PT0gJ2JhaWR1Jykge1xyXG4gICAgICBjdXN0b21TZWFyY2ggPSBuZXcgQmFpZHVTZWFyY2goe1xyXG4gICAgICAgIGFwaUlkOiBCQUlEVV9BUElfS0VZXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cdH0pO1xyXG5cdFx0XHJcbn0pKGpRdWVyeSk7Il19
