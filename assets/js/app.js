var SearchService="";!function(e){SearchService=function(t){var o=this;o.config=e.extend({per_page:10,selectors:{body:"body",form:".u-search-form",input:".u-search-input",container:"#u-search",modal:"#u-search .modal",modal_body:"#u-search .modal-body",modal_footer:"#u-search .modal-footer",modal_overlay:"#u-search .modal-overlay",modal_results:"#u-search .modal-results",modal_metadata:"#u-search .modal-metadata",modal_error:"#u-search .modal-error",modal_loading_bar:"#u-search .modal-loading-bar",modal_ajax_content:"#u-search .modal-ajax-content",modal_logo:"#u-search .modal-footer .logo",btn_close:"#u-search .btn-close",btn_next:"#u-search .btn-next",btn_prev:"#u-search .btn-prev"},brands:{google:{logo:"google.svg",url:"https://cse.google.com"},algolia:{logo:"algolia.svg",url:"https://www.algolia.com"},hexo:{logo:"",url:""},azure:{logo:"azure.svg",url:"https://azure.microsoft.com/en-us/services/search/"},baidu:{logo:"baidu.svg",url:"http://zn.baidu.com/cse/home/index"}},imagePath:"/img/"},t),o.dom={},o.percentLoaded=0,o.open=!1,o.queryText="",o.nav={next:-1,prev:-1,total:0,current:1},o.parseSelectors=function(){for(var a in o.config.selectors)o.dom[a]=e(o.config.selectors[a])},o.beforeQuery=function(){o.open||(o.dom.container.fadeIn(),o.dom.body.addClass("modal-active")),o.dom.input.each(function(a,t){e(t).val(o.queryText)}),document.activeElement.blur(),o.dom.modal_error.hide(),o.dom.modal_ajax_content.removeClass("loaded"),o.startLoading()},o.afterQuery=function(){o.dom.modal_body.scrollTop(0),o.dom.modal_ajax_content.addClass("loaded"),o.stopLoading()},o.search=function(e,a){o.beforeQuery(),o.search instanceof Function?o.query(o.queryText,e,function(){o.afterQuery()}):(console.log("query() does not exist."),o.onQueryError(o.queryText,""),o.afterQuery())},o.onQueryError=function(e,a){var t="";t="success"===a?'No result found for "'+e+'".':"timeout"===a?"Unfortunate timeout.":"Mysterious failure.",o.dom.modal_results.html(""),o.dom.modal_error.html(t),o.dom.modal_error.show()},o.nextPage=function(){o.nav.next!==-1&&o.search(o.nav.next)},o.prevPage=function(){o.nav.prev!==-1&&o.search(o.nav.prev)},o.buildResult=function(e,a,t){var o="";return o="<li>",o+="<a class='result' href='"+e+"'>",o+="<span class='title'>"+a+"</span>",o+="<span class='digest'>"+t+"</span>",o+="<span class='icon icon-chevron-thin-right'></span>",o+="</a>",o+="</li>"},o.close=function(){o.open=!1,o.dom.container.fadeOut(),o.dom.body.removeClass("modal-active")},o.onSubmit=function(a){a.preventDefault(),o.queryText=e(this).find(".u-search-input").val(),o.queryText&&o.search(1)},o.startLoading=function(){o.dom.modal_loading_bar.show(),o.loadingTimer=setInterval(function(){o.percentLoaded=Math.min(o.percentLoaded+5,95),o.dom.modal_loading_bar.css("width",o.percentLoaded+"%")},100)},o.stopLoading=function(){clearInterval(o.loadingTimer),o.dom.modal_loading_bar.css("width","100%"),o.dom.modal_loading_bar.fadeOut(),setTimeout(function(){o.percentLoaded=0,o.dom.modal_loading_bar.css("width","0%")},300)},o.addLogo=function(e){var a="";o.config.brands[e]&&o.config.brands[e].logo&&(a+="<a href='"+o.config.brands[e].url+"' class='"+e+"'>",a+='<img src="'+o.config.imagePath+o.config.brands[e].logo+'" />',a+="</a>",o.dom.modal_logo.html(a))},o.destroy=function(){o.dom.form.each(function(a,t){e(t).off("submit")}),o.dom.modal_overlay.off("click"),o.dom.btn_close.off("click"),o.dom.btn_next.off("click"),o.dom.btn_prev.off("click"),o.dom.container.remove()},o.init=function(){e("body").append(a),o.parseSelectors(),o.dom.modal_footer.show(),o.dom.form.each(function(a,t){e(t).on("submit",o.onSubmit)}),o.dom.modal_overlay.on("click",o.close),o.dom.btn_close.on("click",o.close),o.dom.btn_next.on("click",o.nextPage),o.dom.btn_prev.on("click",o.prevPage)},o.init()};var a='<div id="u-search"><div class="modal"> <header class="modal-header" class="clearfix"><form id="u-search-modal-form" class="u-search-form" name="uSearchModalForm"> <input type="text" id="u-search-modal-input" class="u-search-input" /> <button type="submit" id="u-search-modal-btn-submit" class="u-search-btn-submit"> <span class="icon icon-search"></span> </button></form> <a class="btn-close"> <span class="icon icon-close"></span> </a><div class="modal-loading"><div class="modal-loading-bar"></div></div> </header> <main class="modal-body"><ul class="modal-results modal-ajax-content"></ul> </main> <footer class="modal-footer clearfix"><div class="modal-metadata modal-ajax-content"> <strong class="range"></strong> of <strong class="total"></strong></div><div class="modal-error"></div> <div class="logo"></div> <a class="nav btn-next modal-ajax-content"> <span class="text">NEXT</span> <span class="icon icon-chevron-right"></span> </a> <a class="nav btn-prev modal-ajax-content"> <span class="icon icon-chevron-left"></span> <span class="text">PREV</span> </a> </footer></div><div class="modal-overlay"></div></div>'}(jQuery);var AlgoliaSearch;!function(e){"use strict";AlgoliaSearch=function(a){SearchService.apply(this,arguments);var t=this,o="https://"+t.config.appId+"-dsn.algolia.net/1/indexes/"+t.config.indexName;return t.addLogo("algolia"),t.buildResultList=function(a){var o="";return e.each(a,function(e,a){var n=a.permalink||a.path||"";!a.permalink&&a.path&&(n="/"+n);var r=a.title,i=a._highlightResult.excerptStrip.value||"";o+=t.buildResult(n,r,i)}),o},t.buildMetadata=function(e){t.nav.current=e.page*e.hitsPerPage+1,t.nav.currentCount=e.hits.length,t.nav.total=parseInt(e.nbHits),t.dom.modal_metadata.children(".total").html(t.nav.total),t.dom.modal_metadata.children(".range").html(t.nav.current+"-"+(t.nav.current+t.nav.currentCount-1)),t.nav.total>0?t.dom.modal_metadata.show():t.dom.modal_metadata.hide(),e.page<e.nbPages-1?(t.nav.next=e.page+1+1,t.dom.btn_next.show()):(t.nav.next=-1,t.dom.btn_next.hide()),e.page>0?(t.nav.prev=e.page+1-1,t.dom.btn_prev.show()):(t.nav.prev=-1,t.dom.btn_prev.hide())},t.query=function(a,n,r){e.get(o,{query:a,page:n-1,hitsPerPage:t.config.per_page,"x-algolia-application-id":t.config.appId,"x-algolia-api-key":t.config.apiKey},function(e,o){if("success"===o&&e.hits&&e.hits.length>0){var n=t.buildResultList(e.hits);t.dom.modal_results.html(n)}else t.onQueryError(a,o);t.buildMetadata(e),r&&r(e)})},t}}(jQuery);var AzureSearch;!function(e){"use strict";AzureSearch=function(a){SearchService.apply(this,arguments);var t=this,o="https://"+t.config.serviceName+".search.windows.net/indexes/"+t.config.indexName+"/docs?api-version=2015-02-28";return t.nav.current=1,t.addLogo("azure"),t.buildResultList=function(a){var o="";return e.each(a,function(e,a){var n=a.permalink||a.path||"";!a.permalink&&a.path&&(n="/"+n);var r=a.title,i=a.excerptStrip||"";o+=t.buildResult(n,r,i)}),o},t.buildMetadata=function(e,a){t.nav.current=a,t.nav.currentCount=e.value.length,t.nav.total=parseInt(e["@odata.count"]),t.dom.modal_metadata.children(".total").html(t.nav.total),t.dom.modal_metadata.children(".range").html(t.nav.current+"-"+(t.nav.current+t.nav.currentCount-1)),t.nav.total>0?t.dom.modal_metadata.show():t.dom.modal_metadata.hide(),t.nav.current+t.nav.currentCount<=t.nav.total?(t.nav.next=t.nav.current+t.nav.currentCount,t.dom.btn_next.show()):(t.nav.next=-1,t.dom.btn_next.hide()),t.nav.current>1?(t.nav.prev=t.nav.current-t.config.per_page,t.dom.btn_prev.show()):(t.nav.prev=-1,t.dom.btn_prev.hide())},t.query=function(a,n,r){e.ajax({url:o,headers:{Accept:"application/json","api-key":t.config.queryKey},data:{search:a,$skip:n-1,$top:t.config.per_page,$count:!0},type:"GET",success:function(e,o){if("success"===o&&e.value&&e.value.length>0){var i=t.buildResultList(e.value);t.dom.modal_results.html(i)}else t.onQueryError(a,o);t.buildMetadata(e,n),r&&r(e)}})},t}}(jQuery);var BaiduSearch;!function(e){"use strict";BaiduSearch=function(a){SearchService.apply(this,arguments);var t=this;return t.addLogo("baidu"),t.buildResultList=function(a,o){var n="";return e.each(a,function(e,a){t.contentSearch(a,o)&&(n+=t.buildResult(a.linkUrl,a.title,a.abstract))}),n},t.buildMetadata=function(e){},t.loadScript=function(){t.dom.input.each(function(a,t){e(t).attr("disabled",!0)});var a="<script src='http://zhannei.baidu.com/api/customsearch/apiaccept?sid="+t.config.apiId+"&v=2.0&callback=customSearch.initBaidu' type='text/javascript' charset='utf-8'></script>";t.dom.body.append(a)},t.initBaidu=function(){t.cse=new BCse.Search(t.config.apiId),t.dom.input.each(function(a,t){e(t).attr("disabled",!1)})},t.query=function(e,a,o){t.cse.getResult(e,function(a){console.log("Searching: "+e),console.log(a),t.cse.getError(function(e){console.log(e)}),a.length>0?(t.buildResultList(a,e),t.cse.getSearchInfo(e,function(e){console.log(e),t.buildMetadata(e)})):(t.nav.total=0,t.nav.next=-1,t.nav.prev=-1,t.dom.modal_metadata.hide(),t.dom.btn_next.hide(),t.dom.btn_prev.hide(),t.onQueryError(e,"success")),o instanceof Function&&o()})},t.loadScript(),t}}(jQuery);var GoogleCustomSearch="";!function(e){"use strict";GoogleCustomSearch=function(a){SearchService.apply(this,arguments);var t=this,o="https://www.googleapis.com/customsearch/v1";return t.addLogo("google"),t.buildResultList=function(a){var o="";return e.each(a,function(e,a){var n=a.link,r=a.title,i=(a.htmlSnippet||"").replace("<br>","");o+=t.buildResult(n,r,i)}),o},t.buildMetadata=function(e){e.queries&&e.queries.request&&"0"!==e.queries.request[0].totalResults?(t.nav.current=e.queries.request[0].startIndex,t.nav.currentCount=e.queries.request[0].count,t.nav.total=parseInt(e.queries.request[0].totalResults),t.dom.modal_metadata.children(".total").html(t.nav.total),t.dom.modal_metadata.children(".range").html(t.nav.current+"-"+(t.nav.current+t.nav.currentCount-1)),t.dom.modal_metadata.show()):t.dom.modal_metadata.hide(),e.queries&&e.queries.nextPage?(t.nav.next=e.queries.nextPage[0].startIndex,t.dom.btn_next.show()):(t.nav.next=-1,t.dom.btn_next.hide()),e.queries&&e.queries.previousPage?(t.nav.prev=e.queries.previousPage[0].startIndex,t.dom.btn_prev.show()):(t.nav.prev=-1,t.dom.btn_prev.hide())},t.query=function(a,n,r){e.get(o,{key:t.config.apiKey,cx:t.config.engineId,q:a,start:n,num:t.config.per_page},function(e,o){if("success"===o&&e.items&&e.items.length>0){var n=t.buildResultList(e.items);t.dom.modal_results.html(n)}else t.onQueryError(a,o);t.buildMetadata(e),r&&r()})},t}}(jQuery);var HexoSearch;!function(e){"use strict";HexoSearch=function(a){SearchService.apply(this,arguments);var t=this;return t.config.endpoint=(a||{}).endpoint||"/content.json",t.cache="",t.contentSearch=function(a,t){var o=a.title.trim().toLowerCase(),n=a.text.trim().toLowerCase(),r=t.trim().toLowerCase().split(" "),i=!1,s=-1,c=-1,l=-1;return""!==o&&""!==n&&e.each(r,function(e,t){if(s=o.indexOf(t),c=n.indexOf(t),s<0&&c<0?i=!1:(i=!0,c<0&&(c=0),0===e&&(l=c)),i){n=a.text.trim();var d=0,u=0;if(l>=0){d=Math.max(l-30,0),u=0===d?Math.min(200,n.length):Math.min(l+170,n.length);var m=n.substring(d,u);r.forEach(function(e){var a=new RegExp(e,"gi");m=m.replace(a,"<b>"+e+"</b>")}),a.digest=m}else u=Math.min(200,n.length),a.digest=n.trim().substring(0,u)}}),i},t.buildResultList=function(a,o){var n="";return e.each(a,function(e,a){t.contentSearch(a,o)&&(n+=t.buildResult(a.permalink,a.title,a.digest))}),n},t.buildMetadata=function(e){t.dom.modal_footer.hide()},t.query=function(a,o,n){if(t.cache){var r="";r+=t.buildResultList(t.cache.pages,a),r+=t.buildResultList(t.cache.posts,a),t.dom.modal_results.html(r),t.buildMetadata(t.cache),n&&n(t.cache)}else e.get(t.config.endpoint,{key:t.config.apiKey,cx:t.config.engineId,q:a,start:o,num:t.config.per_page},function(e,o){if("success"!==o||!e||!e.posts&&!e.pages||e.posts.length<1&&e.pages.length<1)t.onQueryError(a,o);else{t.cache=e;var r="";r+=t.buildResultList(e.pages,a),r+=t.buildResultList(e.posts,a),t.dom.modal_results.html(r)}t.buildMetadata(e),n&&n(e)})},t}}(jQuery);var customSearch;!function(e){"use strict";var a="google",t=!0,o="AIzaSyDGd5JJH7rR3sgS-JPYblwJ72GOsqzighc",n="017821029378163458527:msqkochcsj0",r="",i="",s="",c="",l="",d="",u="",m={},h=function(a){a.preventDefault();var t=e(this),o=a.data&&a.data.correction?a.data.correction:0;e("html, body").animate({scrollTop:e(t.attr("href")).offset().top-o},400)},p=function(a){a.stopPropagation(),e("body").removeClass("menu-open"),e(".site-nav-switch").removeClass("active")},g=function(a){a.stopPropagation(),e("body").toggleClass("menu-open"),e(".site-nav-switch").toggleClass("active")},v=function(){var a=e(".single .content ul").length,t=e(".single .content ul li").length;e("#pixiv-vol").text(a),e("#pixiv-artist-count").text(t)},f=function(a){var t=this;t.init=function(){e(a).each(function(){var a=e(this),t=a.find("h2.title > a").attr("href"),o=a.find("section.content"),n=a.find(".content-loading"),r=o.html(),i=/<!-- *more *-->(.|\n)*/i,s=r.replace(i,"");r.length!==s.length&&(s+="<a href='"+t+"' class='readmore'>Read More...</a>"),o.html(s),o.addClass("excerpt-ready"),n.addClass("excerpt-ready")})},t.init()};e(function(){e("#footer, #main").addClass("loaded"),e(".site-nav-switch").on("click",g),e(document).on("click",p),e(".site-menu").on("click",function(e){e.stopPropagation()}),e(".window-nav, .go-comment").on("click",h),setTimeout(function(){e("#loading-bar-wrapper").fadeOut(500)},300),e("body").hasClass("tag-pixiv")&&e("body").hasClass("page")&&v(),t&&(m=new f(".post-list .post")),"google"===a?customSearch=new GoogleCustomSearch({apiKey:o,engineId:n,imagePath:"/assets/img/"}):"algolia"===a?customSearch=new AlgoliaSearch({apiKey:r,appId:i,indexName:s,imagePath:"/assets/img/"}):"hexo"===a?customSearch=new HexoSearch({imagePath:"/assets/img/"}):"azure"===a?customSearch=new AzureSearch({serviceName:c,indexName:l,queryKey:d,imagePath:"/assets/img/"}):"baidu"===a&&(customSearch=new BaiduSearch({apiId:u,imagePath:"/assets/img/"}))})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlYXJjaC5qcyJdLCJuYW1lcyI6WyJTZWFyY2hTZXJ2aWNlIiwiJCIsIm9wdGlvbnMiLCJzZWxmIiwidGhpcyIsImNvbmZpZyIsImV4dGVuZCIsInBlcl9wYWdlIiwic2VsZWN0b3JzIiwiYm9keSIsImZvcm0iLCJpbnB1dCIsImNvbnRhaW5lciIsIm1vZGFsIiwibW9kYWxfYm9keSIsIm1vZGFsX2Zvb3RlciIsIm1vZGFsX292ZXJsYXkiLCJtb2RhbF9yZXN1bHRzIiwibW9kYWxfbWV0YWRhdGEiLCJtb2RhbF9lcnJvciIsIm1vZGFsX2xvYWRpbmdfYmFyIiwibW9kYWxfYWpheF9jb250ZW50IiwibW9kYWxfbG9nbyIsImJ0bl9jbG9zZSIsImJ0bl9uZXh0IiwiYnRuX3ByZXYiLCJicmFuZHMiLCJnb29nbGUiLCJsb2dvIiwidXJsIiwiYWxnb2xpYSIsImhleG8iLCJhenVyZSIsImJhaWR1IiwiaW1hZ2VQYXRoIiwiZG9tIiwicGVyY2VudExvYWRlZCIsIm9wZW4iLCJxdWVyeVRleHQiLCJuYXYiLCJuZXh0IiwicHJldiIsInRvdGFsIiwiY3VycmVudCIsInBhcnNlU2VsZWN0b3JzIiwia2V5IiwiYmVmb3JlUXVlcnkiLCJmYWRlSW4iLCJhZGRDbGFzcyIsImVhY2giLCJpbmRleCIsImVsZW0iLCJ2YWwiLCJkb2N1bWVudCIsImFjdGl2ZUVsZW1lbnQiLCJibHVyIiwiaGlkZSIsInJlbW92ZUNsYXNzIiwic3RhcnRMb2FkaW5nIiwiYWZ0ZXJRdWVyeSIsInNjcm9sbFRvcCIsInN0b3BMb2FkaW5nIiwic2VhcmNoIiwic3RhcnRJbmRleCIsImNhbGxiYWNrIiwiRnVuY3Rpb24iLCJxdWVyeSIsImNvbnNvbGUiLCJsb2ciLCJvblF1ZXJ5RXJyb3IiLCJzdGF0dXMiLCJlcnJNc2ciLCJodG1sIiwic2hvdyIsIm5leHRQYWdlIiwicHJldlBhZ2UiLCJidWlsZFJlc3VsdCIsInRpdGxlIiwiZGlnZXN0IiwiY2xvc2UiLCJmYWRlT3V0Iiwib25TdWJtaXQiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiZmluZCIsImxvYWRpbmdUaW1lciIsInNldEludGVydmFsIiwiTWF0aCIsIm1pbiIsImNzcyIsImNsZWFySW50ZXJ2YWwiLCJzZXRUaW1lb3V0IiwiYWRkTG9nbyIsInNlcnZpY2UiLCJkZXN0cm95Iiwib2ZmIiwicmVtb3ZlIiwiaW5pdCIsImFwcGVuZCIsInRlbXBsYXRlIiwib24iLCJqUXVlcnkiLCJBbGdvbGlhU2VhcmNoIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJlbmRwb2ludCIsImFwcElkIiwiaW5kZXhOYW1lIiwiYnVpbGRSZXN1bHRMaXN0IiwiZGF0YSIsInJvdyIsInBlcm1hbGluayIsInBhdGgiLCJfaGlnaGxpZ2h0UmVzdWx0IiwiZXhjZXJwdFN0cmlwIiwidmFsdWUiLCJidWlsZE1ldGFkYXRhIiwicGFnZSIsImhpdHNQZXJQYWdlIiwiY3VycmVudENvdW50IiwiaGl0cyIsImxlbmd0aCIsInBhcnNlSW50IiwibmJIaXRzIiwiY2hpbGRyZW4iLCJuYlBhZ2VzIiwiZ2V0IiwieC1hbGdvbGlhLWFwcGxpY2F0aW9uLWlkIiwieC1hbGdvbGlhLWFwaS1rZXkiLCJhcGlLZXkiLCJyZXN1bHRzIiwiQXp1cmVTZWFyY2giLCJzZXJ2aWNlTmFtZSIsImFqYXgiLCJoZWFkZXJzIiwiQWNjZXB0IiwiYXBpLWtleSIsInF1ZXJ5S2V5IiwiJHNraXAiLCIkdG9wIiwiJGNvdW50IiwidHlwZSIsInN1Y2Nlc3MiLCJCYWlkdVNlYXJjaCIsInBvc3QiLCJjb250ZW50U2VhcmNoIiwibGlua1VybCIsImFic3RyYWN0IiwibG9hZFNjcmlwdCIsImF0dHIiLCJzY3JpcHQiLCJhcGlJZCIsImluaXRCYWlkdSIsImNzZSIsIkJDc2UiLCJTZWFyY2giLCJnZXRSZXN1bHQiLCJnZXRFcnJvciIsImdldFNlYXJjaEluZm8iLCJHb29nbGVDdXN0b21TZWFyY2giLCJsaW5rIiwiaHRtbFNuaXBwZXQiLCJyZXBsYWNlIiwicXVlcmllcyIsInJlcXVlc3QiLCJ0b3RhbFJlc3VsdHMiLCJjb3VudCIsInByZXZpb3VzUGFnZSIsImN4IiwiZW5naW5lSWQiLCJxIiwic3RhcnQiLCJudW0iLCJpdGVtcyIsIkhleG9TZWFyY2giLCJjYWNoZSIsInBvc3RfdGl0bGUiLCJ0cmltIiwidG9Mb3dlckNhc2UiLCJwb3N0X2NvbnRlbnQiLCJ0ZXh0Iiwia2V5d29yZHMiLCJzcGxpdCIsImZvdW5kTWF0Y2giLCJpbmRleF90aXRsZSIsImluZGV4X2NvbnRlbnQiLCJmaXJzdF9vY2N1ciIsIndvcmQiLCJpbmRleE9mIiwiZW5kIiwibWF4IiwibWF0Y2hfY29udGVudCIsInN1YnN0cmluZyIsImZvckVhY2giLCJrZXl3b3JkIiwicmVnUyIsIlJlZ0V4cCIsInBhZ2VzIiwicG9zdHMiLCJjdXN0b21TZWFyY2giLCJTRUFSQ0hfU0VSVklDRSIsIkVYQ0VSUFRfR0VORVJBVE9SX0VOQUJMRSIsIkdPT0dMRV9DVVNUT01fU0VBUkNIX0FQSV9LRVkiLCJHT09HTEVfQ1VTVE9NX1NFQVJDSF9FTkdJTkVfSUQiLCJBTEdPTElBX0FQSV9LRVkiLCJBTEdPTElBX0FQUF9JRCIsIkFMR09MSUFfSU5ERVhfTkFNRSIsIkFaVVJFX1NFUlZJQ0VfTkFNRSIsIkFaVVJFX0lOREVYX05BTUUiLCJBWlVSRV9RVUVSWV9LRVkiLCJCQUlEVV9BUElfS0VZIiwiZXhjZXJwdEdlbmVyYXRvciIsInNjcm9sbHRvRWxlbWVudCIsImUiLCJjb3JyZWN0aW9uIiwiYW5pbWF0ZSIsIm9mZnNldCIsInRvcCIsImNsb3NlTWVudSIsInN0b3BQcm9wYWdhdGlvbiIsInRvZ2dsZU1lbnUiLCJ0b2dnbGVDbGFzcyIsInBpeGl2QXJjaGl2ZVN0YXQiLCJ2b2wiLCJhcnRpc3RDb3VudCIsIkV4Y2VycHRHZW5lcmF0b3IiLCJzZWxlY3RvciIsImNvbnRlbnRUYWciLCJjb250ZW50TG9hZGluZ1RhZyIsImNvbnRlbnQiLCJyZSIsImV4Y2VycHQiLCJoYXNDbGFzcyJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsZUFBQSxJQUVBLFNBQUFDLEdBS0FELGNBQUEsU0FBQUUsR0FDQSxHQUFBQyxHQUFBQyxJQUVBRCxHQUFBRSxPQUFBSixFQUFBSyxRQUNBQyxTQUFBLEdBQ0FDLFdBQ0FDLEtBQUEsT0FDQUMsS0FBQSxpQkFDQUMsTUFBQSxrQkFDQUMsVUFBQSxZQUNBQyxNQUFBLG1CQUNBQyxXQUFBLHdCQUNBQyxhQUFBLDBCQUNBQyxjQUFBLDJCQUNBQyxjQUFBLDJCQUNBQyxlQUFBLDRCQUNBQyxZQUFBLHlCQUNBQyxrQkFBQSwrQkFDQUMsbUJBQUEsZ0NBQ0FDLFdBQUEsZ0NBQ0FDLFVBQUEsdUJBQ0FDLFNBQUEsc0JBQ0FDLFNBQUEsdUJBRUFDLFFBQ0FDLFFBQUFDLEtBQUEsYUFBQUMsSUFBQSwwQkFDQUMsU0FBQUYsS0FBQSxjQUFBQyxJQUFBLDJCQUNBRSxNQUFBSCxLQUFBLEdBQUFDLElBQUEsSUFDQUcsT0FBQUosS0FBQSxZQUFBQyxJQUFBLHNEQUNBSSxPQUFBTCxLQUFBLFlBQUFDLElBQUEsdUNBRUFLLFVBQUEsU0FDQWhDLEdBRUFDLEVBQUFnQyxPQUNBaEMsRUFBQWlDLGNBQUEsRUFDQWpDLEVBQUFrQyxNQUFBLEVBQ0FsQyxFQUFBbUMsVUFBQSxHQUNBbkMsRUFBQW9DLEtBQ0FDLE1BQUEsRUFDQUMsTUFBQSxFQUNBQyxNQUFBLEVBQ0FDLFFBQUEsR0FHQXhDLEVBQUF5QyxlQUFBLFdBQ0EsSUFBQSxHQUFBQyxLQUFBMUMsR0FBQUUsT0FBQUcsVUFDQUwsRUFBQWdDLElBQUFVLEdBQUE1QyxFQUFBRSxFQUFBRSxPQUFBRyxVQUFBcUMsS0FJQTFDLEVBQUEyQyxZQUFBLFdBQ0EzQyxFQUFBa0MsT0FDQWxDLEVBQUFnQyxJQUFBdkIsVUFBQW1DLFNBQ0E1QyxFQUFBZ0MsSUFBQTFCLEtBQUF1QyxTQUFBLGlCQUVBN0MsRUFBQWdDLElBQUF4QixNQUFBc0MsS0FBQSxTQUFBQyxFQUFBQyxHQUNBbEQsRUFBQWtELEdBQUFDLElBQUFqRCxFQUFBbUMsYUFFQWUsU0FBQUMsY0FBQUMsT0FDQXBELEVBQUFnQyxJQUFBaEIsWUFBQXFDLE9BQ0FyRCxFQUFBZ0MsSUFBQWQsbUJBQUFvQyxZQUFBLFVBQ0F0RCxFQUFBdUQsZ0JBR0F2RCxFQUFBd0QsV0FBQSxXQUNBeEQsRUFBQWdDLElBQUFyQixXQUFBOEMsVUFBQSxHQUNBekQsRUFBQWdDLElBQUFkLG1CQUFBMkIsU0FBQSxVQUNBN0MsRUFBQTBELGVBT0ExRCxFQUFBMkQsT0FBQSxTQUFBQyxFQUFBQyxHQUNBN0QsRUFBQTJDLGNBQ0EzQyxFQUFBMkQsaUJBQUFHLFVBQ0E5RCxFQUFBK0QsTUFBQS9ELEVBQUFtQyxVQUFBeUIsRUFBQSxXQUNBNUQsRUFBQXdELGdCQUlBUSxRQUFBQyxJQUFBLDJCQUNBakUsRUFBQWtFLGFBQUFsRSxFQUFBbUMsVUFBQSxJQUNBbkMsRUFBQXdELGVBU0F4RCxFQUFBa0UsYUFBQSxTQUFBL0IsRUFBQWdDLEdBQ0EsR0FBQUMsR0FBQSxFQUNBQSxHQUFBLFlBQUFELEVBQUEsd0JBQUFoQyxFQUFBLEtBQ0EsWUFBQWdDLEVBQUEsdUJBQ0Esc0JBQ0FuRSxFQUFBZ0MsSUFBQWxCLGNBQUF1RCxLQUFBLElBQ0FyRSxFQUFBZ0MsSUFBQWhCLFlBQUFxRCxLQUFBRCxHQUNBcEUsRUFBQWdDLElBQUFoQixZQUFBc0QsUUFHQXRFLEVBQUF1RSxTQUFBLFdBQ0F2RSxFQUFBb0MsSUFBQUMsUUFBQSxHQUNBckMsRUFBQTJELE9BQUEzRCxFQUFBb0MsSUFBQUMsT0FJQXJDLEVBQUF3RSxTQUFBLFdBQ0F4RSxFQUFBb0MsSUFBQUUsUUFBQSxHQUNBdEMsRUFBQTJELE9BQUEzRCxFQUFBb0MsSUFBQUUsT0FVQXRDLEVBQUF5RSxZQUFBLFNBQUEvQyxFQUFBZ0QsRUFBQUMsR0FDQSxHQUFBTixHQUFBLEVBUUEsT0FQQUEsR0FBQSxPQUNBQSxHQUFBLDJCQUFBM0MsRUFBQSxLQUNBMkMsR0FBQSx1QkFBQUssRUFBQSxVQUNBTCxHQUFBLHdCQUFBTSxFQUFBLFVBQ0FOLEdBQUEscURBQ0FBLEdBQUEsT0FDQUEsR0FBQSxTQVFBckUsRUFBQTRFLE1BQUEsV0FDQTVFLEVBQUFrQyxNQUFBLEVBQ0FsQyxFQUFBZ0MsSUFBQXZCLFVBQUFvRSxVQUNBN0UsRUFBQWdDLElBQUExQixLQUFBZ0QsWUFBQSxpQkFPQXRELEVBQUE4RSxTQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLGlCQUNBaEYsRUFBQW1DLFVBQUFyQyxFQUFBRyxNQUFBZ0YsS0FBQSxtQkFBQWhDLE1BQ0FqRCxFQUFBbUMsV0FDQW5DLEVBQUEyRCxPQUFBLElBUUEzRCxFQUFBdUQsYUFBQSxXQUNBdkQsRUFBQWdDLElBQUFmLGtCQUFBcUQsT0FDQXRFLEVBQUFrRixhQUFBQyxZQUFBLFdBQ0FuRixFQUFBaUMsY0FBQW1ELEtBQUFDLElBQUFyRixFQUFBaUMsY0FBQSxFQUFBLElBQ0FqQyxFQUFBZ0MsSUFBQWYsa0JBQUFxRSxJQUFBLFFBQUF0RixFQUFBaUMsY0FBQSxNQUNBLE1BT0FqQyxFQUFBMEQsWUFBQSxXQUNBNkIsY0FBQXZGLEVBQUFrRixjQUNBbEYsRUFBQWdDLElBQUFmLGtCQUFBcUUsSUFBQSxRQUFBLFFBQ0F0RixFQUFBZ0MsSUFBQWYsa0JBQUE0RCxVQUNBVyxXQUFBLFdBQ0F4RixFQUFBaUMsY0FBQSxFQUNBakMsRUFBQWdDLElBQUFmLGtCQUFBcUUsSUFBQSxRQUFBLE9BQ0EsTUFPQXRGLEVBQUF5RixRQUFBLFNBQUFDLEdBQ0EsR0FBQXJCLEdBQUEsRUFDQXJFLEdBQUFFLE9BQUFxQixPQUFBbUUsSUFBQTFGLEVBQUFFLE9BQUFxQixPQUFBbUUsR0FBQWpFLE9BQ0E0QyxHQUFBLFlBQUFyRSxFQUFBRSxPQUFBcUIsT0FBQW1FLEdBQUFoRSxJQUFBLFlBQUFnRSxFQUFBLEtBQ0FyQixHQUFBLGFBQUFyRSxFQUFBRSxPQUFBNkIsVUFBQS9CLEVBQUFFLE9BQUFxQixPQUFBbUUsR0FBQWpFLEtBQUEsT0FDQTRDLEdBQUEsT0FDQXJFLEVBQUFnQyxJQUFBYixXQUFBa0QsS0FBQUEsS0FJQXJFLEVBQUEyRixRQUFBLFdBQ0EzRixFQUFBZ0MsSUFBQXpCLEtBQUF1QyxLQUFBLFNBQUFDLEVBQUFDLEdBQ0FsRCxFQUFBa0QsR0FBQTRDLElBQUEsWUFFQTVGLEVBQUFnQyxJQUFBbkIsY0FBQStFLElBQUEsU0FDQTVGLEVBQUFnQyxJQUFBWixVQUFBd0UsSUFBQSxTQUNBNUYsRUFBQWdDLElBQUFYLFNBQUF1RSxJQUFBLFNBQ0E1RixFQUFBZ0MsSUFBQVYsU0FBQXNFLElBQUEsU0FDQTVGLEVBQUFnQyxJQUFBdkIsVUFBQW9GLFVBT0E3RixFQUFBOEYsS0FBQSxXQUNBaEcsRUFBQSxRQUFBaUcsT0FBQUMsR0FDQWhHLEVBQUF5QyxpQkFDQXpDLEVBQUFnQyxJQUFBcEIsYUFBQTBELE9BQ0F0RSxFQUFBZ0MsSUFBQXpCLEtBQUF1QyxLQUFBLFNBQUFDLEVBQUFDLEdBQ0FsRCxFQUFBa0QsR0FBQWlELEdBQUEsU0FBQWpHLEVBQUE4RSxZQUVBOUUsRUFBQWdDLElBQUFuQixjQUFBb0YsR0FBQSxRQUFBakcsRUFBQTRFLE9BQ0E1RSxFQUFBZ0MsSUFBQVosVUFBQTZFLEdBQUEsUUFBQWpHLEVBQUE0RSxPQUNBNUUsRUFBQWdDLElBQUFYLFNBQUE0RSxHQUFBLFFBQUFqRyxFQUFBdUUsVUFDQXZFLEVBQUFnQyxJQUFBVixTQUFBMkUsR0FBQSxRQUFBakcsRUFBQXdFLFdBR0F4RSxFQUFBOEYsT0FHQSxJQUFBRSxHQUFBLHFtQ0FDQUUsT0FFQSxJQUFBQyxnQkFFQSxTQUFBckcsR0FDQSxZQU1BcUcsZUFBQSxTQUFBcEcsR0FDQUYsY0FBQXVHLE1BQUFuRyxLQUFBb0csVUFDQSxJQUFBckcsR0FBQUMsS0FDQXFHLEVBQUEsV0FBQXRHLEVBQUFFLE9BQUFxRyxNQUFBLDhCQUFBdkcsRUFBQUUsT0FBQXNHLFNBb0ZBLE9BbkZBeEcsR0FBQXlGLFFBQUEsV0FNQXpGLEVBQUF5RyxnQkFBQSxTQUFBQyxHQUNBLEdBQUFyQyxHQUFBLEVBVUEsT0FUQXZFLEdBQUFnRCxLQUFBNEQsRUFBQSxTQUFBM0QsRUFBQTRELEdBQ0EsR0FBQWpGLEdBQUFpRixFQUFBQyxXQUFBRCxFQUFBRSxNQUFBLElBQ0FGLEVBQUFDLFdBQUFELEVBQUFFLE9BQ0FuRixFQUFBLElBQUFBLEVBRUEsSUFBQWdELEdBQUFpQyxFQUFBakMsTUFDQUMsRUFBQWdDLEVBQUFHLGlCQUFBQyxhQUFBQyxPQUFBLEVBQ0EzQyxJQUFBckUsRUFBQXlFLFlBQUEvQyxFQUFBZ0QsRUFBQUMsS0FFQU4sR0FPQXJFLEVBQUFpSCxjQUFBLFNBQUFQLEdBQ0ExRyxFQUFBb0MsSUFBQUksUUFBQWtFLEVBQUFRLEtBQUFSLEVBQUFTLFlBQUEsRUFDQW5ILEVBQUFvQyxJQUFBZ0YsYUFBQVYsRUFBQVcsS0FBQUMsT0FDQXRILEVBQUFvQyxJQUFBRyxNQUFBZ0YsU0FBQWIsRUFBQWMsUUFDQXhILEVBQUFnQyxJQUFBakIsZUFBQTBHLFNBQUEsVUFBQXBELEtBQUFyRSxFQUFBb0MsSUFBQUcsT0FDQXZDLEVBQUFnQyxJQUFBakIsZUFBQTBHLFNBQUEsVUFBQXBELEtBQUFyRSxFQUFBb0MsSUFBQUksUUFBQSxLQUFBeEMsRUFBQW9DLElBQUFJLFFBQUF4QyxFQUFBb0MsSUFBQWdGLGFBQUEsSUFDQXBILEVBQUFvQyxJQUFBRyxNQUFBLEVBQ0F2QyxFQUFBZ0MsSUFBQWpCLGVBQUF1RCxPQUdBdEUsRUFBQWdDLElBQUFqQixlQUFBc0MsT0FHQXFELEVBQUFRLEtBQUFSLEVBQUFnQixRQUFBLEdBQ0ExSCxFQUFBb0MsSUFBQUMsS0FBQXFFLEVBQUFRLEtBQUEsRUFBQSxFQUNBbEgsRUFBQWdDLElBQUFYLFNBQUFpRCxTQUdBdEUsRUFBQW9DLElBQUFDLE1BQUEsRUFDQXJDLEVBQUFnQyxJQUFBWCxTQUFBZ0MsUUFFQXFELEVBQUFRLEtBQUEsR0FDQWxILEVBQUFvQyxJQUFBRSxLQUFBb0UsRUFBQVEsS0FBQSxFQUFBLEVBQ0FsSCxFQUFBZ0MsSUFBQVYsU0FBQWdELFNBR0F0RSxFQUFBb0MsSUFBQUUsTUFBQSxFQUNBdEMsRUFBQWdDLElBQUFWLFNBQUErQixTQVVBckQsRUFBQStELE1BQUEsU0FBQTVCLEVBQUErRSxFQUFBckQsR0FDQS9ELEVBQUE2SCxJQUFBckIsR0FDQXZDLE1BQUE1QixFQUNBK0UsS0FBQUEsRUFBQSxFQUNBQyxZQUFBbkgsRUFBQUUsT0FBQUUsU0FDQXdILDJCQUFBNUgsRUFBQUUsT0FBQXFHLE1BQ0FzQixvQkFBQTdILEVBQUFFLE9BQUE0SCxRQUNBLFNBQUFwQixFQUFBdkMsR0FDQSxHQUFBLFlBQUFBLEdBQUF1QyxFQUFBVyxNQUFBWCxFQUFBVyxLQUFBQyxPQUFBLEVBQUEsQ0FDQSxHQUFBUyxHQUFBL0gsRUFBQXlHLGdCQUFBQyxFQUFBVyxLQUNBckgsR0FBQWdDLElBQUFsQixjQUFBdUQsS0FBQTBELE9BR0EvSCxHQUFBa0UsYUFBQS9CLEVBQUFnQyxFQUVBbkUsR0FBQWlILGNBQUFQLEdBQ0E3QyxHQUNBQSxFQUFBNkMsTUFLQTFHLElBR0FrRyxPQUNBLElBQUE4QixjQUVBLFNBQUFsSSxHQUNBLFlBTUFrSSxhQUFBLFNBQUFqSSxHQUNBRixjQUFBdUcsTUFBQW5HLEtBQUFvRyxVQUNBLElBQUFyRyxHQUFBQyxLQUNBcUcsRUFBQSxXQUFBdEcsRUFBQUUsT0FBQStILFlBQUEsK0JBQUFqSSxFQUFBRSxPQUFBc0csVUFBQSw4QkE4RkEsT0E3RkF4RyxHQUFBb0MsSUFBQUksUUFBQSxFQUNBeEMsRUFBQXlGLFFBQUEsU0FNQXpGLEVBQUF5RyxnQkFBQSxTQUFBQyxHQUNBLEdBQUFyQyxHQUFBLEVBVUEsT0FUQXZFLEdBQUFnRCxLQUFBNEQsRUFBQSxTQUFBM0QsRUFBQTRELEdBQ0EsR0FBQWpGLEdBQUFpRixFQUFBQyxXQUFBRCxFQUFBRSxNQUFBLElBQ0FGLEVBQUFDLFdBQUFELEVBQUFFLE9BQ0FuRixFQUFBLElBQUFBLEVBRUEsSUFBQWdELEdBQUFpQyxFQUFBakMsTUFDQUMsRUFBQWdDLEVBQUFJLGNBQUEsRUFDQTFDLElBQUFyRSxFQUFBeUUsWUFBQS9DLEVBQUFnRCxFQUFBQyxLQUVBTixHQVFBckUsRUFBQWlILGNBQUEsU0FBQVAsRUFBQTlDLEdBQ0E1RCxFQUFBb0MsSUFBQUksUUFBQW9CLEVBQ0E1RCxFQUFBb0MsSUFBQWdGLGFBQUFWLEVBQUFNLE1BQUFNLE9BQ0F0SCxFQUFBb0MsSUFBQUcsTUFBQWdGLFNBQUFiLEVBQUEsaUJBQ0ExRyxFQUFBZ0MsSUFBQWpCLGVBQUEwRyxTQUFBLFVBQUFwRCxLQUFBckUsRUFBQW9DLElBQUFHLE9BQ0F2QyxFQUFBZ0MsSUFBQWpCLGVBQUEwRyxTQUFBLFVBQUFwRCxLQUFBckUsRUFBQW9DLElBQUFJLFFBQUEsS0FBQXhDLEVBQUFvQyxJQUFBSSxRQUFBeEMsRUFBQW9DLElBQUFnRixhQUFBLElBQ0FwSCxFQUFBb0MsSUFBQUcsTUFBQSxFQUNBdkMsRUFBQWdDLElBQUFqQixlQUFBdUQsT0FHQXRFLEVBQUFnQyxJQUFBakIsZUFBQXNDLE9BR0FyRCxFQUFBb0MsSUFBQUksUUFBQXhDLEVBQUFvQyxJQUFBZ0YsY0FBQXBILEVBQUFvQyxJQUFBRyxPQUNBdkMsRUFBQW9DLElBQUFDLEtBQUFyQyxFQUFBb0MsSUFBQUksUUFBQXhDLEVBQUFvQyxJQUFBZ0YsYUFDQXBILEVBQUFnQyxJQUFBWCxTQUFBaUQsU0FHQXRFLEVBQUFvQyxJQUFBQyxNQUFBLEVBQ0FyQyxFQUFBZ0MsSUFBQVgsU0FBQWdDLFFBRUFyRCxFQUFBb0MsSUFBQUksUUFBQSxHQUNBeEMsRUFBQW9DLElBQUFFLEtBQUF0QyxFQUFBb0MsSUFBQUksUUFBQXhDLEVBQUFFLE9BQUFFLFNBQ0FKLEVBQUFnQyxJQUFBVixTQUFBZ0QsU0FHQXRFLEVBQUFvQyxJQUFBRSxNQUFBLEVBQ0F0QyxFQUFBZ0MsSUFBQVYsU0FBQStCLFNBVUFyRCxFQUFBK0QsTUFBQSxTQUFBNUIsRUFBQXlCLEVBQUFDLEdBQ0EvRCxFQUFBb0ksTUFDQXhHLElBQUE0RSxFQUNBNkIsU0FDQUMsT0FBQSxtQkFDQUMsVUFBQXJJLEVBQUFFLE9BQUFvSSxVQUVBNUIsTUFDQS9DLE9BQUF4QixFQUNBb0csTUFBQTNFLEVBQUEsRUFDQTRFLEtBQUF4SSxFQUFBRSxPQUFBRSxTQUNBcUksUUFBQSxHQUVBQyxLQUFBLE1BQ0FDLFFBQUEsU0FBQWpDLEVBQUF2QyxHQUNBLEdBQUEsWUFBQUEsR0FBQXVDLEVBQUFNLE9BQUFOLEVBQUFNLE1BQUFNLE9BQUEsRUFBQSxDQUNBLEdBQUFTLEdBQUEvSCxFQUFBeUcsZ0JBQUFDLEVBQUFNLE1BQ0FoSCxHQUFBZ0MsSUFBQWxCLGNBQUF1RCxLQUFBMEQsT0FHQS9ILEdBQUFrRSxhQUFBL0IsRUFBQWdDLEVBRUFuRSxHQUFBaUgsY0FBQVAsRUFBQTlDLEdBQ0FDLEdBQ0FBLEVBQUE2QyxPQU1BMUcsSUFHQWtHLE9BQ0EsSUFBQTBDLGNBRUEsU0FBQTlJLEdBQ0EsWUFPQThJLGFBQUEsU0FBQTdJLEdBQ0FGLGNBQUF1RyxNQUFBbkcsS0FBQW9HLFVBQ0EsSUFBQXJHLEdBQUFDLElBK0VBLE9BN0VBRCxHQUFBeUYsUUFBQSxTQU1BekYsRUFBQXlHLGdCQUFBLFNBQUFDLEVBQUF2RSxHQUNBLEdBQ0FrQyxHQUFBLEVBS0EsT0FKQXZFLEdBQUFnRCxLQUFBNEQsRUFBQSxTQUFBM0QsRUFBQThGLEdBQ0E3SSxFQUFBOEksY0FBQUQsRUFBQTFHLEtBQ0FrQyxHQUFBckUsRUFBQXlFLFlBQUFvRSxFQUFBRSxRQUFBRixFQUFBbkUsTUFBQW1FLEVBQUFHLGFBRUEzRSxHQU9BckUsRUFBQWlILGNBQUEsU0FBQVAsS0FJQTFHLEVBQUFpSixXQUFBLFdBQ0FqSixFQUFBZ0MsSUFBQXhCLE1BQUFzQyxLQUFBLFNBQUFDLEVBQUFDLEdBQ0FsRCxFQUFBa0QsR0FBQWtHLEtBQUEsWUFBQSxJQUVBLElBQUFDLEdBQUEsd0VBQUFuSixFQUFBRSxPQUFBa0osTUFBQSwwRkFDQXBKLEdBQUFnQyxJQUFBMUIsS0FBQXlGLE9BQUFvRCxJQUdBbkosRUFBQXFKLFVBQUEsV0FDQXJKLEVBQUFzSixJQUFBLEdBQUFDLE1BQUFDLE9BQUF4SixFQUFBRSxPQUFBa0osT0FFQXBKLEVBQUFnQyxJQUFBeEIsTUFBQXNDLEtBQUEsU0FBQUMsRUFBQUMsR0FDQWxELEVBQUFrRCxHQUFBa0csS0FBQSxZQUFBLE1BVUFsSixFQUFBK0QsTUFBQSxTQUFBNUIsRUFBQStFLEVBQUFyRCxHQUNBN0QsRUFBQXNKLElBQUFHLFVBQUF0SCxFQUFBLFNBQUF1RSxHQUNBMUMsUUFBQUMsSUFBQSxjQUFBOUIsR0FDQTZCLFFBQUFDLElBQUF5QyxHQUNBMUcsRUFBQXNKLElBQUFJLFNBQUEsU0FBQWhELEdBQ0ExQyxRQUFBQyxJQUFBeUMsS0FFQUEsRUFBQVksT0FBQSxHQUNBdEgsRUFBQXlHLGdCQUFBQyxFQUFBdkUsR0FDQW5DLEVBQUFzSixJQUFBSyxjQUFBeEgsRUFBQSxTQUFBdUUsR0FDQTFDLFFBQUFDLElBQUF5QyxHQUNBMUcsRUFBQWlILGNBQUFQLE9BSUExRyxFQUFBb0MsSUFBQUcsTUFBQSxFQUNBdkMsRUFBQW9DLElBQUFDLE1BQUEsRUFDQXJDLEVBQUFvQyxJQUFBRSxNQUFBLEVBQ0F0QyxFQUFBZ0MsSUFBQWpCLGVBQUFzQyxPQUNBckQsRUFBQWdDLElBQUFYLFNBQUFnQyxPQUNBckQsRUFBQWdDLElBQUFWLFNBQUErQixPQUNBckQsRUFBQWtFLGFBQUEvQixFQUFBLFlBRUEwQixZQUFBQyxXQUNBRCxPQUtBN0QsRUFBQWlKLGFBRUFqSixJQUdBa0csT0FDQSxJQUFBMEQsb0JBQUEsSUFFQSxTQUFBOUosR0FDQSxZQU1BOEosb0JBQUEsU0FBQTdKLEdBQ0FGLGNBQUF1RyxNQUFBbkcsS0FBQW9HLFVBQ0EsSUFBQXJHLEdBQUFDLEtBQ0FxRyxFQUFBLDRDQWdGQSxPQS9FQXRHLEdBQUF5RixRQUFBLFVBTUF6RixFQUFBeUcsZ0JBQUEsU0FBQUMsR0FDQSxHQUFBckMsR0FBQSxFQU9BLE9BTkF2RSxHQUFBZ0QsS0FBQTRELEVBQUEsU0FBQTNELEVBQUE0RCxHQUNBLEdBQUFqRixHQUFBaUYsRUFBQWtELEtBQ0FuRixFQUFBaUMsRUFBQWpDLE1BQ0FDLEdBQUFnQyxFQUFBbUQsYUFBQSxJQUFBQyxRQUFBLE9BQUEsR0FDQTFGLElBQUFyRSxFQUFBeUUsWUFBQS9DLEVBQUFnRCxFQUFBQyxLQUVBTixHQU9BckUsRUFBQWlILGNBQUEsU0FBQVAsR0FDQUEsRUFBQXNELFNBQUF0RCxFQUFBc0QsUUFBQUMsU0FBQSxNQUFBdkQsRUFBQXNELFFBQUFDLFFBQUEsR0FBQUMsY0FDQWxLLEVBQUFvQyxJQUFBSSxRQUFBa0UsRUFBQXNELFFBQUFDLFFBQUEsR0FBQXJHLFdBQ0E1RCxFQUFBb0MsSUFBQWdGLGFBQUFWLEVBQUFzRCxRQUFBQyxRQUFBLEdBQUFFLE1BQ0FuSyxFQUFBb0MsSUFBQUcsTUFBQWdGLFNBQUFiLEVBQUFzRCxRQUFBQyxRQUFBLEdBQUFDLGNBQ0FsSyxFQUFBZ0MsSUFBQWpCLGVBQUEwRyxTQUFBLFVBQUFwRCxLQUFBckUsRUFBQW9DLElBQUFHLE9BQ0F2QyxFQUFBZ0MsSUFBQWpCLGVBQUEwRyxTQUFBLFVBQUFwRCxLQUFBckUsRUFBQW9DLElBQUFJLFFBQUEsS0FBQXhDLEVBQUFvQyxJQUFBSSxRQUFBeEMsRUFBQW9DLElBQUFnRixhQUFBLElBQ0FwSCxFQUFBZ0MsSUFBQWpCLGVBQUF1RCxRQUdBdEUsRUFBQWdDLElBQUFqQixlQUFBc0MsT0FFQXFELEVBQUFzRCxTQUFBdEQsRUFBQXNELFFBQUF6RixVQUNBdkUsRUFBQW9DLElBQUFDLEtBQUFxRSxFQUFBc0QsUUFBQXpGLFNBQUEsR0FBQVgsV0FDQTVELEVBQUFnQyxJQUFBWCxTQUFBaUQsU0FHQXRFLEVBQUFvQyxJQUFBQyxNQUFBLEVBQ0FyQyxFQUFBZ0MsSUFBQVgsU0FBQWdDLFFBRUFxRCxFQUFBc0QsU0FBQXRELEVBQUFzRCxRQUFBSSxjQUNBcEssRUFBQW9DLElBQUFFLEtBQUFvRSxFQUFBc0QsUUFBQUksYUFBQSxHQUFBeEcsV0FDQTVELEVBQUFnQyxJQUFBVixTQUFBZ0QsU0FHQXRFLEVBQUFvQyxJQUFBRSxNQUFBLEVBQ0F0QyxFQUFBZ0MsSUFBQVYsU0FBQStCLFNBVUFyRCxFQUFBK0QsTUFBQSxTQUFBNUIsRUFBQXlCLEVBQUFDLEdBQ0EvRCxFQUFBNkgsSUFBQXJCLEdBQ0E1RCxJQUFBMUMsRUFBQUUsT0FBQTRILE9BQ0F1QyxHQUFBckssRUFBQUUsT0FBQW9LLFNBQ0FDLEVBQUFwSSxFQUNBcUksTUFBQTVHLEVBQ0E2RyxJQUFBekssRUFBQUUsT0FBQUUsVUFDQSxTQUFBc0csRUFBQXZDLEdBQ0EsR0FBQSxZQUFBQSxHQUFBdUMsRUFBQWdFLE9BQUFoRSxFQUFBZ0UsTUFBQXBELE9BQUEsRUFBQSxDQUNBLEdBQUFTLEdBQUEvSCxFQUFBeUcsZ0JBQUFDLEVBQUFnRSxNQUNBMUssR0FBQWdDLElBQUFsQixjQUFBdUQsS0FBQTBELE9BR0EvSCxHQUFBa0UsYUFBQS9CLEVBQUFnQyxFQUVBbkUsR0FBQWlILGNBQUFQLEdBQ0E3QyxHQUNBQSxPQUtBN0QsSUFFQWtHLE9BQ0EsSUFBQXlFLGFBRUEsU0FBQTdLLEdBQ0EsWUFNQTZLLFlBQUEsU0FBQTVLLEdBQ0FGLGNBQUF1RyxNQUFBbkcsS0FBQW9HLFVBQ0EsSUFBQXJHLEdBQUFDLElBOEhBLE9BN0hBRCxHQUFBRSxPQUFBb0csVUFBQXZHLE9BQUF1RyxVQUFBLGdCQUNBdEcsRUFBQTRLLE1BQUEsR0FRQTVLLEVBQUE4SSxjQUFBLFNBQUFELEVBQUExRyxHQUNBLEdBQUEwSSxHQUFBaEMsRUFBQW5FLE1BQUFvRyxPQUFBQyxjQUNBQyxFQUFBbkMsRUFBQW9DLEtBQUFILE9BQUFDLGNBQ0FHLEVBQUEvSSxFQUFBMkksT0FBQUMsY0FBQUksTUFBQSxLQUNBQyxHQUFBLEVBQ0FDLEdBQUEsRUFDQUMsR0FBQSxFQUNBQyxHQUFBLENBcUNBLE9BcENBLEtBQUFWLEdBQUEsS0FBQUcsR0FDQWxMLEVBQUFnRCxLQUFBb0ksRUFBQSxTQUFBbkksRUFBQXlJLEdBZUEsR0FkQUgsRUFBQVIsRUFBQVksUUFBQUQsR0FDQUYsRUFBQU4sRUFBQVMsUUFBQUQsR0FDQUgsRUFBQSxHQUFBQyxFQUFBLEVBQ0FGLEdBQUEsR0FHQUEsR0FBQSxFQUNBRSxFQUFBLElBQ0FBLEVBQUEsR0FFQSxJQUFBdkksSUFDQXdJLEVBQUFELElBR0FGLEVBQUEsQ0FDQUosRUFBQW5DLEVBQUFvQyxLQUFBSCxNQUNBLElBQUFOLEdBQUEsRUFBQWtCLEVBQUEsQ0FDQSxJQUFBSCxHQUFBLEVBQUEsQ0FDQWYsRUFBQXBGLEtBQUF1RyxJQUFBSixFQUFBLEdBQUEsR0FDQUcsRUFBQSxJQUFBbEIsRUFBQXBGLEtBQUFDLElBQUEsSUFBQTJGLEVBQUExRCxRQUFBbEMsS0FBQUMsSUFBQWtHLEVBQUEsSUFBQVAsRUFBQTFELE9BQ0EsSUFBQXNFLEdBQUFaLEVBQUFhLFVBQUFyQixFQUFBa0IsRUFDQVIsR0FBQVksUUFBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUEsR0FBQUMsUUFBQUYsRUFBQSxLQUNBSCxHQUFBQSxFQUFBN0IsUUFBQWlDLEVBQUEsTUFBQUQsRUFBQSxVQUVBbEQsRUFBQWxFLE9BQUFpSCxNQUdBRixHQUFBdEcsS0FBQUMsSUFBQSxJQUFBMkYsRUFBQTFELFFBQ0F1QixFQUFBbEUsT0FBQXFHLEVBQUFGLE9BQUFlLFVBQUEsRUFBQUgsTUFLQU4sR0FPQXBMLEVBQUF5RyxnQkFBQSxTQUFBQyxFQUFBdkUsR0FDQSxHQUNBa0MsR0FBQSxFQUtBLE9BSkF2RSxHQUFBZ0QsS0FBQTRELEVBQUEsU0FBQTNELEVBQUE4RixHQUNBN0ksRUFBQThJLGNBQUFELEVBQUExRyxLQUNBa0MsR0FBQXJFLEVBQUF5RSxZQUFBb0UsRUFBQWpDLFVBQUFpQyxFQUFBbkUsTUFBQW1FLEVBQUFsRSxXQUVBTixHQU9BckUsRUFBQWlILGNBQUEsU0FBQVAsR0FDQTFHLEVBQUFnQyxJQUFBcEIsYUFBQXlDLFFBU0FyRCxFQUFBK0QsTUFBQSxTQUFBNUIsRUFBQXlCLEVBQUFDLEdBQ0EsR0FBQTdELEVBQUE0SyxNQTRCQSxDQUNBLEdBQUE3QyxHQUFBLEVBQ0FBLElBQUEvSCxFQUFBeUcsZ0JBQUF6RyxFQUFBNEssTUFBQXNCLE1BQUEvSixHQUNBNEYsR0FBQS9ILEVBQUF5RyxnQkFBQXpHLEVBQUE0SyxNQUFBdUIsTUFBQWhLLEdBQ0FuQyxFQUFBZ0MsSUFBQWxCLGNBQUF1RCxLQUFBMEQsR0FDQS9ILEVBQUFpSCxjQUFBakgsRUFBQTRLLE9BQ0EvRyxHQUNBQSxFQUFBN0QsRUFBQTRLLFdBbENBOUssR0FBQTZILElBQUEzSCxFQUFBRSxPQUFBb0csVUFDQTVELElBQUExQyxFQUFBRSxPQUFBNEgsT0FDQXVDLEdBQUFySyxFQUFBRSxPQUFBb0ssU0FDQUMsRUFBQXBJLEVBQ0FxSSxNQUFBNUcsRUFDQTZHLElBQUF6SyxFQUFBRSxPQUFBRSxVQUNBLFNBQUFzRyxFQUFBdkMsR0FDQSxHQUFBLFlBQUFBLElBQ0F1QyxJQUNBQSxFQUFBeUYsUUFBQXpGLEVBQUF3RixPQUNBeEYsRUFBQXlGLE1BQUE3RSxPQUFBLEdBQUFaLEVBQUF3RixNQUFBNUUsT0FBQSxFQUVBdEgsRUFBQWtFLGFBQUEvQixFQUFBZ0MsT0FFQSxDQUNBbkUsRUFBQTRLLE1BQUFsRSxDQUNBLElBQUFxQixHQUFBLEVBQ0FBLElBQUEvSCxFQUFBeUcsZ0JBQUFDLEVBQUF3RixNQUFBL0osR0FDQTRGLEdBQUEvSCxFQUFBeUcsZ0JBQUFDLEVBQUF5RixNQUFBaEssR0FDQW5DLEVBQUFnQyxJQUFBbEIsY0FBQXVELEtBQUEwRCxHQUVBL0gsRUFBQWlILGNBQUFQLEdBQ0E3QyxHQUNBQSxFQUFBNkMsTUFnQkExRyxJQUdBa0csT0F6d0JBLElBQUFrRyxlQUVBLFNBQUF0TSxHQUVBLFlBR0EsSUFBQXVNLEdBQUEsU0FDQUMsR0FBQSxFQUVBQyxFQUFBLDBDQUNBQyxFQUFBLG9DQUNBQyxFQUFBLEdBQ0FDLEVBQUEsR0FDQUMsRUFBQSxHQUNBQyxFQUFBLEdBQ0FDLEVBQUEsR0FDQUMsRUFBQSxHQUNBQyxFQUFBLEdBRUFDLEtBRUFDLEVBQUEsU0FBQUMsR0FDQUEsRUFBQWxJLGdCQUNBLElBQUFoRixHQUFBRixFQUFBRyxNQUNBa04sRUFBQUQsRUFBQXhHLE1BQUF3RyxFQUFBeEcsS0FBQXlHLFdBQUFELEVBQUF4RyxLQUFBeUcsV0FBQSxDQUNBck4sR0FBQSxjQUFBc04sU0FBQTNKLFVBQUEzRCxFQUFBRSxFQUFBa0osS0FBQSxTQUFBbUUsU0FBQUMsSUFBQUgsR0FBQSxNQUdBSSxFQUFBLFNBQUFMLEdBQ0FBLEVBQUFNLGtCQUNBMU4sRUFBQSxRQUFBd0QsWUFBQSxhQUNBeEQsRUFBQSxvQkFBQXdELFlBQUEsV0FHQW1LLEVBQUEsU0FBQVAsR0FDQUEsRUFBQU0sa0JBQ0ExTixFQUFBLFFBQUE0TixZQUFBLGFBQ0E1TixFQUFBLG9CQUFBNE4sWUFBQSxXQUdBQyxFQUFBLFdBQ0EsR0FBQUMsR0FBQTlOLEVBQUEsdUJBQUF3SCxPQUNBdUcsRUFBQS9OLEVBQUEsMEJBQUF3SCxNQUNBeEgsR0FBQSxjQUFBbUwsS0FBQTJDLEdBQ0E5TixFQUFBLHVCQUFBbUwsS0FBQTRDLElBR0FDLEVBQUEsU0FBQUMsR0FDQSxHQUFBL04sR0FBQUMsSUFDQUQsR0FBQThGLEtBQUEsV0FDQWhHLEVBQUFpTyxHQUFBakwsS0FBQSxXQUNBLEdBQUErRixHQUFBL0ksRUFBQUcsTUFDQTJHLEVBQUFpQyxFQUFBNUQsS0FBQSxnQkFBQWlFLEtBQUEsUUFDQThFLEVBQUFuRixFQUFBNUQsS0FBQSxtQkFDQWdKLEVBQUFwRixFQUFBNUQsS0FBQSxvQkFDQWlKLEVBQUFGLEVBQUEzSixPQUNBOEosRUFBQSwwQkFDQUMsRUFBQUYsRUFBQW5FLFFBQUFvRSxFQUFBLEdBQ0FELEdBQUE1RyxTQUFBOEcsRUFBQTlHLFNBQ0E4RyxHQUFBLFlBQUF4SCxFQUFBLHVDQUVBb0gsRUFBQTNKLEtBQUErSixHQUNBSixFQUFBbkwsU0FBQSxpQkFDQW9MLEVBQUFwTCxTQUFBLG9CQUdBN0MsRUFBQThGLE9BR0FoRyxHQUFBLFdBQ0FBLEVBQUEsa0JBQUErQyxTQUFBLFVBQ0EvQyxFQUFBLG9CQUFBbUcsR0FBQSxRQUFBd0gsR0FDQTNOLEVBQUFvRCxVQUFBK0MsR0FBQSxRQUFBc0gsR0FDQXpOLEVBQUEsY0FBQW1HLEdBQUEsUUFBQSxTQUFBaUgsR0FDQUEsRUFBQU0sb0JBRUExTixFQUFBLDRCQUFBbUcsR0FBQSxRQUFBZ0gsR0FFQXpILFdBQUEsV0FDQTFGLEVBQUEsd0JBQUErRSxRQUFBLE1BQ0EsS0FFQS9FLEVBQUEsUUFBQXVPLFNBQUEsY0FBQXZPLEVBQUEsUUFBQXVPLFNBQUEsU0FDQVYsSUFFQXJCLElBQ0FVLEVBQUEsR0FBQWMsR0FBQSxxQkFFQSxXQUFBekIsRUFDQUQsYUFBQSxHQUFBeEMscUJBQ0E5QixPQUFBeUUsRUFDQWpDLFNBQUFrQyxFQUNBekssVUFBQSxpQkFHQSxZQUFBc0ssRUFDQUQsYUFBQSxHQUFBakcsZ0JBQ0EyQixPQUFBMkUsRUFDQWxHLE1BQUFtRyxFQUNBbEcsVUFBQW1HLEVBQ0E1SyxVQUFBLGlCQUdBLFNBQUFzSyxFQUNBRCxhQUFBLEdBQUF6QixhQUNBNUksVUFBQSxpQkFHQSxVQUFBc0ssRUFDQUQsYUFBQSxHQUFBcEUsY0FDQUMsWUFBQTJFLEVBQ0FwRyxVQUFBcUcsRUFDQXZFLFNBQUF3RSxFQUNBL0ssVUFBQSxpQkFHQSxVQUFBc0ssSUFDQUQsYUFBQSxHQUFBeEQsY0FDQVEsTUFBQTJELEVBQ0FoTCxVQUFBLHFCQUtBbUUiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFNlYXJjaFNlcnZpY2UgPSBcIlwiO1xuXG4oZnVuY3Rpb24oJCkge1xuICAvKipcbiAgICogQSBzdXBlciBjbGFzcyBvZiBjb21tb24gbG9naWNzIGZvciBhbGwgc2VhcmNoIHNlcnZpY2VzXG4gICAqIEBwYXJhbSBvcHRpb25zIDogKG9iamVjdClcbiAgICovXG4gIFNlYXJjaFNlcnZpY2UgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIFxuICAgIHNlbGYuY29uZmlnID0gJC5leHRlbmQoe1xuICAgICAgcGVyX3BhZ2U6IDEwLFxuICAgICAgc2VsZWN0b3JzOiB7XG4gICAgICAgIGJvZHk6IFwiYm9keVwiLFxuICAgICAgICBmb3JtOiBcIi51LXNlYXJjaC1mb3JtXCIsXG4gICAgICAgIGlucHV0OiBcIi51LXNlYXJjaC1pbnB1dFwiLFxuICAgICAgICBjb250YWluZXI6IFwiI3Utc2VhcmNoXCIsXG4gICAgICAgIG1vZGFsOiBcIiN1LXNlYXJjaCAubW9kYWxcIixcbiAgICAgICAgbW9kYWxfYm9keTogXCIjdS1zZWFyY2ggLm1vZGFsLWJvZHlcIixcbiAgICAgICAgbW9kYWxfZm9vdGVyOiBcIiN1LXNlYXJjaCAubW9kYWwtZm9vdGVyXCIsXG4gICAgICAgIG1vZGFsX292ZXJsYXk6IFwiI3Utc2VhcmNoIC5tb2RhbC1vdmVybGF5XCIsXG4gICAgICAgIG1vZGFsX3Jlc3VsdHM6IFwiI3Utc2VhcmNoIC5tb2RhbC1yZXN1bHRzXCIsXG4gICAgICAgIG1vZGFsX21ldGFkYXRhOiBcIiN1LXNlYXJjaCAubW9kYWwtbWV0YWRhdGFcIixcbiAgICAgICAgbW9kYWxfZXJyb3I6IFwiI3Utc2VhcmNoIC5tb2RhbC1lcnJvclwiLFxuICAgICAgICBtb2RhbF9sb2FkaW5nX2JhcjogXCIjdS1zZWFyY2ggLm1vZGFsLWxvYWRpbmctYmFyXCIsXG4gICAgICAgIG1vZGFsX2FqYXhfY29udGVudDogXCIjdS1zZWFyY2ggLm1vZGFsLWFqYXgtY29udGVudFwiLFxuICAgICAgICBtb2RhbF9sb2dvOiAnI3Utc2VhcmNoIC5tb2RhbC1mb290ZXIgLmxvZ28nLFxuICAgICAgICBidG5fY2xvc2U6IFwiI3Utc2VhcmNoIC5idG4tY2xvc2VcIixcbiAgICAgICAgYnRuX25leHQ6IFwiI3Utc2VhcmNoIC5idG4tbmV4dFwiLFxuICAgICAgICBidG5fcHJldjogXCIjdS1zZWFyY2ggLmJ0bi1wcmV2XCJcbiAgICAgIH0sXG4gICAgICBicmFuZHM6IHtcbiAgICAgICAgJ2dvb2dsZSc6IHtsb2dvOiAnZ29vZ2xlLnN2ZycsIHVybDogJ2h0dHBzOi8vY3NlLmdvb2dsZS5jb20nfSxcbiAgICAgICAgJ2FsZ29saWEnOiB7bG9nbzogJ2FsZ29saWEuc3ZnJywgdXJsOiAnaHR0cHM6Ly93d3cuYWxnb2xpYS5jb20nfSxcbiAgICAgICAgJ2hleG8nOiB7bG9nbzogJycsIHVybDogJyd9LFxuICAgICAgICAnYXp1cmUnOiB7bG9nbzogJ2F6dXJlLnN2ZycsIHVybDogJ2h0dHBzOi8vYXp1cmUubWljcm9zb2Z0LmNvbS9lbi11cy9zZXJ2aWNlcy9zZWFyY2gvJ30sXG4gICAgICAgICdiYWlkdSc6IHtsb2dvOiAnYmFpZHUuc3ZnJywgdXJsOiAnaHR0cDovL3puLmJhaWR1LmNvbS9jc2UvaG9tZS9pbmRleCd9XG4gICAgICB9LFxuICAgICAgaW1hZ2VQYXRoOiBcIi9pbWcvXCJcbiAgICB9LCBvcHRpb25zKTtcblxuICAgIHNlbGYuZG9tID0ge307XG4gICAgc2VsZi5wZXJjZW50TG9hZGVkID0gMDtcbiAgICBzZWxmLm9wZW4gPSBmYWxzZTtcbiAgICBzZWxmLnF1ZXJ5VGV4dCA9IFwiXCI7XG4gICAgc2VsZi5uYXYgPSB7XG4gICAgICBuZXh0OiAtMSxcbiAgICAgIHByZXY6IC0xLFxuICAgICAgdG90YWw6IDAsXG4gICAgICBjdXJyZW50OiAxXG4gICAgfTtcblxuICAgIHNlbGYucGFyc2VTZWxlY3RvcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBzZWxmLmNvbmZpZy5zZWxlY3RvcnMpIHtcbiAgICAgICAgc2VsZi5kb21ba2V5XSA9ICQoc2VsZi5jb25maWcuc2VsZWN0b3JzW2tleV0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBzZWxmLmJlZm9yZVF1ZXJ5ID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXNlbGYub3Blbikge1xuICAgICAgICBzZWxmLmRvbS5jb250YWluZXIuZmFkZUluKCk7XG4gICAgICAgIHNlbGYuZG9tLmJvZHkuYWRkQ2xhc3MoJ21vZGFsLWFjdGl2ZScpO1xuICAgICAgfVxuICAgICAgc2VsZi5kb20uaW5wdXQuZWFjaChmdW5jdGlvbihpbmRleCxlbGVtKSB7XG4gICAgICAgICQoZWxlbSkudmFsKHNlbGYucXVlcnlUZXh0KTtcbiAgICAgIH0pO1xuICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCk7XG4gICAgICBzZWxmLmRvbS5tb2RhbF9lcnJvci5oaWRlKCk7XG4gICAgICBzZWxmLmRvbS5tb2RhbF9hamF4X2NvbnRlbnQucmVtb3ZlQ2xhc3MoJ2xvYWRlZCcpO1xuICAgICAgc2VsZi5zdGFydExvYWRpbmcoKTtcbiAgICB9O1xuICAgIFxuICAgIHNlbGYuYWZ0ZXJRdWVyeSA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5kb20ubW9kYWxfYm9keS5zY3JvbGxUb3AoMCk7XG4gICAgICBzZWxmLmRvbS5tb2RhbF9hamF4X2NvbnRlbnQuYWRkQ2xhc3MoJ2xvYWRlZCcpO1xuICAgICAgc2VsZi5zdG9wTG9hZGluZygpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGEgY29tcGxldGUgc2VyYWNoIG9wZXJhdGlvbiBpbmNsdWRpbmcgVUkgdXBkYXRlcyBhbmQgcXVlcnlcbiAgICAgKiBAcGFyYW0gc3RhcnRJbmRleCB7aW50fSBzdGFydCBpbmRleCBvciBwYWdlIG51bWJlclxuICAgICAqL1xuICAgIHNlbGYuc2VhcmNoID0gZnVuY3Rpb24oc3RhcnRJbmRleCwgY2FsbGJhY2spIHtcbiAgICAgIHNlbGYuYmVmb3JlUXVlcnkoKTtcbiAgICAgIGlmIChzZWxmLnNlYXJjaCBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgICAgIHNlbGYucXVlcnkoc2VsZi5xdWVyeVRleHQsIHN0YXJ0SW5kZXgsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuYWZ0ZXJRdWVyeSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcInF1ZXJ5KCkgZG9lcyBub3QgZXhpc3QuXCIpO1xuICAgICAgICBzZWxmLm9uUXVlcnlFcnJvcihzZWxmLnF1ZXJ5VGV4dCwgJycpO1xuICAgICAgICBzZWxmLmFmdGVyUXVlcnkoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUXVlcnkgZXJyb3IgaGFuZGxlclxuICAgICAqIEBwYXJhbSBxdWVyeVRleHQ6IChzdHJpbmcpXG4gICAgICogQHBhcmFtIHN0YXR1czogKHN0cmluZylcbiAgICAgKi9cbiAgICBzZWxmLm9uUXVlcnlFcnJvciA9IGZ1bmN0aW9uKHF1ZXJ5VGV4dCwgc3RhdHVzKSB7XG4gICAgICB2YXIgZXJyTXNnID0gXCJcIjtcbiAgICAgIGlmIChzdGF0dXMgPT09IFwic3VjY2Vzc1wiKSBlcnJNc2cgPSBcIk5vIHJlc3VsdCBmb3VuZCBmb3IgXFxcIlwiICtxdWVyeVRleHQrIFwiXFxcIi5cIjtcbiAgICAgIGVsc2UgaWYgKHN0YXR1cyA9PT0gXCJ0aW1lb3V0XCIpIGVyck1zZyA9IFwiVW5mb3J0dW5hdGUgdGltZW91dC5cIjtcbiAgICAgIGVsc2UgZXJyTXNnID0gXCJNeXN0ZXJpb3VzIGZhaWx1cmUuXCI7XG4gICAgICBzZWxmLmRvbS5tb2RhbF9yZXN1bHRzLmh0bWwoXCJcIik7XG4gICAgICBzZWxmLmRvbS5tb2RhbF9lcnJvci5odG1sKGVyck1zZyk7XG4gICAgICBzZWxmLmRvbS5tb2RhbF9lcnJvci5zaG93KCk7XG4gICAgfTtcbiAgICBcbiAgICBzZWxmLm5leHRQYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoc2VsZi5uYXYubmV4dCAhPT0gLTEpIHtcbiAgICAgICAgc2VsZi5zZWFyY2goc2VsZi5uYXYubmV4dCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBzZWxmLnByZXZQYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoc2VsZi5uYXYucHJldiAhPT0gLTEpIHtcbiAgICAgICAgc2VsZi5zZWFyY2goc2VsZi5uYXYucHJldik7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBodG1sIGZvciBvbmUgcmVzdWx0XG4gICAgICogQHBhcmFtIHVybCA6IChzdHJpbmcpIHVybFxuICAgICAqIEBwYXJhbSB0aXRsZSA6IChzdHJpbmcpIHRpdGxlXG4gICAgICogQHBhcmFtIGRpZ2VzdCA6IChzdHJpbmcpIGRpZ2VzdFxuICAgICAqL1xuICAgIHNlbGYuYnVpbGRSZXN1bHQgPSBmdW5jdGlvbih1cmwsIHRpdGxlLCBkaWdlc3QpIHtcbiAgICAgIHZhciBodG1sID0gXCJcIjtcbiAgICAgIGh0bWwgPSBcIjxsaT5cIjtcbiAgICAgIGh0bWwgKz0gICBcIjxhIGNsYXNzPSdyZXN1bHQnIGhyZWY9J1wiICt1cmwrIFwiJz5cIjtcbiAgICAgIGh0bWwgKz0gICAgIFwiPHNwYW4gY2xhc3M9J3RpdGxlJz5cIiArdGl0bGUrIFwiPC9zcGFuPlwiO1xuICAgICAgaHRtbCArPSAgICAgXCI8c3BhbiBjbGFzcz0nZGlnZXN0Jz5cIiArZGlnZXN0KyBcIjwvc3Bhbj5cIjtcbiAgICAgIGh0bWwgKz0gICAgIFwiPHNwYW4gY2xhc3M9J2ljb24gaWNvbi1jaGV2cm9uLXRoaW4tcmlnaHQnPjwvc3Bhbj5cIjtcbiAgICAgIGh0bWwgKz0gICBcIjwvYT5cIjtcbiAgICAgIGh0bWwgKz0gXCI8L2xpPlwiO1xuICAgICAgcmV0dXJuIGh0bWw7XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBDbG9zZSB0aGUgbW9kYWwsIHJlc3VtZSBib2R5IHNjcm9sbGluZ1xuICAgICAqIG5vIHBhcmFtXG4gICAgICovXG4gICAgc2VsZi5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5vcGVuID0gZmFsc2U7XG4gICAgICBzZWxmLmRvbS5jb250YWluZXIuZmFkZU91dCgpO1xuICAgICAgc2VsZi5kb20uYm9keS5yZW1vdmVDbGFzcygnbW9kYWwtYWN0aXZlJyk7XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBTZWFyY2hmb3JtIHN1Ym1pdCBldmVudCBoYW5kbGVyXG4gICAgICogQHBhcmFtIHF1ZXJ5VGV4dCA6IChzdHJpbmcpIHRoZSBxdWVyeSB0ZXh0XG4gICAgICovXG4gICAgc2VsZi5vblN1Ym1pdCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgc2VsZi5xdWVyeVRleHQgPSAkKHRoaXMpLmZpbmQoJy51LXNlYXJjaC1pbnB1dCcpLnZhbCgpO1xuICAgICAgaWYgKHNlbGYucXVlcnlUZXh0KSB7XG4gICAgICAgIHNlbGYuc2VhcmNoKDEpO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgLyoqXG4gICAgICogU3RhcnQgbG9hZGluZyBiYXIgYW5pbWF0aW9uXG4gICAgICogbm8gcGFyYW1cbiAgICAgKi9cbiAgICBzZWxmLnN0YXJ0TG9hZGluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5kb20ubW9kYWxfbG9hZGluZ19iYXIuc2hvdygpO1xuICAgICAgc2VsZi5sb2FkaW5nVGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsgXG4gICAgICAgIHNlbGYucGVyY2VudExvYWRlZCA9IE1hdGgubWluKHNlbGYucGVyY2VudExvYWRlZCs1LDk1KTtcbiAgICAgICAgc2VsZi5kb20ubW9kYWxfbG9hZGluZ19iYXIuY3NzKCd3aWR0aCcsIHNlbGYucGVyY2VudExvYWRlZCsnJScpO1xuICAgICAgfSwgMTAwKTtcbiAgICB9O1xuICAgIFxuICAgIC8qKlxuICAgICAqIFN0b3AgbG9hZGluZyBiYXIgYW5pbWF0aW9uXG4gICAgICogbm8gcGFyYW1cbiAgICAgKi9cbiAgICBzZWxmLnN0b3BMb2FkaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICBjbGVhckludGVydmFsKHNlbGYubG9hZGluZ1RpbWVyKTtcbiAgICAgIHNlbGYuZG9tLm1vZGFsX2xvYWRpbmdfYmFyLmNzcygnd2lkdGgnLCAnMTAwJScpO1xuICAgICAgc2VsZi5kb20ubW9kYWxfbG9hZGluZ19iYXIuZmFkZU91dCgpO1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi5wZXJjZW50TG9hZGVkID0gMDtcbiAgICAgICAgc2VsZi5kb20ubW9kYWxfbG9hZGluZ19iYXIuY3NzKCd3aWR0aCcsICcwJScpO1xuICAgICAgfSwgMzAwKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWRkIHNlcnZpY2UgYnJhbmRpbmdcbiAgICAgKiBAcGFyYW0gc2VydmljZSB7U3RyaW5nfSBzZXJ2aWNlIG5hbWVcbiAgICAgKi9cbiAgICBzZWxmLmFkZExvZ28gPSBmdW5jdGlvbihzZXJ2aWNlKSB7XG4gICAgICB2YXIgaHRtbCA9IFwiXCI7XG4gICAgICBpZiAoc2VsZi5jb25maWcuYnJhbmRzW3NlcnZpY2VdICYmIHNlbGYuY29uZmlnLmJyYW5kc1tzZXJ2aWNlXS5sb2dvKSB7XG4gICAgICAgIGh0bWwgKz0gXCI8YSBocmVmPSdcIiArc2VsZi5jb25maWcuYnJhbmRzW3NlcnZpY2VdLnVybCsgXCInIGNsYXNzPSdcIiArc2VydmljZSsgXCInPlwiO1xuICAgICAgICBodG1sICs9ICAgICc8aW1nIHNyYz1cIicgK3NlbGYuY29uZmlnLmltYWdlUGF0aCtzZWxmLmNvbmZpZy5icmFuZHNbc2VydmljZV0ubG9nbysgJ1wiIC8+JztcbiAgICAgICAgaHRtbCArPSBcIjwvYT5cIjtcbiAgICAgICAgc2VsZi5kb20ubW9kYWxfbG9nby5odG1sKGh0bWwpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBzZWxmLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuZG9tLmZvcm0uZWFjaChmdW5jdGlvbihpbmRleCxlbGVtKSB7XG4gICAgICAgICQoZWxlbSkub2ZmKCdzdWJtaXQnKTtcbiAgICAgIH0pO1xuICAgICAgc2VsZi5kb20ubW9kYWxfb3ZlcmxheS5vZmYoJ2NsaWNrJyk7XG4gICAgICBzZWxmLmRvbS5idG5fY2xvc2Uub2ZmKCdjbGljaycpO1xuICAgICAgc2VsZi5kb20uYnRuX25leHQub2ZmKCdjbGljaycpO1xuICAgICAgc2VsZi5kb20uYnRuX3ByZXYub2ZmKCdjbGljaycpO1xuICAgICAgc2VsZi5kb20uY29udGFpbmVyLnJlbW92ZSgpO1xuICAgIH07XG4gICAgXG4gICAgLyoqXG4gICAgICogTG9hZCB0ZW1wbGF0ZSBhbmQgcmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnNcbiAgICAgKiBubyBwYXJhbVxuICAgICAqL1xuICAgIHNlbGYuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgJCgnYm9keScpLmFwcGVuZCh0ZW1wbGF0ZSk7XG4gICAgICBzZWxmLnBhcnNlU2VsZWN0b3JzKCk7XG4gICAgICBzZWxmLmRvbS5tb2RhbF9mb290ZXIuc2hvdygpO1xuICAgICAgc2VsZi5kb20uZm9ybS5lYWNoKGZ1bmN0aW9uKGluZGV4LGVsZW0pIHtcbiAgICAgICAgJChlbGVtKS5vbignc3VibWl0Jywgc2VsZi5vblN1Ym1pdCk7XG4gICAgICB9KTtcbiAgICAgIHNlbGYuZG9tLm1vZGFsX292ZXJsYXkub24oJ2NsaWNrJywgc2VsZi5jbG9zZSk7XG4gICAgICBzZWxmLmRvbS5idG5fY2xvc2Uub24oJ2NsaWNrJywgc2VsZi5jbG9zZSk7XG4gICAgICBzZWxmLmRvbS5idG5fbmV4dC5vbignY2xpY2snLCBzZWxmLm5leHRQYWdlKTtcbiAgICAgIHNlbGYuZG9tLmJ0bl9wcmV2Lm9uKCdjbGljaycsIHNlbGYucHJldlBhZ2UpO1xuICAgIH07XG5cbiAgICBzZWxmLmluaXQoKTtcbiAgfTtcblxuICB2YXIgdGVtcGxhdGUgPSAnPGRpdiBpZD1cInUtc2VhcmNoXCI+PGRpdiBjbGFzcz1cIm1vZGFsXCI+IDxoZWFkZXIgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIiBjbGFzcz1cImNsZWFyZml4XCI+PGZvcm0gaWQ9XCJ1LXNlYXJjaC1tb2RhbC1mb3JtXCIgY2xhc3M9XCJ1LXNlYXJjaC1mb3JtXCIgbmFtZT1cInVTZWFyY2hNb2RhbEZvcm1cIj4gPGlucHV0IHR5cGU9XCJ0ZXh0XCIgaWQ9XCJ1LXNlYXJjaC1tb2RhbC1pbnB1dFwiIGNsYXNzPVwidS1zZWFyY2gtaW5wdXRcIiAvPiA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBpZD1cInUtc2VhcmNoLW1vZGFsLWJ0bi1zdWJtaXRcIiBjbGFzcz1cInUtc2VhcmNoLWJ0bi1zdWJtaXRcIj4gPHNwYW4gY2xhc3M9XCJpY29uIGljb24tc2VhcmNoXCI+PC9zcGFuPiA8L2J1dHRvbj48L2Zvcm0+IDxhIGNsYXNzPVwiYnRuLWNsb3NlXCI+IDxzcGFuIGNsYXNzPVwiaWNvbiBpY29uLWNsb3NlXCI+PC9zcGFuPiA8L2E+PGRpdiBjbGFzcz1cIm1vZGFsLWxvYWRpbmdcIj48ZGl2IGNsYXNzPVwibW9kYWwtbG9hZGluZy1iYXJcIj48L2Rpdj48L2Rpdj4gPC9oZWFkZXI+IDxtYWluIGNsYXNzPVwibW9kYWwtYm9keVwiPjx1bCBjbGFzcz1cIm1vZGFsLXJlc3VsdHMgbW9kYWwtYWpheC1jb250ZW50XCI+PC91bD4gPC9tYWluPiA8Zm9vdGVyIGNsYXNzPVwibW9kYWwtZm9vdGVyIGNsZWFyZml4XCI+PGRpdiBjbGFzcz1cIm1vZGFsLW1ldGFkYXRhIG1vZGFsLWFqYXgtY29udGVudFwiPiA8c3Ryb25nIGNsYXNzPVwicmFuZ2VcIj48L3N0cm9uZz4gb2YgPHN0cm9uZyBjbGFzcz1cInRvdGFsXCI+PC9zdHJvbmc+PC9kaXY+PGRpdiBjbGFzcz1cIm1vZGFsLWVycm9yXCI+PC9kaXY+IDxkaXYgY2xhc3M9XCJsb2dvXCI+PC9kaXY+IDxhIGNsYXNzPVwibmF2IGJ0bi1uZXh0IG1vZGFsLWFqYXgtY29udGVudFwiPiA8c3BhbiBjbGFzcz1cInRleHRcIj5ORVhUPC9zcGFuPiA8c3BhbiBjbGFzcz1cImljb24gaWNvbi1jaGV2cm9uLXJpZ2h0XCI+PC9zcGFuPiA8L2E+IDxhIGNsYXNzPVwibmF2IGJ0bi1wcmV2IG1vZGFsLWFqYXgtY29udGVudFwiPiA8c3BhbiBjbGFzcz1cImljb24gaWNvbi1jaGV2cm9uLWxlZnRcIj48L3NwYW4+IDxzcGFuIGNsYXNzPVwidGV4dFwiPlBSRVY8L3NwYW4+IDwvYT4gPC9mb290ZXI+PC9kaXY+PGRpdiBjbGFzcz1cIm1vZGFsLW92ZXJsYXlcIj48L2Rpdj48L2Rpdj4nO1xufSkoalF1ZXJ5KTtcblxudmFyIEFsZ29saWFTZWFyY2g7XG5cbihmdW5jdGlvbigkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgICogU2VhcmNoIGJ5IEFsZ29saWEgU2VhcmNoXG4gICAqIEBwYXJhbSBvcHRpb25zIDogKG9iamVjdClcbiAgICovXG4gIEFsZ29saWFTZWFyY2ggPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgU2VhcmNoU2VydmljZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZW5kcG9pbnQgPSBcImh0dHBzOi8vXCIgK3NlbGYuY29uZmlnLmFwcElkKyBcIi1kc24uYWxnb2xpYS5uZXQvMS9pbmRleGVzL1wiICtzZWxmLmNvbmZpZy5pbmRleE5hbWU7XG4gICAgc2VsZi5hZGRMb2dvKCdhbGdvbGlhJyk7XG4gICAgXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgcmVzdWx0IGxpc3QgaHRtbFxuICAgICAqIEBwYXJhbSBkYXRhIDogKGFycmF5KSByZXN1bHQgaXRlbXNcbiAgICAgKi9cbiAgICBzZWxmLmJ1aWxkUmVzdWx0TGlzdCA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHZhciBodG1sID0gXCJcIjtcbiAgICAgICQuZWFjaChkYXRhLCBmdW5jdGlvbihpbmRleCwgcm93KSB7XG4gICAgICAgIHZhciB1cmwgPSByb3cucGVybWFsaW5rIHx8IHJvdy5wYXRoIHx8IFwiXCI7XG4gICAgICAgIGlmICghcm93LnBlcm1hbGluayAmJiByb3cucGF0aCkge1xuICAgICAgICAgIHVybCA9IFwiL1wiICsgdXJsO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aXRsZSA9IHJvdy50aXRsZTtcbiAgICAgICAgdmFyIGRpZ2VzdCA9IHJvdy5faGlnaGxpZ2h0UmVzdWx0LmV4Y2VycHRTdHJpcC52YWx1ZSB8fCBcIlwiO1xuICAgICAgICBodG1sICs9IHNlbGYuYnVpbGRSZXN1bHQodXJsLCB0aXRsZSwgZGlnZXN0KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGh0bWw7XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBtZXRhZGF0YSBhZnRlciBhIHN1Y2Nlc3NmdWwgcXVlcnlcbiAgICAgKiBAcGFyYW0gZGF0YSA6IChvYmplY3QpIHRoZSByYXcgc2VhcmNoIHJlc3BvbnNlIGRhdGFcbiAgICAgKi9cbiAgICBzZWxmLmJ1aWxkTWV0YWRhdGEgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBzZWxmLm5hdi5jdXJyZW50ID0gZGF0YS5wYWdlICogZGF0YS5oaXRzUGVyUGFnZSArIDE7XG4gICAgICBzZWxmLm5hdi5jdXJyZW50Q291bnQgPSBkYXRhLmhpdHMubGVuZ3RoO1xuICAgICAgc2VsZi5uYXYudG90YWwgPSBwYXJzZUludChkYXRhLm5iSGl0cyk7XG4gICAgICBzZWxmLmRvbS5tb2RhbF9tZXRhZGF0YS5jaGlsZHJlbignLnRvdGFsJykuaHRtbChzZWxmLm5hdi50b3RhbCk7XG4gICAgICBzZWxmLmRvbS5tb2RhbF9tZXRhZGF0YS5jaGlsZHJlbignLnJhbmdlJykuaHRtbChzZWxmLm5hdi5jdXJyZW50ICsgXCItXCIgKyAoc2VsZi5uYXYuY3VycmVudCtzZWxmLm5hdi5jdXJyZW50Q291bnQtMSkpO1xuICAgICAgaWYgKHNlbGYubmF2LnRvdGFsID4gMCkge1xuICAgICAgICBzZWxmLmRvbS5tb2RhbF9tZXRhZGF0YS5zaG93KCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgc2VsZi5kb20ubW9kYWxfbWV0YWRhdGEuaGlkZSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YS5wYWdlIDwgZGF0YS5uYlBhZ2VzLTEpIHtcbiAgICAgICAgc2VsZi5uYXYubmV4dCA9IChkYXRhLnBhZ2UrMSkrMTtcbiAgICAgICAgc2VsZi5kb20uYnRuX25leHQuc2hvdygpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHNlbGYubmF2Lm5leHQgPSAtMTtcbiAgICAgICAgc2VsZi5kb20uYnRuX25leHQuaGlkZSgpO1xuICAgICAgfVxuICAgICAgaWYgKGRhdGEucGFnZSA+IDApIHtcbiAgICAgICAgc2VsZi5uYXYucHJldiA9IChkYXRhLnBhZ2UrMSktMTtcbiAgICAgICAgc2VsZi5kb20uYnRuX3ByZXYuc2hvdygpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHNlbGYubmF2LnByZXYgPSAtMTtcbiAgICAgICAgc2VsZi5kb20uYnRuX3ByZXYuaGlkZSgpO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgLyoqXG4gICAgICogU2VuZCBhIEdFVCByZXF1ZXN0XG4gICAgICogQHBhcmFtIHF1ZXJ5VGV4dCA6IChzdHJpbmcpIHRoZSBxdWVyeSB0ZXh0XG4gICAgICogQHBhcmFtIHBhZ2UgOiAoaW50KSB0aGUgY3VycmVudCBwYWdlIChzdGFydCBmcm9tIDEpXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIDogKGZ1bmN0aW9uKVxuICAgICAqL1xuICAgIHNlbGYucXVlcnkgPSBmdW5jdGlvbihxdWVyeVRleHQsIHBhZ2UsIGNhbGxiYWNrKSB7XG4gICAgICAkLmdldChlbmRwb2ludCwge1xuICAgICAgICBxdWVyeTogcXVlcnlUZXh0LFxuICAgICAgICBwYWdlOiBwYWdlLTEsXG4gICAgICAgIGhpdHNQZXJQYWdlOiBzZWxmLmNvbmZpZy5wZXJfcGFnZSxcbiAgICAgICAgXCJ4LWFsZ29saWEtYXBwbGljYXRpb24taWRcIjogc2VsZi5jb25maWcuYXBwSWQsXG4gICAgICAgIFwieC1hbGdvbGlhLWFwaS1rZXlcIjogc2VsZi5jb25maWcuYXBpS2V5XG4gICAgICB9LCBmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ3N1Y2Nlc3MnICYmIGRhdGEuaGl0cyAmJiBkYXRhLmhpdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZhciByZXN1bHRzID0gc2VsZi5idWlsZFJlc3VsdExpc3QoZGF0YS5oaXRzKTsgXG4gICAgICAgICAgc2VsZi5kb20ubW9kYWxfcmVzdWx0cy5odG1sKHJlc3VsdHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHNlbGYub25RdWVyeUVycm9yKHF1ZXJ5VGV4dCwgc3RhdHVzKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmJ1aWxkTWV0YWRhdGEoZGF0YSk7XG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuICAgIFxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG59KShqUXVlcnkpO1xudmFyIEF6dXJlU2VhcmNoO1xuXG4oZnVuY3Rpb24oJCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLyoqXG4gICAqIFNlYXJjaCBieSBBenVyZSBTZWFyY2ggQVBJXG4gICAqIEBwYXJhbSBvcHRpb25zIDogKG9iamVjdClcbiAgICovXG4gIEF6dXJlU2VhcmNoID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIFNlYXJjaFNlcnZpY2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGVuZHBvaW50ID0gXCJodHRwczovL1wiICtzZWxmLmNvbmZpZy5zZXJ2aWNlTmFtZSsgXCIuc2VhcmNoLndpbmRvd3MubmV0L2luZGV4ZXMvXCIgK3NlbGYuY29uZmlnLmluZGV4TmFtZSsgXCIvZG9jcz9hcGktdmVyc2lvbj0yMDE1LTAyLTI4XCI7XG4gICAgc2VsZi5uYXYuY3VycmVudCA9IDE7XG4gICAgc2VsZi5hZGRMb2dvKCdhenVyZScpO1xuICAgIFxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIHJlc3VsdCBsaXN0IGh0bWxcbiAgICAgKiBAcGFyYW0gZGF0YSA6IChhcnJheSkgcmVzdWx0IGl0ZW1zXG4gICAgICovXG4gICAgc2VsZi5idWlsZFJlc3VsdExpc3QgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICB2YXIgaHRtbCA9IFwiXCI7XG4gICAgICAkLmVhY2goZGF0YSwgZnVuY3Rpb24oaW5kZXgsIHJvdykge1xuICAgICAgICB2YXIgdXJsID0gcm93LnBlcm1hbGluayB8fCByb3cucGF0aCB8fCBcIlwiO1xuICAgICAgICBpZiAoIXJvdy5wZXJtYWxpbmsgJiYgcm93LnBhdGgpIHtcbiAgICAgICAgICB1cmwgPSBcIi9cIiArIHVybDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGl0bGUgPSByb3cudGl0bGU7XG4gICAgICAgIHZhciBkaWdlc3QgPSByb3cuZXhjZXJwdFN0cmlwIHx8IFwiXCI7XG4gICAgICAgIGh0bWwgKz0gc2VsZi5idWlsZFJlc3VsdCh1cmwsIHRpdGxlLCBkaWdlc3QpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gaHRtbDtcbiAgICB9O1xuICAgIFxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIG1ldGFkYXRhIGFmdGVyIGEgc3VjY2Vzc2Z1bCBxdWVyeVxuICAgICAqIEBwYXJhbSBkYXRhIDogKG9iamVjdCkgdGhlIHJhdyByZXNwb25zZSBkYXRhXG4gICAgICogQHBhcmFtIHN0YXJ0SW5kZXggOiAoaW50KSByZXF1ZXN0ZWQgc3RhcnQgaW5kZXggb2YgY3VycmVudCBxdWVyeVxuICAgICAqL1xuICAgIHNlbGYuYnVpbGRNZXRhZGF0YSA9IGZ1bmN0aW9uKGRhdGEsIHN0YXJ0SW5kZXgpIHtcbiAgICAgIHNlbGYubmF2LmN1cnJlbnQgPSBzdGFydEluZGV4O1xuICAgICAgc2VsZi5uYXYuY3VycmVudENvdW50ID0gZGF0YS52YWx1ZS5sZW5ndGg7XG4gICAgICBzZWxmLm5hdi50b3RhbCA9IHBhcnNlSW50KGRhdGFbJ0BvZGF0YS5jb3VudCddKTtcbiAgICAgIHNlbGYuZG9tLm1vZGFsX21ldGFkYXRhLmNoaWxkcmVuKCcudG90YWwnKS5odG1sKHNlbGYubmF2LnRvdGFsKTtcbiAgICAgIHNlbGYuZG9tLm1vZGFsX21ldGFkYXRhLmNoaWxkcmVuKCcucmFuZ2UnKS5odG1sKHNlbGYubmF2LmN1cnJlbnQgKyBcIi1cIiArIChzZWxmLm5hdi5jdXJyZW50K3NlbGYubmF2LmN1cnJlbnRDb3VudC0xKSk7XG4gICAgICBpZiAoc2VsZi5uYXYudG90YWwgPiAwKSB7XG4gICAgICAgIHNlbGYuZG9tLm1vZGFsX21ldGFkYXRhLnNob3coKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBzZWxmLmRvbS5tb2RhbF9tZXRhZGF0YS5oaWRlKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzZWxmLm5hdi5jdXJyZW50K3NlbGYubmF2LmN1cnJlbnRDb3VudCA8PSBzZWxmLm5hdi50b3RhbCkge1xuICAgICAgICBzZWxmLm5hdi5uZXh0ID0gc2VsZi5uYXYuY3VycmVudCtzZWxmLm5hdi5jdXJyZW50Q291bnQ7XG4gICAgICAgIHNlbGYuZG9tLmJ0bl9uZXh0LnNob3coKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBzZWxmLm5hdi5uZXh0ID0gLTE7XG4gICAgICAgIHNlbGYuZG9tLmJ0bl9uZXh0LmhpZGUoKTtcbiAgICAgIH1cbiAgICAgIGlmIChzZWxmLm5hdi5jdXJyZW50ID4gMSkge1xuICAgICAgICBzZWxmLm5hdi5wcmV2ID0gc2VsZi5uYXYuY3VycmVudC1zZWxmLmNvbmZpZy5wZXJfcGFnZTtcbiAgICAgICAgc2VsZi5kb20uYnRuX3ByZXYuc2hvdygpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHNlbGYubmF2LnByZXYgPSAtMTtcbiAgICAgICAgc2VsZi5kb20uYnRuX3ByZXYuaGlkZSgpO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgLyoqXG4gICAgICogU2VuZCBhIEdFVCByZXF1ZXN0XG4gICAgICogQHBhcmFtIHF1ZXJ5VGV4dCA6IChzdHJpbmcpIHRoZSBxdWVyeSB0ZXh0XG4gICAgICogQHBhcmFtIHBhZ2UgOiAoaW50KSB0aGUgY3VycmVudCBwYWdlIChzdGFydCBmcm9tIDEpXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIDogKGZ1bmN0aW9uKVxuICAgICAqL1xuICAgIHNlbGYucXVlcnkgPSBmdW5jdGlvbihxdWVyeVRleHQsIHN0YXJ0SW5kZXgsIGNhbGxiYWNrKSB7XG4gICAgICAkLmFqYXgoe1xuICAgICAgICB1cmw6IGVuZHBvaW50LFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJBY2NlcHRcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgXCJhcGkta2V5XCI6IHNlbGYuY29uZmlnLnF1ZXJ5S2V5XG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBzZWFyY2g6IHF1ZXJ5VGV4dCxcbiAgICAgICAgICAkc2tpcDogc3RhcnRJbmRleC0xLFxuICAgICAgICAgICR0b3A6IHNlbGYuY29uZmlnLnBlcl9wYWdlLFxuICAgICAgICAgICRjb3VudDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBcIkdFVFwiLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICBpZiAoc3RhdHVzID09PSAnc3VjY2VzcycgJiYgZGF0YS52YWx1ZSAmJiBkYXRhLnZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciByZXN1bHRzID0gc2VsZi5idWlsZFJlc3VsdExpc3QoZGF0YS52YWx1ZSk7XG4gICAgICAgICAgICBzZWxmLmRvbS5tb2RhbF9yZXN1bHRzLmh0bWwocmVzdWx0cyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5vblF1ZXJ5RXJyb3IocXVlcnlUZXh0LCBzdGF0dXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZWxmLmJ1aWxkTWV0YWRhdGEoZGF0YSwgc3RhcnRJbmRleCk7XG4gICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxufSkoalF1ZXJ5KTtcbnZhciBCYWlkdVNlYXJjaDtcblxuKGZ1bmN0aW9uKCQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKlxuICAgKiBUT0RPXG4gICAqIFNlYXJjaCBieSBCYWlkdSBTZWFyY2ggQVBJXG4gICAqIEBwYXJhbSBvcHRpb25zIDogKG9iamVjdClcbiAgICovXG4gIEJhaWR1U2VhcmNoID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIFNlYXJjaFNlcnZpY2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGVuZHBvaW50ID0gXCJcIjtcbiAgICBzZWxmLmFkZExvZ28oJ2JhaWR1Jyk7XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSByZXN1bHQgbGlzdCBodG1sXG4gICAgICogQHBhcmFtIGRhdGEgOiAoYXJyYXkpIHJlc3VsdCBpdGVtc1xuICAgICAqL1xuICAgIHNlbGYuYnVpbGRSZXN1bHRMaXN0ID0gZnVuY3Rpb24oZGF0YSwgcXVlcnlUZXh0KSB7XG4gICAgICB2YXIgcmVzdWx0cyA9IFtdLFxuICAgICAgICAgIGh0bWwgPSBcIlwiO1xuICAgICAgJC5lYWNoKGRhdGEsIGZ1bmN0aW9uKGluZGV4LCBwb3N0KSB7XG4gICAgICAgIGlmIChzZWxmLmNvbnRlbnRTZWFyY2gocG9zdCwgcXVlcnlUZXh0KSlcbiAgICAgICAgICBodG1sICs9IHNlbGYuYnVpbGRSZXN1bHQocG9zdC5saW5rVXJsLCBwb3N0LnRpdGxlLCBwb3N0LmFic3RyYWN0KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGh0bWw7XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBtZXRhZGF0YSBhZnRlciBhIHN1Y2Nlc3NmdWwgcXVlcnlcbiAgICAgKiBAcGFyYW0gZGF0YSA6IChvYmplY3QpIHRoZSByYXcgZ29vZ2xlIGN1c3RvbSBzZWFyY2ggcmVzcG9uc2UgZGF0YVxuICAgICAqL1xuICAgIHNlbGYuYnVpbGRNZXRhZGF0YSA9IGZ1bmN0aW9uKGRhdGEpIHtcblxuICAgIH07XG5cbiAgICBzZWxmLmxvYWRTY3JpcHQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuZG9tLmlucHV0LmVhY2goZnVuY3Rpb24oaW5kZXgsZWxlbSkge1xuICAgICAgICAkKGVsZW0pLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICB9KTtcbiAgICAgIHZhciBzY3JpcHQgPSBcIjxzY3JpcHQgc3JjPSdodHRwOi8vemhhbm5laS5iYWlkdS5jb20vYXBpL2N1c3RvbXNlYXJjaC9hcGlhY2NlcHQ/c2lkPVwiICtzZWxmLmNvbmZpZy5hcGlJZCsgXCImdj0yLjAmY2FsbGJhY2s9Y3VzdG9tU2VhcmNoLmluaXRCYWlkdScgdHlwZT0ndGV4dC9qYXZhc2NyaXB0JyBjaGFyc2V0PSd1dGYtOCc+PC9zY3JpcHQ+XCI7XG4gICAgICBzZWxmLmRvbS5ib2R5LmFwcGVuZChzY3JpcHQpO1xuICAgIH07XG5cbiAgICBzZWxmLmluaXRCYWlkdSA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5jc2UgPSBuZXcgQkNzZS5TZWFyY2goc2VsZi5jb25maWcuYXBpSWQpO1xuICAgICAgLy9zZWxmLmNzZS5zZXRQYWdlTnVtKHNlbGYuY29uZmlnLnBlcl9wYWdlKTtcbiAgICAgIHNlbGYuZG9tLmlucHV0LmVhY2goZnVuY3Rpb24oaW5kZXgsZWxlbSkge1xuICAgICAgICAkKGVsZW0pLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEdldCBzZWFyY2ggcmVzdWx0c1xuICAgICAqIEBwYXJhbSBxdWVyeVRleHQge1N0cmluZ31cbiAgICAgKiBAcGFyYW0gcGFnZSB7SW50ZWdlcn1cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sge0Z1bmN0aW9ufVxuICAgICAqL1xuICAgIHNlbGYucXVlcnkgPSBmdW5jdGlvbihxdWVyeVRleHQsIHBhZ2UsIGNhbGxiYWNrKSB7XG4gICAgICBzZWxmLmNzZS5nZXRSZXN1bHQocXVlcnlUZXh0LCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiU2VhcmNoaW5nOiBcIiArIHF1ZXJ5VGV4dCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICBzZWxmLmNzZS5nZXRFcnJvcihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgc2VsZi5idWlsZFJlc3VsdExpc3QoZGF0YSwgcXVlcnlUZXh0KTtcbiAgICAgICAgICBzZWxmLmNzZS5nZXRTZWFyY2hJbmZvKHF1ZXJ5VGV4dCwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICBzZWxmLmJ1aWxkTWV0YWRhdGEoZGF0YSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgc2VsZi5uYXYudG90YWwgPSAwO1xuICAgICAgICAgIHNlbGYubmF2Lm5leHQgPSAtMTtcbiAgICAgICAgICBzZWxmLm5hdi5wcmV2ID0gLTE7XG4gICAgICAgICAgc2VsZi5kb20ubW9kYWxfbWV0YWRhdGEuaGlkZSgpO1xuICAgICAgICAgIHNlbGYuZG9tLmJ0bl9uZXh0LmhpZGUoKTtcbiAgICAgICAgICBzZWxmLmRvbS5idG5fcHJldi5oaWRlKCk7XG4gICAgICAgICAgc2VsZi5vblF1ZXJ5RXJyb3IocXVlcnlUZXh0LCBcInN1Y2Nlc3NcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgc2VsZi5sb2FkU2NyaXB0KCk7XG4gICAgXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbn0pKGpRdWVyeSk7XG52YXIgR29vZ2xlQ3VzdG9tU2VhcmNoID0gXCJcIjtcblxuKGZ1bmN0aW9uKCQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBcbiAgLyoqXG4gICAqIFNlYXJjaCBieSBHb29nbGUgQ3VzdG9tIFNlYXJjaCBFbmdpbmUgSlNPTiBBUElcbiAgICogQHBhcmFtIG9wdGlvbnMgOiAob2JqZWN0KVxuICAgKi9cbiAgR29vZ2xlQ3VzdG9tU2VhcmNoID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIFNlYXJjaFNlcnZpY2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGVuZHBvaW50ID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9jdXN0b21zZWFyY2gvdjFcIjtcbiAgICBzZWxmLmFkZExvZ28oJ2dvb2dsZScpO1xuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgcmVzdWx0IGxpc3QgaHRtbFxuICAgICAqIEBwYXJhbSBkYXRhIDogKGFycmF5KSByZXN1bHQgaXRlbXNcbiAgICAgKi9cbiAgICBzZWxmLmJ1aWxkUmVzdWx0TGlzdCA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHZhciBodG1sID0gXCJcIjtcbiAgICAgICQuZWFjaChkYXRhLCBmdW5jdGlvbihpbmRleCwgcm93KSB7XG4gICAgICAgIHZhciB1cmwgPSByb3cubGluaztcbiAgICAgICAgdmFyIHRpdGxlID0gcm93LnRpdGxlO1xuICAgICAgICB2YXIgZGlnZXN0ID0gKHJvdy5odG1sU25pcHBldCB8fCBcIlwiKS5yZXBsYWNlKCc8YnI+JywnJyk7XG4gICAgICAgIGh0bWwgKz0gc2VsZi5idWlsZFJlc3VsdCh1cmwsIHRpdGxlLCBkaWdlc3QpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gaHRtbDtcbiAgICB9O1xuICAgIFxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIG1ldGFkYXRhIGFmdGVyIGEgc3VjY2Vzc2Z1bCBxdWVyeVxuICAgICAqIEBwYXJhbSBkYXRhIDogKG9iamVjdCkgdGhlIHJhdyBnb29nbGUgY3VzdG9tIHNlYXJjaCByZXNwb25zZSBkYXRhXG4gICAgICovXG4gICAgc2VsZi5idWlsZE1ldGFkYXRhID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgaWYgKGRhdGEucXVlcmllcyAmJiBkYXRhLnF1ZXJpZXMucmVxdWVzdCAmJiBkYXRhLnF1ZXJpZXMucmVxdWVzdFswXS50b3RhbFJlc3VsdHMgIT09ICcwJykge1xuICAgICAgICBzZWxmLm5hdi5jdXJyZW50ID0gZGF0YS5xdWVyaWVzLnJlcXVlc3RbMF0uc3RhcnRJbmRleDtcbiAgICAgICAgc2VsZi5uYXYuY3VycmVudENvdW50ID0gZGF0YS5xdWVyaWVzLnJlcXVlc3RbMF0uY291bnQ7XG4gICAgICAgIHNlbGYubmF2LnRvdGFsID0gcGFyc2VJbnQoZGF0YS5xdWVyaWVzLnJlcXVlc3RbMF0udG90YWxSZXN1bHRzKTtcbiAgICAgICAgc2VsZi5kb20ubW9kYWxfbWV0YWRhdGEuY2hpbGRyZW4oJy50b3RhbCcpLmh0bWwoc2VsZi5uYXYudG90YWwpO1xuICAgICAgICBzZWxmLmRvbS5tb2RhbF9tZXRhZGF0YS5jaGlsZHJlbignLnJhbmdlJykuaHRtbChzZWxmLm5hdi5jdXJyZW50ICsgXCItXCIgKyAoc2VsZi5uYXYuY3VycmVudCtzZWxmLm5hdi5jdXJyZW50Q291bnQtMSkpO1xuICAgICAgICBzZWxmLmRvbS5tb2RhbF9tZXRhZGF0YS5zaG93KCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgc2VsZi5kb20ubW9kYWxfbWV0YWRhdGEuaGlkZSgpO1xuICAgICAgfVxuICAgICAgaWYgKGRhdGEucXVlcmllcyAmJiBkYXRhLnF1ZXJpZXMubmV4dFBhZ2UpIHtcbiAgICAgICAgc2VsZi5uYXYubmV4dCA9IGRhdGEucXVlcmllcy5uZXh0UGFnZVswXS5zdGFydEluZGV4O1xuICAgICAgICBzZWxmLmRvbS5idG5fbmV4dC5zaG93KCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgc2VsZi5uYXYubmV4dCA9IC0xO1xuICAgICAgICBzZWxmLmRvbS5idG5fbmV4dC5oaWRlKCk7XG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5xdWVyaWVzICYmIGRhdGEucXVlcmllcy5wcmV2aW91c1BhZ2UpIHtcbiAgICAgICAgc2VsZi5uYXYucHJldiA9IGRhdGEucXVlcmllcy5wcmV2aW91c1BhZ2VbMF0uc3RhcnRJbmRleDtcbiAgICAgICAgc2VsZi5kb20uYnRuX3ByZXYuc2hvdygpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHNlbGYubmF2LnByZXYgPSAtMTtcbiAgICAgICAgc2VsZi5kb20uYnRuX3ByZXYuaGlkZSgpO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgLyoqXG4gICAgICogU2VuZCBhIEdFVCByZXF1ZXN0XG4gICAgICogQHBhcmFtIHF1ZXJ5VGV4dCA6IChzdHJpbmcpIHRoZSBxdWVyeSB0ZXh0XG4gICAgICogQHBhcmFtIHN0YXJ0SW5kZXggOiAoaW50KSB0aGUgaW5kZXggb2YgZmlyc3QgaXRlbSAoc3RhcnQgZnJvbSAxKVxuICAgICAqIEBwYXJhbSBjYWxsYmFjayA6IChmdW5jdGlvbilcbiAgICAgKi9cbiAgICBzZWxmLnF1ZXJ5ID0gZnVuY3Rpb24ocXVlcnlUZXh0LCBzdGFydEluZGV4LCBjYWxsYmFjaykge1xuICAgICAgJC5nZXQoZW5kcG9pbnQsIHtcbiAgICAgICAga2V5OiBzZWxmLmNvbmZpZy5hcGlLZXksXG4gICAgICAgIGN4OiBzZWxmLmNvbmZpZy5lbmdpbmVJZCxcbiAgICAgICAgcTogcXVlcnlUZXh0LFxuICAgICAgICBzdGFydDogc3RhcnRJbmRleCxcbiAgICAgICAgbnVtOiBzZWxmLmNvbmZpZy5wZXJfcGFnZVxuICAgICAgfSwgZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgIGlmIChzdGF0dXMgPT09ICdzdWNjZXNzJyAmJiBkYXRhLml0ZW1zICYmIGRhdGEuaXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZhciByZXN1bHRzID0gc2VsZi5idWlsZFJlc3VsdExpc3QoZGF0YS5pdGVtcyk7IFxuICAgICAgICAgIHNlbGYuZG9tLm1vZGFsX3Jlc3VsdHMuaHRtbChyZXN1bHRzKTsgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgc2VsZi5vblF1ZXJ5RXJyb3IocXVlcnlUZXh0LCBzdGF0dXMpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuYnVpbGRNZXRhZGF0YShkYXRhKTtcbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcbn0pKGpRdWVyeSk7XG52YXIgSGV4b1NlYXJjaDtcblxuKGZ1bmN0aW9uKCQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBcbiAgLyoqXG4gICogU2VhcmNoIGJ5IEhleG8gZ2VuZXJhdG9yIGpzb24gY29udGVudFxuICAqIEBwYXJhbSBvcHRpb25zIDogKG9iamVjdClcbiAgKi9cbiAgSGV4b1NlYXJjaCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICBTZWFyY2hTZXJ2aWNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYuY29uZmlnLmVuZHBvaW50ID0gKG9wdGlvbnN8fHt9KS5lbmRwb2ludCB8fCBcIi9jb250ZW50Lmpzb25cIjtcbiAgICBzZWxmLmNhY2hlID0gXCJcIjtcbiAgICBcbiAgICAvKipcbiAgICAgKiBTZWFyY2ggcXVlcnlUZXh0IGluIHRpdGxlIGFuZCBjb250ZW50IG9mIGEgcG9zdFxuICAgICAqIENyZWRpdCB0bzogaHR0cDovL2hhaGFjay5jb20vY29kZXMvbG9jYWwtc2VhcmNoLWVuZ2luZS1mb3ItaGV4by9cbiAgICAgKiBAcGFyYW0gcG9zdCA6IHRoZSBwb3N0IG9iamVjdFxuICAgICAqIEBwYXJhbSBxdWVyeVRleHQgOiB0aGUgc2VhcmNoIHF1ZXJ5XG4gICAgICovXG4gICAgc2VsZi5jb250ZW50U2VhcmNoID0gZnVuY3Rpb24ocG9zdCwgcXVlcnlUZXh0KSB7XG4gICAgICB2YXIgcG9zdF90aXRsZSA9IHBvc3QudGl0bGUudHJpbSgpLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgcG9zdF9jb250ZW50ID0gcG9zdC50ZXh0LnRyaW0oKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgIGtleXdvcmRzID0gcXVlcnlUZXh0LnRyaW0oKS50b0xvd2VyQ2FzZSgpLnNwbGl0KFwiIFwiKSxcbiAgICAgICAgICBmb3VuZE1hdGNoID0gZmFsc2UsXG4gICAgICAgICAgaW5kZXhfdGl0bGUgPSAtMSxcbiAgICAgICAgICBpbmRleF9jb250ZW50ID0gLTEsXG4gICAgICAgICAgZmlyc3Rfb2NjdXIgPSAtMTtcbiAgICAgIGlmIChwb3N0X3RpdGxlICE9PSAnJyAmJiBwb3N0X2NvbnRlbnQgIT09ICcnKSB7XG4gICAgICAgICQuZWFjaChrZXl3b3JkcywgZnVuY3Rpb24oaW5kZXgsIHdvcmQpIHtcbiAgICAgICAgICBpbmRleF90aXRsZSA9IHBvc3RfdGl0bGUuaW5kZXhPZih3b3JkKTtcbiAgICAgICAgICBpbmRleF9jb250ZW50ID0gcG9zdF9jb250ZW50LmluZGV4T2Yod29yZCk7XG4gICAgICAgICAgaWYgKGluZGV4X3RpdGxlIDwgMCAmJiBpbmRleF9jb250ZW50IDwgMCkge1xuICAgICAgICAgICAgZm91bmRNYXRjaCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvdW5kTWF0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGluZGV4X2NvbnRlbnQgPCAwKSB7XG4gICAgICAgICAgICAgIGluZGV4X2NvbnRlbnQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgIGZpcnN0X29jY3VyID0gaW5kZXhfY29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGZvdW5kTWF0Y2gpIHtcbiAgICAgICAgICAgIHBvc3RfY29udGVudCA9IHBvc3QudGV4dC50cmltKCk7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSAwLCBlbmQgPSAwO1xuICAgICAgICAgICAgaWYgKGZpcnN0X29jY3VyID49IDApIHtcbiAgICAgICAgICAgICAgc3RhcnQgPSBNYXRoLm1heChmaXJzdF9vY2N1ci0zMCwgMCk7XG4gICAgICAgICAgICAgIGVuZCA9IChzdGFydCA9PT0gMCkgPyBNYXRoLm1pbigyMDAsIHBvc3RfY29udGVudC5sZW5ndGgpIDogTWF0aC5taW4oZmlyc3Rfb2NjdXIrMTcwLCBwb3N0X2NvbnRlbnQubGVuZ3RoKTtcbiAgICAgICAgICAgICAgdmFyIG1hdGNoX2NvbnRlbnQgPSBwb3N0X2NvbnRlbnQuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpO1xuICAgICAgICAgICAgICBrZXl3b3Jkcy5mb3JFYWNoKGZ1bmN0aW9uKGtleXdvcmQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVnUyA9IG5ldyBSZWdFeHAoa2V5d29yZCwgXCJnaVwiKTtcbiAgICAgICAgICAgICAgICBtYXRjaF9jb250ZW50ID0gbWF0Y2hfY29udGVudC5yZXBsYWNlKHJlZ1MsIFwiPGI+XCIra2V5d29yZCtcIjwvYj5cIik7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBwb3N0LmRpZ2VzdCA9IG1hdGNoX2NvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgZW5kID0gTWF0aC5taW4oMjAwLCBwb3N0X2NvbnRlbnQubGVuZ3RoKTtcbiAgICAgICAgICAgICAgcG9zdC5kaWdlc3QgPSBwb3N0X2NvbnRlbnQudHJpbSgpLnN1YnN0cmluZygwLCBlbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZm91bmRNYXRjaDtcbiAgICB9O1xuICAgIFxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIHJlc3VsdCBsaXN0IGh0bWxcbiAgICAgKiBAcGFyYW0gZGF0YSA6IChhcnJheSkgcmVzdWx0IGl0ZW1zXG4gICAgICovXG4gICAgc2VsZi5idWlsZFJlc3VsdExpc3QgPSBmdW5jdGlvbihkYXRhLCBxdWVyeVRleHQpIHtcbiAgICAgIHZhciByZXN1bHRzID0gW10sXG4gICAgICAgICAgaHRtbCA9IFwiXCI7XG4gICAgICAkLmVhY2goZGF0YSwgZnVuY3Rpb24oaW5kZXgsIHBvc3QpIHtcbiAgICAgICAgaWYgKHNlbGYuY29udGVudFNlYXJjaChwb3N0LCBxdWVyeVRleHQpKVxuICAgICAgICAgIGh0bWwgKz0gc2VsZi5idWlsZFJlc3VsdChwb3N0LnBlcm1hbGluaywgcG9zdC50aXRsZSwgcG9zdC5kaWdlc3QpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gaHRtbDtcbiAgICB9O1xuICAgIFxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIG1ldGFkYXRhIGFmdGVyIGEgc3VjY2Vzc2Z1bCBxdWVyeVxuICAgICAqIEBwYXJhbSBkYXRhIDogKG9iamVjdCkgdGhlIHJhdyBnb29nbGUgY3VzdG9tIHNlYXJjaCByZXNwb25zZSBkYXRhXG4gICAgICovXG4gICAgc2VsZi5idWlsZE1ldGFkYXRhID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgc2VsZi5kb20ubW9kYWxfZm9vdGVyLmhpZGUoKTtcbiAgICB9O1xuICAgIFxuICAgIC8qKlxuICAgICAqIFNlbmQgYSBHRVQgcmVxdWVzdFxuICAgICAqIEBwYXJhbSBxdWVyeVRleHQgOiAoc3RyaW5nKSB0aGUgcXVlcnkgdGV4dFxuICAgICAqIEBwYXJhbSBzdGFydEluZGV4IDogKGludCkgdGhlIGluZGV4IG9mIGZpcnN0IGl0ZW0gKHN0YXJ0IGZyb20gMSlcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgOiAoZnVuY3Rpb24pXG4gICAgICovXG4gICAgc2VsZi5xdWVyeSA9IGZ1bmN0aW9uKHF1ZXJ5VGV4dCwgc3RhcnRJbmRleCwgY2FsbGJhY2spIHtcbiAgICAgIGlmICghc2VsZi5jYWNoZSkge1xuICAgICAgICAkLmdldChzZWxmLmNvbmZpZy5lbmRwb2ludCwge1xuICAgICAgICAgIGtleTogc2VsZi5jb25maWcuYXBpS2V5LFxuICAgICAgICAgIGN4OiBzZWxmLmNvbmZpZy5lbmdpbmVJZCxcbiAgICAgICAgICBxOiBxdWVyeVRleHQsXG4gICAgICAgICAgc3RhcnQ6IHN0YXJ0SW5kZXgsXG4gICAgICAgICAgbnVtOiBzZWxmLmNvbmZpZy5wZXJfcGFnZVxuICAgICAgICB9LCBmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICBpZiAoc3RhdHVzICE9PSAnc3VjY2VzcycgfHwgXG4gICAgICAgICAgICAgICFkYXRhIHx8IFxuICAgICAgICAgICAgICAoIWRhdGEucG9zdHMgJiYgIWRhdGEucGFnZXMpIHx8IFxuICAgICAgICAgICAgICAoZGF0YS5wb3N0cy5sZW5ndGggPCAxICYmIGRhdGEucGFnZXMubGVuZ3RoIDwgMSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgc2VsZi5vblF1ZXJ5RXJyb3IocXVlcnlUZXh0LCBzdGF0dXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYuY2FjaGUgPSBkYXRhO1xuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBcIlwiOyBcbiAgICAgICAgICAgIHJlc3VsdHMgKz0gc2VsZi5idWlsZFJlc3VsdExpc3QoZGF0YS5wYWdlcywgcXVlcnlUZXh0KTtcbiAgICAgICAgICAgIHJlc3VsdHMgKz0gc2VsZi5idWlsZFJlc3VsdExpc3QoZGF0YS5wb3N0cywgcXVlcnlUZXh0KTtcbiAgICAgICAgICAgIHNlbGYuZG9tLm1vZGFsX3Jlc3VsdHMuaHRtbChyZXN1bHRzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2VsZi5idWlsZE1ldGFkYXRhKGRhdGEpO1xuICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB2YXIgcmVzdWx0cyA9IFwiXCI7IFxuICAgICAgICByZXN1bHRzICs9IHNlbGYuYnVpbGRSZXN1bHRMaXN0KHNlbGYuY2FjaGUucGFnZXMsIHF1ZXJ5VGV4dCk7XG4gICAgICAgIHJlc3VsdHMgKz0gc2VsZi5idWlsZFJlc3VsdExpc3Qoc2VsZi5jYWNoZS5wb3N0cywgcXVlcnlUZXh0KTtcbiAgICAgICAgc2VsZi5kb20ubW9kYWxfcmVzdWx0cy5odG1sKHJlc3VsdHMpO1xuICAgICAgICBzZWxmLmJ1aWxkTWV0YWRhdGEoc2VsZi5jYWNoZSk7XG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgIGNhbGxiYWNrKHNlbGYuY2FjaGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxufSkoalF1ZXJ5KTsiXX0=
